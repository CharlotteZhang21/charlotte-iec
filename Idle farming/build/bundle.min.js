!function t(e,i,n){function a(o,s){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return a(i||t)},h,h.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./pieces.js"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n);i.default={pieces:a.default}},{"./pieces.js":2}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{blue:{frame:{x:152,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},blue_p:{frame:{x:156,y:164,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},donut:{frame:{x:609,y:164,w:181,h:149},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:181,h:149},sourceSize:{w:181,h:149}},green:{frame:{x:460,y:327,w:149,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:161},sourceSize:{w:149,h:161}},macaron:{frame:{x:610,y:1,w:148,h:155},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:148,h:155},sourceSize:{w:148,h:155}},marshmallow:{frame:{x:305,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},orange:{frame:{x:156,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},orange_p:{frame:{x:308,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},popcorn:{frame:{x:461,y:164,w:146,h:161},rotated:!1,trimmed:!0,spriteSourceSize:{x:2,y:0,w:146,h:161},sourceSize:{w:151,h:161}},pudding:{frame:{x:611,y:315,w:159,h:153},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:159,h:153},sourceSize:{w:159,h:153}},purple:{frame:{x:1,y:165,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},purple_p:{frame:{x:1,y:328,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},red:{frame:{x:309,y:164,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},red_p:{frame:{x:458,y:1,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},yellow:{frame:{x:1,y:1,w:149,h:162},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:162},sourceSize:{w:149,h:162}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"tiles.png",format:"RGBA8888",size:{w:791,h:490},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:a52266418105fd394661db76f76d6094:5da80af01517e173c5b36dd3086b03ba:accbe1e7e294ded8391337fc1c446319$"}}},{}],3:[function(t,e,i){"use strict";function n(t,e){var i=this;i.DIRECTION_UP=1,i.DIRECTION_DOWN=2,i.DIRECTION_LEFT=4,i.DIRECTION_RIGHT=8,i.DIRECTION_UP_RIGHT=16,i.DIRECTION_UP_LEFT=32,i.DIRECTION_DOWN_RIGHT=64,i.DIRECTION_DOWN_LEFT=128,i.game=t,i.model=void 0!==e?e:null,i.dragLength=100,i.diagonalDelta=50,i.swiping=!1,i.direction=null,i.tmpDirection=null,i.tmpCallback=null,i.diagonalDisabled=!1,this.game.input.onDown.add(function(){i.swiping=!0}),this.game.input.onUp.add(function(){i.swiping=!1})}n.prototype.keyUp=function(){this.direction=this.tmpDirection,this.tmpDirection=null,null!==this.tmpCallback&&(this.tmpCallback.call(this.model),this.tmpCallback=null)},n.prototype.check=function(){if(null!==this.direction){var t={x:0,y:0,direction:this.direction};return this.direction=null,t}if(!this.swiping)return null;if(Phaser.Point.distance(this.game.input.activePointer.position,this.game.input.activePointer.positionDown)<this.dragLength)return null;this.swiping=!1;var e=null,i=this.game.input.activePointer.position.x-this.game.input.activePointer.positionDown.x,n=this.game.input.activePointer.position.y-this.game.input.activePointer.positionDown.y,t={x:this.game.input.activePointer.positionDown.x,y:this.game.input.activePointer.positionDown.y},a=Math.abs(i),r=Math.abs(n);return!this.diagonalDisabled&&a>this.dragLength-this.diagonalDelta&&r>this.dragLength-this.diagonalDelta?i>0&&n>0?(e=this.DIRECTION_DOWN_RIGHT,null!==this.model&&this.model.downRight&&this.model.downRight(t)):i>0&&n<0?(e=this.DIRECTION_UP_RIGHT,null!==this.model&&this.model.upRight&&this.model.upRight(t)):i<0&&n>0?(e=this.DIRECTION_DOWN_LEFT,null!==this.model&&this.model.downLeft&&this.model.downLeft(t)):i<0&&n<0&&(e=this.DIRECTION_UP_LEFT,null!==this.model&&this.model.upLeft&&this.model.upLeft(t)):(a>this.dragLength||r>this.dragLength)&&(a>r?i>0?(e=this.DIRECTION_RIGHT,null!==this.model&&this.model.right&&this.model.right(t)):i<0&&(e=this.DIRECTION_LEFT,null!==this.model&&this.model.left&&this.model.left(t)):n>0?(e=this.DIRECTION_DOWN,null!==this.model&&this.model.down&&this.model.down(t)):n<0&&(e=this.DIRECTION_UP,null!==this.model&&this.model.up&&this.model.up(t))),null!==e?(t.direction=e,t):null},void 0!==i&&void 0!==e&&e.exports&&(e.exports=n)},{}],4:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var a=t("./states/boot"),r=n(a),o=t("./states/endcard"),s=n(o),l=t("./states/preloader"),u=n(l),h=new Phaser.Game(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio,Phaser.CANVAS,"game",null,!0);h.state.add("boot",new r.default),h.state.add("endcard",new s.default),h.state.add("preloader",new u.default),h.state.start("boot")},{"./states/boot":15,"./states/endcard":16,"./states/preloader":17}],5:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){n(this,t),this.audios=[],this.canPlay=!1}return a(t,[{key:"setCanPlay",value:function(){this.canPlay||(this.canPlay=!0)}},{key:"play",value:function(t,e,i){this.canPlay&&(null==this.audios[t]&&(this.audios[t]=new Audio(e)),this.initAudioArgs(t,i),this.audios[t].play(),void 0!==i&&void 0!==i.volume&&(this.audios[t].volume=i.volume))}},{key:"fadeOut",value:function(t){null!=this.audios[t]&&this.audios[t].fadeOut()}},{key:"pause",value:function(t){null!=this.audios[t]&&this.audios[t].pause()}},{key:"mute",value:function(t){null!=this.audios[t]&&(this.audios[t].muted=!0)}},{key:"muteAll",value:function(){for(var t in this.audios)this.audios.hasOwnProperty(t)&&(this.audios[t].pause(),this.audios[t].muted=!0)}},{key:"unmuteAll",value:function(){for(var t in this.audios)this.audios.hasOwnProperty(t)&&(this.audios[t].muted=!1)}},{key:"initAudioArgs",value:function(t,e){this.audios[t].muted=!1,this.audios[t].autoplay=!0,void 0!==e&&void 0!==e.loop&&"boolean"==typeof e.loop&&(this.audios[t].loop=e.loop)}}]),t}();i.default=r},{}],6:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("../utils/container-util"),u=n(l),h=t("../utils/util"),c=(n(h),t("../prefabs/custom-sprite")),d=(function(t){t&&t.__esModule}(c),function(t){function e(t){a(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.createBg(),i}return o(e,t),s(e,[{key:"createBg",value:function(){this.bg=new Phaser.Sprite(this.game,0,0,"bg"),this.add(this.bg),u.fitInContainerHeight(this.bg,"background",.5,.5)}},{key:"show",value:function(){this.game.add.tween(this).to({alpha:this.finalAlpha},500,Phaser.Easing.Sinusoidal.In,!0,200)}},{key:"hide",value:function(){if(this.alpha>0){this.game.add.tween(this).to({alpha:0},300,Phaser.Easing.Quadratic.In,!0,0)}}}]),e}(Phaser.Group));i.default=d},{"../prefabs/custom-sprite":9,"../utils/container-util":19,"../utils/util":23}],7:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("../utils/util"),u=n(l),h=t("../utils/container-util"),c=n(h),d=function(t){function e(t,i){a(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));switch(n.currentValue=i.initialValue,n.maxValue=i.maxValue,n.minValue=i.minValue,n.args=i,n.getContainerInfo(n.args.htmlTag),null!=n.args.backgroundSrc&&n.createCounterBackground(),n.visualStyle=i.style,i.style){case"number":n.createNumberCounter();break;case"rectangle_progressbar":n.createRectProgressBarCounter();break;case"circle_progressbar":n.createCircleProgressBarCounter();break;default:console.log("please set the counter style")}return n.game.add.existing(n),n.x+=n.counterBackground.width/2,n.y+=n.counterBackground.height/2,n.anchor=[],n.anchor.x=.5,n.anchor.y=.5,n}return o(e,t),s(e,[{key:"getContainerInfo",value:function(t){this.containerWidth=c.getContainerWidth(t),this.containerHeight=c.getContainerHeight(t),this.x=c.getContainerX(t),this.y=c.getContainerY(t)}},{key:"createRectProgressBarCounter",value:function(){this.barFilling=new Phaser.Sprite(this.game,0,0,this.args.backgroundSrc+"-fill"),this.add(this.barFilling),this.barFilling.anchor.set(0,.5),void 0!==this.args.htmlTagFill?(c.fitInContainer(this.barFilling,this.args.htmlTagFill),this.barFilling.x=-this.counterBackground.width/2,this.barFilling.y=-this.counterBackground.height/2,this.barFilling.x+=c.getContainerX(this.args.htmlTagFill)-c.getContainerX(this.args.htmlTag),this.barFilling.y+=c.getContainerY(this.args.htmlTagFill)-c.getContainerY(this.args.htmlTag)):(this.barFilling.x=this.counterBackground.x,this.barFilling.y=this.counterBackground.y+this.counterBackground.height/2,this.barFilling.scale.x=this.counterBackground.width/this.barFilling.width,this.barFilling.scale.y=this.counterBackground.height/this.barFilling.height*.75),this.fullWidthFilling=this.barFilling.scale.x,void 0!==this.maxValue&&(this.barFilling.scale.x=this.currentValue/this.maxValue*this.fullWidthFilling),void 0!==this.args.iconSrc&&this.createCounterIcon("outside"),void 0!==this.args.textFormat&&(this.createTextCounter(),this.updateTextCounter())}},{key:"createCircleProgressBarCounter",value:function(){this.barFilling=new Phaser.Sprite(this.game,0,0,this.args.backgroundSrc+"-fill"),this.add(this.barFilling),this.barFilling.anchor.set(.5),this.barFilling.x=this.counterBackground.x+this.counterBackground.width/2,this.barFilling.y=this.counterBackground.y+this.counterBackground.height/2,this.barFilling.scale.x=this.counterBackground.width/this.barFilling.width,this.barFilling.scale.y=this.counterBackground.height/this.barFilling.height,this.maskAngle={from:90,to:450},this.fullWidthFilling=this.maskAngle.to-this.maskAngle.from,this.arcMask=this.game.add.graphics(0,0);var t=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.arcMask.beginFill(16777215),this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(t),this.game.math.degToRad(this.maskAngle.from),!0),this.barFilling.mask=this.arcMask,this.add(this.arcMask)}},{key:"createTextCounter",value:function(){var t,e="bold",i=PiecSettings.fontFamily,n=[PiecSettings.fontColor],a=null,r=null,o=null,s=.5,l=.5;if(void 0!=this.args.fontStyle){var u=this.args.fontStyle;e=u.fontWeight,t=void 0!==this.args.htmlTagText?c.getContainerHeight(this.args.htmlTagText):this.counterBackground.height*u.fontSize||.5*this.counterBackground.height,i=u.fontFamily,n=u.color,a=u.stroke||null,r=u.strokeThickness||null,o=u.shadow||null,s=u.anchor.x||.5,l=u.anchor.y||.5}var h={font:e+" "+t+"px "+i,align:"center"},d=0;void 0!==this.args.iconSrc&&(d=.2),this.textField=new Phaser.Text(this.game,this.counterBackground.width*(.5+d),0,"",h),this.updateTextCounter(),this.textField.x-=this.counterBackground.width/2,this.add(this.textField),this.textField.anchor.set(s,l),this.textField.align="center",this.textField.padding.set(t/2,0),this.textField.initialScale=this.textField.scale.x,this.textField.fill="black";var g=this.textField.context.createLinearGradient(0,0,0,this.height);if(void 0!==n&&n.length>0)for(var f=0;f<n.length;f++){var p=f/n.length;g.addColorStop(p,n[f])}if(this.textField.fill=g,null!==a&&(this.textField.stroke=a),void 0!==r&&(this.textField.strokeThickness=r),null!==o){var m=o;this.textField.setShadow(m.x,m.y,m.color,m.blur)}}},{key:"updateTextCounter",value:function(){var t=" "+Math.round(this.currentValue);if(null!=this.args.counterCommaSeparation&&this.args.counterCommaSeparation&&(t=" "+u.numberWithCommas(this.currentValue)),void 0!==this.args.textFormat){t=this.args.textFormat.split("*")[0]+t+this.args.textFormat.split("*")[1]}this.textField.text=t,void 0!==this.args.htmlTagText&&(this.textField.x=this.textField.width/2-this.counterBackground.width/2,this.textField.y=this.textField.height/2-this.counterBackground.height/2,this.textField.x+=c.getContainerX(this.args.htmlTagText)-c.getContainerX(this.args.htmlTag),this.textField.y+=c.getContainerY(this.args.htmlTagText)-c.getContainerY(this.args.htmlTag))}},{key:"createNumberCounter",value:function(){this.createTextCounter(),this.changeNumTo(this.currentValue,1),null!=this.args.iconSrc&&this.createCounterIcon("contain")}},{key:"createCounterIcon",value:function(t){this.counterIcon=new Phaser.Sprite(this.game,0,0,this.args.iconSrc),this.add(this.counterIcon);var e=void 0!==this.args.iconScale?this.args.iconScale:.7;this.counterIcon.anchor.set(.5,.5),void 0!==this.args.htmlTagIcon?(c.fitInContainer(this.counterIcon,this.args.htmlTagIcon,.5,.5),this.counterIcon.x=c.getContainerX(this.args.htmlTagIcon)-c.getContainerX(this.args.htmlTag)-this.counterBackground.width/2+this.counterIcon.width/2,this.counterIcon.y=c.getContainerY(this.args.htmlTagIcon)-c.getContainerY(this.args.htmlTag)-this.counterBackground.height/2+this.counterIcon.height/2):("contain"==t?(this.counterIcon.scale.x=this.counterBackground.height*e/this.counterIcon.height,this.counterIcon.x=this.counterBackground.x+this.counterIcon.width):"outside"==t&&(this.counterIcon.scale.x=this.counterBackground.height*e/this.counterIcon.height,this.counterIcon.x=this.counterBackground.x-this.counterIcon.width),this.counterIcon.scale.y=this.counterIcon.scale.x,this.counterIcon.y=this.counterBackground.y+this.counterBackground.height/2)}},{key:"createCounterBackground",value:function(){this.counterBackground=new Phaser.Sprite(this.game,0,0,this.args.backgroundSrc),this.add(this.counterBackground),this.counterBackground.scale.x=this.containerWidth/this.counterBackground.width,this.counterBackground.scale.y=this.counterBackground.scale.x,this.counterBackground.x=-this.counterBackground.width/2,this.counterBackground.y=-this.counterBackground.height/2}},{key:"createCounterGraphicContainer",value:function(t){var e=new Phaser.Graphics(this.game,0,0);e.beginFill(16777215,0),e.drawRect(c.getContainerX(t),c.getContainerY(t),c.getContainerWidth(t),c.getContainerHeight(t)),this.counterBackground=e,this.add(this.counterBackground)}},{key:"changeCounterTo",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.calcSpeedFromDuration(t,e);switch(this.visualStyle){case"number":if(this.changeNumTo(t,10*n,10),this.textField){if(i){this.game.add.tween(this.textField.scale).to({x:1.4*this.textField.initialScale,y:1.4*this.textField.initialScale},1*e/4,Phaser.Easing.Linear.None,!0,1*e/3).onComplete.add(function(){this.game.add.tween(this.textField.scale).to({x:this.textField.initialScale,y:this.textField.initialScale},1*e/4,Phaser.Easing.Linear.None,!0,0)},this)}}break;case"rectangle_progressbar":this.changeRectBarTo(t,10*n,10);break;case"circle_progressbar":this.changeCircleBarTo(t,10*n,10)}}},{key:"setCounterTo",value:function(t){switch(this.visualStyle){case"number":this.setNumTo(t);break;case"rectangle_progressbar":this.setRectBarTo(t);break;case"circle_progressbar":this.setCircleBarTo(t)}}},{key:"calcSpeedFromDuration",value:function(t,e){return Math.abs(t-this.currentValue)/e}},{key:"setNumTo",value:function(t){this.currentValue=t,this.updateTextCounter()}},{key:"setRectBarTo",value:function(t){this.currentValue=t,void 0!==this.barFilling.tween&&null!=this.barFilling.tween&&this.game.tweens.remove(this.barFilling.tween),this.barFilling.tween=this.game.add.tween(this.barFilling.scale).to({x:this.currentValue/this.maxValue*this.fullWidthFilling},200,Phaser.Easing.Linear.None,!0,0),this.textField&&this.updateTextCounter()}},{key:"changeNumTo",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;void 0!==this.args.iconText&&this.args.iconText;t>this.currentValue?this.currentValue<t&&(this.currentValue+=e,this.currentValue>t&&(this.currentValue=t),this.game.time.events.add(i,function(){this.textField&&this.updateTextCounter(),this.currentValue<t&&this.changeNumTo(t,e,i)},this)):this.currentValue>=t&&(this.currentValue-=e,this.currentValue<t&&(this.currentValue=t),this.game.time.events.add(i,function(){this.textField&&this.updateTextCounter(),this.currentValue>t&&this.changeNumTo(t,e,i)},this))}},{key:"changeRectBarTo",value:function(t,e,i){t>this.currentValue?this.currentValue<t&&(this.currentValue+=e,this.currentValue>t&&(this.currentValue=t),this.game.time.events.add(i,function(){this.barFilling.scale.x=this.currentValue/this.maxValue*this.fullWidthFilling,this.textField&&this.updateTextCounter(),this.currentValue<t&&this.changeRectBarTo(t,e,i)},this)):this.currentValue>t&&(this.currentValue-=e,this.currentValue<t&&(this.currentValue=t),this.game.time.events.add(i,function(){this.barFilling.scale.x=this.currentValue/this.maxValue*this.fullWidthFilling,this.currentValue>t&&this.changeRectBarTo(t,1,i)},this))}},{key:"setCircleBarTo",value:function(t){this.currentValue=t;var e=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.arcMask.clear(),this.arcMask.beginFill(16777215),this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(e),this.game.math.degToRad(this.maskAngle.from),!0)}},{key:"changeCircleBarTo",value:function(t,e,i){if(t>this.currentValue){if(this.currentValue<t){this.currentValue+=e,this.currentValue>t&&(this.currentValue=t);var n=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.game.time.events.add(i,function(){this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(n),this.game.math.degToRad(this.maskAngle.from),!0),this.currentValue<t&&this.changeCircleBarTo(t,e)},this)}}else if(this.currentValue>t){this.currentValue-=e,this.currentValue<t&&(this.currentValue=t);var n=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.arcMask.clear(),this.game.time.events.add(i,function(){this.arcMask.beginFill(16777215),this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(n),this.game.math.degToRad(this.maskAngle.from),!0),this.currentValue>t&&this.changeCircleBarTo(t,e)},this)}}},{key:"hide",value:function(){this.alpha=0}},{key:"show",value:function(){this.alpha=1}},{key:"getXCoord",value:function(){}},{key:"getYCoord",value:function(){}}]),e}(Phaser.Group);i.default=d},{"../utils/container-util":19,"../utils/util":23}],8:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("../utils/container-util"),u=n(l),h=t("../utils/animations-util"),c=(n(h),t("../utils/custom-png-sequences-renderer.js")),d=(n(c),t("../utils/util")),g=(n(d),function(t){function e(t,i){a(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o="",s="";return void 0!==i.OSsensitive&&1==i.OSsensitive&&(o=n.game.global.deviceOS+"-"),void 0!==i.autolocalise&&1==i.autolocalise&&void 0!==PiecSettings.translations[i.src][n.game.global.deviceLanguage]&&(s=PiecSettings.translations[i.src][n.game.global.deviceLanguage]),i.src=o+s+i.src,n.args=i,n.initSignals(),void 0!==i.src&&""!=i.src?n.createButton(i):n.createInteractiveArea(i),n.button.inputEnabled=!0,n.button.input.useHandCursor=!0,n.button.events.onInputDown.add(function(){this.game.onSDKCall.dispatch(),this.game.time.events.add(50,function(){console.log("download"),parent.postMessage("download","*")},this)},n),n.game.world.bringToTop(n),n.hide(),n.anchor=[],n.anchor.x=n.args.anchor.x,n.anchor.y=n.args.anchor.y,n}return o(e,t),s(e,[{key:"createButton",value:function(t){this.button=new Phaser.Sprite(this.game,0,0,t.src),this.button.x-=this.button.width*this.args.anchor.x,this.button.y-=this.button.height*this.args.anchor.y,this.add(this.button),this.button.bringToTop(),u.fitInContainer(this,t.container,this.args.anchor.x,this.args.anchor.y)}},{key:"createInteractiveArea",value:function(t){var e=new Phaser.Graphics(this.game,0,0);e.beginFill(16777215,0),e.drawRect(-u.getContainerWidth(t.container)*this.args.anchor.x,-u.getContainerHeight(t.container)*this.args.anchor.y,u.getContainerWidth(t.container),u.getContainerHeight(t.container)),this.button=e,this.add(this.button),u.fitInContainer(this,t.container,this.args.anchor.x,this.args.anchor.y)}},{key:"initSignals",value:function(){this.onInteract=new Phaser.Signal}},{key:"show",value:function(){this.alpha<1&&(this.alpha=1),this.button.inputEnabled=!0}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0),this.button.inputEnabled=!1}},{key:"enable",value:function(){this.button.inputEnabled||(this.button.inputEnabled=!0)}},{key:"disable",value:function(){this.button.inputEnabled&&(this.button.inputEnabled=!1)}},{key:"fitInContainer",value:function(t){u.fitInContainer(this,t,this.anchor.x,this.anchor.y)}}]),e}(Phaser.Group));i.default=g},{"../utils/animations-util":18,"../utils/container-util":19,"../utils/custom-png-sequences-renderer.js":20,"../utils/util":23}],9:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("../utils/container-util"),u=n(l),h=t("../utils/util"),c=n(h),d=function(t){function e(t,i){if(a(this,e),void 0==i)return console.log("%c 🦄 ERROR: args doesn't exist","background: #222; color:"+c.getRandomColor()),r(s);var n="",o="";void 0!==i.OSsensitive&&1==i.OSsensitive&&(n=t.global.deviceOS+"-"),void 0!==i.autolocalise&&1==i.autolocalise&&void 0!==PiecSettings.translations[i.src][t.global.deviceLanguage]&&(o=PiecSettings.translations[i.src][t.global.deviceLanguage]),i.src=n+o+i.src;var s=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,0,0,i.src));return u.fitInContainer(s,i.container,i.anchor.x,i.anchor.y),s.game.add.existing(s),s.currentContainer=i.container,s}return o(e,t),s(e,[{key:"show",value:function(){this.alpha<1&&(this.alpha=1)}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0)}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"fitInContainer",value:function(t){u.fitInContainer(this,t,this.anchor.x,this.anchor.y)}}]),e}(Phaser.Sprite);i.default=d},{"../utils/container-util":19,"../utils/util":23}],10:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("../utils/container-util"),u=n(l),h=t("../utils/tweener"),c=(n(h),t("../utils/util")),d=(n(c),function(t){function e(t,i){a(this,e);var n=(i.text,u.getContainerHeight(i.container)||10),o={font:i.style.fontWeight+" "+n+"px "+i.style.fontFamily+","+PiecSettings.genericFontFamily},s=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,0,0,i.text,o)),l=s.context.createLinearGradient(0,0,0,s.height);if(void 0!==i.style.color&&i.style.color.length>0)for(var h=0;h<i.style.color.length;h++){var c=h/i.style.color.length;l.addColorStop(c,i.style.color[h])}if(s.fill=l,void 0!==i.style.stroke&&(s.stroke=i.style.stroke),void 0!==i.style.strokeThickness&&(s.strokeThickness=i.style.strokeThickness),void 0!==i.style.shadow){var d=i.style.shadow;s.setShadow(d.x,d.y,d.color,d.blur,d.shadowStroke,d.shadowFill)}return s.game.add.existing(s),s.currentContainer=i.container,s.alpha=0,void 0!==i.autolocalise&&1==i.autolocalise&&void 0!==PiecSettings.translations[s.text]?s.autolocalise():s.text=" "+s.text+" ",void 0!==i.style.fontCase&&"uppercase"==i.style.fontCase&&(s.text=s.text.toUpperCase(),s.game.time.events.add(50,function(){this.text=this.text.toUpperCase()},s)),u.bestFit(s,i.container,i.anchor.x,i.anchor.y),s}return o(e,t),s(e,[{key:"show",value:function(){this.alpha<1&&(this.alpha=1)}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0)}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"autolocalise",value:function(){var t=this.game.global.deviceLanguage;void 0!==PiecSettings.translations[this.text][t]&&(this.text=" "+PiecSettings.translations[this.text][t]+" ")}},{key:"fitInContainer",value:function(t){u.bestFit(this,t,this.anchor.x,this.anchor.y)}}]),e}(Phaser.Text));i.default=d},{"../utils/container-util":19,"../utils/tweener":22,"../utils/util":23}],11:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("../utils/util"),u=(n(l),t("../prefabs/custom-sprite")),h=(function(t){t&&t.__esModule}(u),t("../utils/container-util")),c=n(h),d=t("../utils/animations-util"),g=n(d),f=t("../utils/custom-png-sequences-renderer.js"),p=(n(f),t("../utils/tweener")),m=n(p),v=function(t){function e(t,i,n){a(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.cropsGroup=[],o.field=null,o.fieldDeco=null,o.level=0,o.createField(o.level),o.counter=i,o.coinsTotal=i.currentValue,o.audioController=n,o.initSignal(),o.idleTimer=o.game.time.events.add(5e3,function(){this.actived.dispatch()},o),o}return o(e,t),s(e,[{key:"initSignal",value:function(){this.actived=new Phaser.Signal}},{key:"getCurrentLevel",value:function(){return this.currentLevel}},{key:"getContainer",value:function(){return this.fieldContainer}},{key:"createField",value:function(t){if(this.cropsGroup=[],this.currentLevel=PiecSettings.fields[t],this.fieldContainer="field",this.field=new Phaser.Sprite(this.game,0,0,this.currentLevel.field),
c.fitInContainer(this.field,this.fieldContainer,.5,.5),this.add(this.field),void 0!=this.currentLevel.fieldDeco&&""!=this.currentLevel.fieldDeco&&(this.fieldDecoBack=new Phaser.Sprite(this.game,0,0,this.currentLevel.fieldDeco+"_back"),c.fitInContainer(this.fieldDecoBack,"field-deco-back-"+t,.5,1),this.fieldDecoFront=new Phaser.Sprite(this.game,0,0,this.currentLevel.fieldDeco+"_front"),c.fitInContainer(this.fieldDecoFront,"field-deco-front-"+t,.5,1)),this.cropsGroup=this.createCrops(this.currentLevel.crops,this.currentLevel.cropsAmount,t),void 0!=this.fieldDecoBack&&null!=this.fieldDecoBack&&this.add(this.fieldDecoBack),this.cropsGroup.length>0&&this.add(this.cropsLayer),void 0!=this.fieldDecoFront&&null!=this.fieldDecoFront&&this.add(this.fieldDecoFront),m.scaleIn(this.field,0,500,Phaser.Easing.Quadratic.InOut),this.cropsGroup.length>0)for(var e=0;e<this.cropsGroup.length;e++)m.scaleIn(this.cropsGroup[e],400+200*e,500,Phaser.Easing.Quadratic.InOut,m.jiggleJump(this.cropsGroup[e],800*Math.random(),800,Phaser.Easing.Linear.None));void 0!=this.currentLevel.appear&&"fromSky"==this.currentLevel.appear?(m.appearFromSky(this.fieldDecoFront,500,500,Phaser.Easing.Quadratic.InOut),m.appearFromSky(this.fieldDecoBack,500,500,Phaser.Easing.Quadratic.InOut)):void 0!=this.currentLevel.appear&&"fromGround"==this.currentLevel.appear&&(m.appearFromGround(this.fieldDecoFront,0,500,Phaser.Easing.Quadratic.InOut),m.appearFromGround(this.fieldDecoBack,0,500,Phaser.Easing.Quadratic.InOut)),void 0!=this.currentLevel.spawnStars&&this.currentLevel.spawnStars&&this.game.time.events.add(600,function(){this.stars=[],this.spawnStars(),this.bringAllStarsToTop()},this),this.field.inputEnabled=!0,this.field.input.useHandCursor=!0,this.field.events.onInputDown.add(function(){this.actived.dispatch()},this)}},{key:"levelUp",value:function(t){null!=t&&t.disableInteraction(),this.level++,this.fieldDisappear(),this.decreaseCoins(this.currentLevel.upgradeCost),this.dropOutEffect(),this.game.time.events.add(800,function(){this.createField(this.level),this.game.time.events.add(1e3,function(){void 0!=t&&t.enableInteraction()})},this)}},{key:"fieldDisappear",value:function(){this.cropsEffect=!1,m.fadeOut(this.field,0,300,Phaser.Easing.Linear.None,!0,function(t){t.destroy()});for(var t=0;t<this.cropsGroup.length;t++){var e=this.cropsGroup[t];m.scaleThenFade(e,0,10).onComplete.add(function(){e.destroy()})}this.cropsLayer.destroy(),null!=this.fieldDecoFront&&m.disappearToSide(this.fieldDecoFront,this.fieldDecoFront.x+this.fieldDecoFront.width/2,0,400,Phaser.Easing.Quadratic.In).onComplete.add(function(){this.fieldDecoFront.destroy()},this),null!=this.fieldDecoBack&&m.disappearToSide(this.fieldDecoBack,this.fieldDecoBack.x-this.fieldDecoBack.width/2,0,400,Phaser.Easing.Quadratic.In).onComplete.add(function(){this.fieldDecoBack.destroy()},this)}},{key:"createCrops",value:function(t,e,i){var n,a=[];this.cropsLayer=new Phaser.Group(this.game);for(var r=0;r<e;r++)n=new Phaser.Sprite(this.game,0,0,t),c.fitInContainer(n,"crop_"+i+"_"+r,.5,1),0==r&&(n.scale.x=-n.scale.x),this.cropsLayer.add(n),a.push(n);return this.cropsEffect=!0,a}},{key:"harvest",value:function(){this.idleTimer&&this.game.time.events.remove(this.idleTimer),this.cropsJump();var t=null;t=new Phaser.Sprite(this.game,0,0,"coin"),c.fitInContainer(t,"coin",.5,.5),t.x=c.getRandomXWithinContainer(this.fieldContainer),t.y=c.getRandomYWithinContainer(this.fieldContainer),this.game.add.existing(t),this.onCollectEffect(t,["flyToGoal"]),this.coinsTotal<this.counter.maxValue?(this.coinsTotal+=this.currentLevel.coins,this.counter.changeCounterTo(this.coinsTotal,1e3,!1)):(this.coinsTotal=this.counter.maxValue,this.game.onComplete.dispatch())}},{key:"decreaseCoins",value:function(){this.coinsTotal>this.counter.minValue?(this.coinsTotal-=this.currentLevel.dailyCost,this.counter.changeCounterTo(this.coinsTotal,300,!1)):this.coinsTotal=this.counter.minValue}},{key:"onCollectEffect",value:function(t,e){for(var i=0;i<e.length;i++)switch(e[i]){case"flyToGoal":void 0!=this.counter.args.sounds&&void 0!=this.counter.args.sounds.collect&&this.audioController.play(this.counter.args.sounds.collect,PiecSettings.assetsDir+this.counter.args.sounds.collect),this.flyToGoal(t)}}},{key:"flyToGoal",value:function(t){var e=this.counter.x,i=this.counter.y;this.game.add.tween(t).to({x:[e+(.5-Math.random())*this.field.width,e],y:i},400,Phaser.Easing.Quadratic.InOut,!0,0),this.game.add.tween(t.scale).to({x:.01,y:.01},100,Phaser.Easing.Quadratic.InOut,!0,300)}},{key:"dropOutEffect",value:function(){for(var t=(this.counter.x,this.counter.y,(Math.random()+1)*this.currentLevel.upgradeCost),e=0;e<t;e++){var i=new Phaser.Sprite(this.game,0,0,"coin");this.game.add.existing(i),c.fitInContainer(i,"coin",.5,.5),i.x=this.counter.x,i.y=this.counter.y,i.alpha=1,i.angle=90*(Math.random()-.5);var n=100*Math.random(),a=this,r=this.field.y;m.moveTo(i,i.x+(Math.random()-.5)*this.counter.width,[i.y-i.height/2,r],n,500,Phaser.Easing.Linear.Out,function(t){m.fadeOut(t,0,300,Phaser.Easing.Quadratic.out,!0,function(){t.destroy()}),void 0!==t&&a.spawnCloudExplosion(t)})}}},{key:"spawnCloudExplosion",value:function(t){if(null!=t&&void 0!=t)for(var e=0;e<30;e++){var i=new Phaser.Sprite(this.game,0,0,"cloud");this.game.add.existing(i),i.anchor.set(.5);var n=t.width/i.width;i.x=t.position.x,i.y=t.position.y,i.scale.x=n,i.scale.y=n;var a=i.y,r=i.x,o=t.width*(Math.random()-.5),s=t.height*(Math.random()-.5),l=r+o,u=a+s,n=0,h=100*Math.random(),c=50*Math.random()+400;m.scaleOut(i,h,c,Phaser.Easing.Quadratic.Out,function(t){t.alpha=0,t.destroy()}),m.moveTo(i,l,u,h,c,Phaser.Easing.Linear.InOut,null,!0)}}},{key:"cropsJump",value:function(){var t,e=Math.floor(this.currentLevel.cropsAmount*Math.random());t=this.cropsGroup[e],this.cropsEffect&&!t.isJumping&&(t.isJumping=!0,Math.random()>.5?m.slightMoveYoyo(t,.2*t.width,0,0,200,Phaser.Easing.Linear.None).onComplete.add(function(){t.isJumping=!1}):m.slightMoveYoyo(t,0,.1*t.height,0,200,Phaser.Easing.Linear.None).onComplete.add(function(){t.isJumping=!1}))}},{key:"bringAllStarsToTop",value:function(){for(var t=0;t<this.stars.length;t++)this.stars[t].bringToTop()}},{key:"spawnStars",value:function(){for(var t=0;t<20;t++){var e=Math.random()>.7?"confetti-1":"confetti-2",i=new Phaser.Sprite(this.game,0,0,e);this.add(i),this.stars.push(i),i.anchor.set(.5),this.game.global.windowWidth>this.game.global.windowHeight?(i.scale.x=this.field.width/i.width*(.18*Math.random())*.7,i.scale.y=i.scale.x):(i.scale.x=this.field.width/i.width*(.3*Math.random())*.7,i.scale.y=i.scale.x),i.x=this.field.width/3+this.field.width/2*Math.random(),i.y=this.field.y+.2*this.field.height,i.angle=45*Math.random(),i.alpha=0;var n=i.scale.x,a=i.y,r=i.x,o=.1;this.game.global.windowWidth>this.game.global.windowHeight&&(o=.1);var s=r+this.field.width/2*o*(Math.random()>.5?1:-1),l=3;this.game.global.windowWidth>this.game.global.windowHeight&&(l=1.5);var u=a-Math.random()*this.field.height*l,h=n*Math.random(),c=5*t,d=800*Math.random()+1e3;g.starFloatWithDelayCustom2(this.game,i,s,u,h,d,c,Phaser.Easing.Quadratic.Out)}}}]),e}(Phaser.Group);i.default=v},{"../prefabs/custom-sprite":9,"../utils/animations-util":18,"../utils/container-util":19,"../utils/custom-png-sequences-renderer.js":20,"../utils/tweener":22,"../utils/util":23}],12:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../ext/swipe"),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=function(){function t(e){n(this,t),this.game=e,this.swipe=new o.default(this.game),this.initSignals()}return a(t,[{key:"initSignals",value:function(){this.onSwipe=new Phaser.Signal}},{key:"update",value:function(){this.updateSwipe()}},{key:"updateSwipe",value:function(){var t=this.swipe.check();if(null!==t)switch(t.direction){case this.swipe.DIRECTION_LEFT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("LEFT"));break;case this.swipe.DIRECTION_RIGHT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("RIGHT"));break;case this.swipe.DIRECTION_UP:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("UP"));break;case this.swipe.DIRECTION_DOWN:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("DOWN"));break;case this.swipe.DIRECTION_UP_LEFT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("UPLEFT"));break;case this.swipe.DIRECTION_UP_RIGHT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("UPRIGHT"));break;case this.swipe.DIRECTION_DOWN_LEFT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("DOWNLEFT"));break;case this.swipe.DIRECTION_DOWN_RIGHT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("DOWNRIGHT"))}}},{key:"correctDirectionForRotatedWorld",value:function(t){if(-90==this.game.world.angle)switch(t){case"LEFT":return"UP";case"RIGHT":return"DOWN";case"UP":return"RIGHT";case"DOWN":return"LEFT";case"UPLEFT":return"UPRIGHT";case"UPRIGHT":return"DOWNRIGHT";case"DOWNLEFT":return"UPLEFT";case"DOWNRIGHT":return"DOWNLEFT"}return t}}]),t}();i.default=s},{"../ext/swipe":3}],13:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../utils/container-util"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=function(t){function e(t,i){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.logo=new Phaser.Sprite(r.game,0,0,"logo"),r.add(r.logo),r.logo.alpha=0,l.fitInContainer(r.logo,"logo",.5,.5),r}return r(e,t),o(e,[{key:"animate",value:function(){this.logo.alpha=1;var t=this.logo.scale.x,e=this.logo.y;this.logo.scale.x=.01,this.logo.scale.y=.01,this.game.add.tween(this.logo.scale).to({x:t,y:t},1e3,Phaser.Easing.Back.Out,!0,0),this.logo.y+=200,this.game.add.tween(this.logo).to({y:e},600,Phaser.Easing.Quadratic.Out,!0,0)}}]),e}(Phaser.Group);i.default=u},{"../utils/container-util":19}],14:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=t("../prefabs/counter"),h=a(u),c=t("../utils/container-util"),d=n(c),g=t("../utils/particles-util"),f=n(g),p=t("../utils/util"),m=n(p),v=t("../utils/tweener"),w=n(v),y=t("../utils/custom-png-sequences-renderer"),b=n(y),x=t("../prefabs/audio-controller"),P=(a(x),function(t){function e(t,i,n,a,s){r(this,e);var l=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.initSignals(),l.args=a,l.handGestureController=i,l.interactionElement=s,l.graphics=l.game.add.graphics(0,0),l.poweredUp=!1,l.completeInitialTween=!1,l.currentCheckpoint=0,l.completedCheckpoint=!1,l.currentPower=a.initialValue,l.minPower=a.valueRange.min,l.maxPower=a.valueRange.max,l.valueIncrementPerInteraction=a.valueIncrementPerInteraction,a.particles.src=l.getParticlesSrc(),void 0!==l.args.checkpoints&&l.args.checkpoints.length>1?l.checkpoints=l.args.checkpoints:(l.checkpoints=[],l.checkpoints.push(100)),l.particles=[],l.canInteract=!0,void 0!==a.sounds&&(l.audioController=n),l.initialised=!1,l.direction="",l.directionChangeTimes=0,l.disableInteraction(),l}return s(e,t),l(e,[{key:"init",value:function(){this.initialised||(this.createCounter(),this.createInteractiveArea(),this.initCounter(),void 0!==this.args.tutorial&&void 0!==this.args.tutorial.tagName&&this.createTutorial(),this.initialised=!0)}},{key:"initSignals",value:function(){this.onSuccess=new Phaser.Signal,this.onFail=new Phaser.Signal}},{key:"createCounter",value:function(){void 0!==this.args.counter&&(this.args.counter.initialValue=this.args.initialValue,this.args.counter.maxValue=this.args.valueRange.max,this.args.counter.minValue=this.args.valueRange.min,this.counter=new h.default(this.game,this.args.counter),this.counter.scale.x=.01,this.counter.scale.y=.01,this.game.add.tween(this.counter.scale).to({x:1,y:1},700,Phaser.Easing.Elastic.Out,!0,0).onComplete.add(function(){this.completeInitialTween=!0},this))}},{key:"initCounter",value:function(){this.args.valueDecreasePerHalfSecond>0&&this.game.time.events.loop(500,function(){this.poweredUp||(this.decreasePower(this.args.valueDecreasePerHalfSecond),this.interactionElement.decreaseCoins())},this),this.args.valueDecreasePerQuarterSecond>0&&this.game.time.events.loop(250,function(){this.poweredUp||(this.decreasePower(this.args.valueDecreasePerQuarterSecond),this.interactionElement.decreaseCoins())},this),this.initAutoplayEvent()}},{key:"initAutoplayEvent",value:function(){this.autoplayEvent&&this.game.time.events.remove(this.autoplayEvent),this.autoplayEvent=this.game.time.events.add(this.args.currentStateAutoPlay-1e3,function(){this.game&&(void 0!==this.args.playCheckpointOnArrival&&this.args.playCheckpointOnArrival?this.increasePower(this.getCheckpointAmount(Math.min(this.currentCheckpoint+1,this.checkpoints.length-1))):0==this.currentCheckpoint&&this.increasePower(this.getCheckpointAmount(this.checkpoints.length-1)),this.dispatchOnSuccess())},this)}},{key:"reinitStateForPersistingInstance",value:function(){this.initialised&&this.initAutoplayEvent()}},{key:"createInteractiveArea",value:function(){"tap"==this.args.typeOfInteraction?this.createTapInteractiveArea():-1!=this.args.typeOfInteraction.indexOf("swipe")?this.createSwipeInteractiveArea():"scratch"==this.args.typeOfInteraction&&this.createScratchInteractiveArea()}},{key:"createTapInteractiveArea",value:function(){var t=this.args.htmlTag,e=new Phaser.Graphics(this.game,0,0);e.beginFill(14554186,0),e.drawRect(d.getContainerX(t),d.getContainerY(t),d.getContainerWidth(t),d.getContainerHeight(t)),e.worldX=d.getContainerX(t),e.worldY=d.getContainerY(t),e.worldWidth=d.getContainerWidth(t),e.worldHeight=d.getContainerHeight(t),this.button=e,this.add(this.button);var i=0;this.button.inputEnabled=!0,this.button.input.useHandCursor=!0,this.button.events.onInputDown.add(function(){this.increasePower(this.valueIncrementPerInteraction),void 0!==this.args.particles&&void 0!==this.args.particles.src&&void 0!==this.args.particles.htmlTag&&this.args.particles.src.length>0&&(void 0===this.args.particles.effect||this.poweredUp||this.playEffect(this.args.particles.effect),void 0!==this.args.sounds&&void 0!==this.args.sounds.interact&&(this.audioController.play(this.args.sounds.interact+"_"+i,PiecSettings.assetsDir+this.args.sounds.interact),i++))},this)}},{key:"onUp",value:function(){this.canDrawPath=!1,this.audioController.setCanPlay(),this.graphics.clear()}},{key:"onDown",value:function(){this.canDrawPath=!0}},{key:"updatePath",value:function(){this.graphics.lineStyle(20,"0xffffff",1),null==this.curvePathStart?(this.graphics.moveTo(this.getGameXInput(),this.getGameYInput()),this.curvePathStart={x:this.getGameXInput(),y:this.getGameYInput()}):this.drawLineToPoint(this.prevX,this.prevY,this.getGameXInput(),this.getGameYInput());var t;t=this.prevX<this.getGameXInput()?"LEFT":"RIGHT",this.direction!=t&&(void 0!==this.args.sounds&&void 0!==this.args.sounds.interact&&this.audioController.play(this.args.sounds.interact,PiecSettings.assetsDir+this.args.sounds.interact,{loop:!1}),this.direction=t,this.directionChangeTimes++),this.directionChangeTimes>2&&(this.graphics.clear(),this.directionChangeTimes=0,this.graphics.moveTo(this.getGameXInput(),this.getGameYInput()),this.curvePathStart={x:this.getGameXInput(),y:this.getGameYInput()}),this.prevX=this.getGameXInput(),this.prevY=this.getGameYInput()}},{key:"drawLineToPoint",value:function(t,e,i,n){this.graphics.lineTo(i,n)}},{key:"createFollowFingerSprite",value:function(){void 0!==this.args.followFinger&&void 0!==this.args.followFinger.src&&(-1!=this.args.followFinger.src.indexOf(".png")?this.followFingerSprite=new Phaser.Sprite(this.game,0,0,this.args.followFinger.src):this.followFingerSprite=b.playPngSequence(this.game,this.args.followFinger.src,null),d.fitInContainer(this.followFingerSprite,this.args.followFinger.htmlTag,this.args.followFinger.anchor.x,this.args.followFinger.anchor.y),this.game.add.existing(this.followFingerSprite),this.followFingerSprite.alpha=0,void 0!==this.args.followFinger.persistent&&this.args.followFinger.persistent&&(this.followFingerSprite.alpha=1,this.followFingerSpritePersistent=!0,this.followFingerSpriteFlyIn()))}},{key:"createTutorial",value:function(){this.tutorialElement=new Phaser.Sprite(this.game,0,0,"hand"),d.fitInContainer(this.tutorialElement,"hand-1",.5,.5),this.game.add.existing(this.tutorialElement);var t=this.args.htmlTag;if(void 0!==this.args.tutorial.htmlTagSpawn&&(t=this.args.tutorial.htmlTagSpawn),"tap"==this.args.typeOfInteraction)this.tutorialLoop=this.game.time.events.loop(300,function(){var e=d.getRandomXWithinContainer(t),i=d.getRandomYWithinContainer(t);this.tutorialElement.x=e,this.tutorialElement.y=i;w.quickTap(this.tutorialElement,0,300,Phaser.Easing.Quadratic.InOut)},this);else if("scratch"==this.args.typeOfInteraction)w.tapAndHold(this.tutorialElement,0,900,Phaser.Easing.Quadratic.InOut),this.game.time.events.add(900,function(){void 0!==this.args.followFinger&&void 0!==this.args.followFinger.freedom&&"position"==this.args.followFinger.freedom||void 0!==this.args.followFinger&&void 0==this.args.followFinger.freedom?this.tutorialElementPositionScratch(t):void 0!==this.args.followFinger&&void 0!==this.args.followFinger.freedom&&"rotation"==this.args.followFinger.freedom&&this.tutorialElementRotationScratch(t)},this);else if(-1!=this.args.typeOfInteraction.indexOf("swipe")){var e=this.args.typeOfInteraction.split("swipe")[1].toLowerCase(),i=this.tutorialElement.scale.x,n=d.getContainerX(t),a=d.getContainerY(t);this.tutorialElementSwipe(i,n,a,e),this.tutorialLoop=this.game.time.events.loop(900,function(){this.tutorialElementSwipe(i,n,a,e)},this)}}},{key:"tutorialElementPositionScratch",value:function(t){var e,i,n,a;e=d.getContainerX(t),n=d.getContainerY(t)+d.getContainerHeight(t),i=d.getContainerX(t)+d.getContainerWidth(t),a=d.getContainerY(t);var r,o;r=e,o=n,this.tutorialTween=w.moveTo(this.tutorialElement,i,a,0,350,Phaser.Easing.Quadratic.InOut),this.tutorialTween&&this.tutorialTween.onComplete.add(function(){r=i,o=a},this);var s;this.tutorialLoop=this.game.time.events.loop(400,function(){r=r==e?i:e,o=o==n?a:n,null!=this.tutorialElement&&(s=w.moveTo(this.tutorialElement,r,o,0,500,Phaser.Easing.Quadratic.InOut))},this)}},{key:"tutorialElementRotationScratch",value:function(t){w.circleAround(this.tutorialElement,d.getXCenterWithinContainer(t),d.getYCenterWithinContainer(t),1.5,0,1100,Phaser.Easing.Quadratic.InOut);this.tutorialLoop=this.game.time.events.loop(1200,function(){w.circleAround(this.tutorialElement,d.getXCenterWithinContainer(t),d.getYCenterWithinContainer(t),1.5,0,1200,Phaser.Easing.Quadratic.InOut)},this)}},{key:"tutorialElementSwipe",value:function(t,e,i,n){this.tutorialElement.scale.x=t,this.tutorialElement.scale.y=t,this.tutorialElement.x=e,this.tutorialElement.y=i,w.swipe(this.tutorialElement,0,600,Phaser.Easing.Quadratic.InOut,300,n)}},{key:"getParticlesSrc",value:function(){return this.interactionElement.getCurrentLevel().flyingParticles}},{key:"playEffect",value:function(t){var e=this.getGameXInput(),i=this.getGameYInput();if(null!=this.game)switch(t){case"cropsHarvest":this.args.particles.src=this.getParticlesSrc(),f.particleBurst(this.game,this.args.particles.src,this.args.particles.htmlTag,d.getXCenterWithinContainer(this.interactionElement.getContainer()),d.getYCenterWithinContainer(this.interactionElement.getContainer()),Math.round(1*Math.random())),this.interactionElement.harvest();break;case"burst":f.particleBurst(this.game,this.args.particles.src,this.args.particles.htmlTag,e,i,10);break;case"spawn":this.particles.push.apply(this.particles,f.particleSpawn(this.game,this.args.particles.src,this.args.particles.htmlTag,e,i,1));break;case"shootLeft":f.particleShoot(this.game,this.args.particles.src,this.args.particles.htmlTag,e,i,15,-1,1);break;case"spawnAndFade":var n=f.particleSpawn(this.game,this.args.particles.src,this.args.particles.htmlTag,e,i,1,30)[0],a=n.x,r=n.y;this.game.add.tween(n).to({x:[a+.1*n.width*(Math.random()>.5?1:-1),a+.1*n.width*(Math.random()>.5?1:-1)],y:r-.75*n.height,alpha:[1,0]},700,Phaser.Easing.Quadratic.Out,!0,0);var o=n.scale.x;this.game.add.tween(n.scale).to({x:[1.15*o,.9*o],y:[1.15*o,.9*o]},700,Phaser.Easing.Back.Out,!0,0);break;case"glitterRain":f.particleRain(this.game,this.args.particles.src,this.args.particles.htmlTag,this.args.particles.htmlTagGoal,e,i,15,0,10);break;case"glitterBurst":f.particleRain(this.game,this.args.particles.src,this.args.particles.htmlTag,this.args.particles.htmlTagGoal,e,i,15,10,40);break;default:f.particleBurst(this.game,this.args.particles.src,this.args.particles.htmlTag,e,i,10)}}},{key:"clearParticles",value:function(){for(var t=0;t<this.particles.length;t++)if(void 0==this.particles[t].tween||null==this.particles[t].tween){var e=this.game.add.tween(this.particles[t].scale).to({x:.001,y:.001},400,Phaser.Easing.Back.In,!0,0),i=this.particles[t];e.onComplete.add(function(){i.destroy()},this)}}},{key:"createSwipeInteractiveArea",value:function(){this.audioIndex=0,this.handGestureController.onSwipe.add(this.swipeDetected,this)}},{key:"swipeDetected",value:function(t){var e=this.args.typeOfInteraction;"swipeUp"==e&&"UP"==t?this.increasePower(this.valueIncrementPerInteraction):"swipeDown"==e&&"DOWN"==t?this.increasePower(this.valueIncrementPerInteraction):"swipeLeft"==e&&"LEFT"==t?this.increasePower(this.valueIncrementPerInteraction):"swipeRight"==e&&"RIGHT"==t?this.increasePower(this.valueIncrementPerInteraction):"swipeUpLeft"==e&&"UPLEFT"==t?this.increasePower(this.valueIncrementPerInteraction):"swipeUpRight"==e&&"UPRIGHT"==t?this.increasePower(this.valueIncrementPerInteraction):"swipeDownLeft"==e&&"DOWNLEFT"==t?this.increasePower(this.valueIncrementPerInteraction):"swipeDownRight"==e&&"DOWNRIGHT"==t&&this.increasePower(this.valueIncrementPerInteraction),void 0!==this.args.sounds&&void 0!==this.args.sounds.interact&&(this.audioController.play(this.args.sounds.interact+"_"+this.audioIndex,PiecSettings.assetsDir+this.args.sounds.interact),this.audioIndex++)}},{key:"createScratchInteractiveArea",value:function(){this.updateCounter=!1,this.game.time.events.loop(100,function(){this.updateCounter=!0},this),this.curvePathStart=null,this.game.input.onDown.add(this.onDown,this),this.game.input.onUp.add(this.onUp,this),this.game.input.addMoveCallback(this.updateCounterOnMove,this)}},{key:"createFollowFinger",value:function(){this.createFollowFingerSprite(),void 0!==this.args.followFinger&&(void 0!==this.args.followFinger.freedom&&"position"==this.args.followFinger.freedom||void 0==this.args.followFinger.freedom?(this.game.input.onDown.add(this.fingerSpriteFollowPositionDown,this),this.game.input.onUp.add(this.fingerSpriteFollowPositionUp,this),this.game.input.addMoveCallback(this.fingerSpriteFollowPositionMove,this)):void 0!==this.args.followFinger.freedom&&"rotation"==this.args.followFinger.freedom&&(this.followFingerSprite.alpha=1,this.game.input.addMoveCallback(this.fingerSpriteFollowRotationMove,this),this.game.input.onUp.add(this.fingerSpriteFollowRotationUp,this)))}},{key:"getGameXInput",value:function(){var t=this.game.input.x,e=this.game.input.y;if(-90==this.game.world.angle){var i=t;t=this.game.height-e,e=i}return t}},{key:"getGameYInput",value:function(){var t=this.game.input.x,e=this.game.input.y;if(-90==this.game.world.angle){var i=t;t=this.game.height-e,e=i}return e}},{key:"updateCounterOnMove",value:function(){this.canInteract&&(this.updatePath(),this.updateCounter&&(this.increasePower(this.valueIncrementPerInteraction),void 0!==this.args.particles&&this.playEffect(this.args.particles.effect),this.updateCounter=!1))}},{key:"fingerSpriteFollowPositionDown",value:function(){this.followFingerSprite&&(this.followFingerSprite.alpha=1,this.followFingerSprite.x=this.getGameXInput(),this.followFingerSprite.y=this.getGameYInput()),void 0!==this.args.sounds&&void 0!==this.args.sounds.interact&&this.audioController.play(this.args.sounds.interact,PiecSettings.assetsDir+this.args.sounds.interact,{loop:!0})}},{key:"fingerSpriteFollowPositionMove",value:function(t,e,i){this.followFingerSprite&&(this.followFingerSprite.x=this.getGameXInput(),this.followFingerSprite.y=this.getGameYInput())}},{key:"fingerSpriteFollowPositionUp",value:function(){this.followFingerSprite&&!this.followFingerSpritePersistent&&(this.followFingerSprite.alpha=0),void 0!==this.args.sounds&&void 0!==this.args.sounds.interact&&this.audioController.pause(this.args.sounds.interact)}},{key:"fingerSpriteFollowRotationMove",value:function(t,e,i){this.followFingerSprite&&(this.followFingerSprite.angle=m.getAngleBetweenTwoPoints(this.followFingerSprite.x,this.followFingerSprite.y,e,i)+90),void 0!==this.args.sounds&&void 0!==this.args.sounds.interact&&this.audioController.play(this.args.sounds.interact,PiecSettings.assetsDir+this.args.sounds.interact,{loop:!0})}},{key:"fingerSpriteFollowRotationUp",value:function(){this.followFingerSprite&&this.game.add.tween(this.followFingerSprite).to({angle:0},300,Phaser.Easing.Quadratic.Out,!0,0),void 0!==this.args.sounds&&void 0!==this.args.sounds.interact&&this.audioController.pause(this.args.sounds.interact)}},{key:"disableInteraction",value:function(){this.canInteract=!1,null!=this.graphics&&this.graphics.clear(),console.log("disableInteraction")}},{key:"enableInteraction",value:function(){this.canInteract=!0,console.log("enableInteraction")}},{key:"increasePower",value:function(t){this.currentPower+=t;var e=this.getCheckpointAmount(this.currentCheckpoint);this.currentPower>=e&&(this.currentPower=e,this.nextCheckpoint()),void 0!==this.args.playCheckpointOnArrival&&this.args.playCheckpointOnArrival?this.currentPower!=e||this.poweredUp||(w.pulseOnce(this.counter,0,300,Phaser.Easing.Quadratic.InOut),this.game.time.events.remove(this.autoplayEvent),this.interactionElement.levelUp(this),void 0!==this.args.sounds&&void 0!==this.args.sounds.interact&&this.audioController.pause(this.args.sounds.interact),void 0!==this.args.sounds&&void 0!==this.args.sounds.upgrade&&(this.audioController.play(this.args.sounds.upgrade+"_"+this.audioIndex,PiecSettings.assetsDir+this.args.sounds.upgrade),this.audioIndex++),this.dispatchOnSuccess()):this.currentPower!=this.maxPower||this.poweredUp||(w.pulseOnce(this.counter,0,300,Phaser.Easing.Quadratic.InOut),this.dispatchOnSuccess()),this.counter.setCounterTo(Math.min(this.currentPower,this.maxPower)),this.currentCheckpoint==this.checkpoints.length-1&&this.scaleCounter(1.3),this.cancelTutorial()}},{key:"dispatchOnSuccess",value:function(){this.currentPower==this.maxPower&&(this.poweredUp=!0),this.clearParticles(),this.onSuccess.dispatch(this,Math.max(0,this.currentCheckpoint-1))}},{key:"getCheckpointAmount",value:function(t){return Math.min(this.checkpoints[t]/100*this.maxPower,this.maxPower)}},{key:"nextCheckpoint",value:function(){this.checkpoints.length>1&&this.currentCheckpoint++}},{key:"decreasePower",value:function(t){if(!this.poweredUp){this.currentPower-=t;var e=this.minPower;this.currentCheckpoint>0&&(e=this.getCheckpointAmount(this.currentCheckpoint-1)),this.currentPower<e&&(this.currentPower=e),this.counter.setCounterTo(this.currentPower),this.currentPower<=1*this.maxPower/2&&this.scaleCounter(1)}}},{key:"scaleCounter",value:function(t){null!=this.game&&this.completeInitialTween&&(void 0!==this.counter.tween&&null!=this.counter.tween&&this.game.tweens.remove(this.counter.tween),this.counter.tween=this.game.add.tween(this.counter.scale).to({x:t,y:t},400,Phaser.Easing.Linear.None,!0,0))}},{key:"cancelTutorial",value:function(){this.tutorialTween&&this.tutorialTween.stop(!1),this.tutorialLoop&&this.game.time.events.remove(this.tutorialLoop),this.tutorialElement&&w.fade(this.tutorialElement,0,0,200,Phaser.Easing.Linear.None,!0,function(t){t.destroy()})}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0)}},{key:"show",value:function(){this.alpha<1&&(this.alpha=1)}},{key:"disable",value:function(){this.hide()}},{key:"enable",value:function(){this.init(),this.show()}},{key:"followFingerSpriteFlyIn",value:function(){var t=this.followFingerSprite.x,e=this.followFingerSprite.y;this.followFingerSprite.x=this.game.global.windowWidth+.6*this.followFingerSprite.width,this.followFingerSprite.y+=.1*this.followFingerSprite.height,this.followFingerSprite.angle=10,this.game.add.tween(this.followFingerSprite).to({x:t,y:e,angle:0},1e3,Phaser.Easing.Quadratic.InOut,!0,0).interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)})}},{key:"followFingerSpriteFlyOut",value:function(){if(this.followFingerSpritePersistent){var t=this.followFingerSprite.y;return this.game.add.tween(this.followFingerSprite).to({x:.6*-this.followFingerSprite.width,y:[t+.1*this.followFingerSprite.height,t-.1*this.followFingerSprite.height],angle:[10,-5]},2e3,Phaser.Easing.Quadratic.InOut,!0,0).interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)})}return null}},{key:"autoDestroy",value:function(t){var e;this.game.time.events.add(t,function(){this.followFingerSprite&&(this.game.input.deleteMoveCallback(this.fingerSpriteFollowPositionMove,this),this.game.input.deleteMoveCallback(this.fingerSpriteFollowRotationMove,this),this.game.input.deleteMoveCallback(this.updateCounterOnMove,this),this.game.input.onDown.remove(this.fingerSpriteFollowPositionDown,this),this.game.input.onUp.remove(this.fingerSpriteFollowPositionUp,this),this.game.input.onUp.remove(this.fingerSpriteFollowRotationUp,this),this.handGestureController.onSwipe.remove(this.swipeDetected,this),this.game.time.events.remove(this.autoplayEvent),this.cancelTutorial(),void 0!==this.args.sounds&&void 0!==this.args.sounds.interact&&this.audioController.pause(this.args.sounds.interact),null==(e=this.followFingerSpriteFlyOut())&&(this.followFingerSprite.destroy(),this.followFingerSprite=null)),e?e.onComplete.add(function(){this.followFingerSprite.destroy(),
this.followFingerSprite=null,this.destroy()},this):this.destroy()},this)}}]),e}(Phaser.Group));i.default=P},{"../prefabs/audio-controller":5,"../prefabs/counter":7,"../utils/container-util":19,"../utils/custom-png-sequences-renderer":20,"../utils/particles-util":21,"../utils/tweener":22,"../utils/util":23}],15:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(){return n(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return r(e,t),o(e,[{key:"preload",value:function(){}},{key:"init",value:function(){PiecSettings.assetsDir="dev"===PiecSettings.env?"assets/":"";var t=this.game;t.onInteract=new Phaser.Signal,t.onComplete=new Phaser.Signal,t.onSDKCall=new Phaser.Signal,t.onResize=new Phaser.Signal,"undefined"!=typeof piec&&(piec.lockGame=function(){t.global.locked=!0},piec.unlockGame=function(){t.global.locked=!1},piec.destroyGame=function(){t.destroy()},piec.onSDKCall=function(){t.onSDKCall.dispatch()},piec.onResize=function(){t.onResize.dispatch()}),window.onresize=function(){t.scale.setGameSize(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio),t.scale.refresh(),t.state.start("boot",!0,!1)}}},{key:"create",value:function(){this.init(),this.game.input.maxPointers=1,this.initGlobalVariables(),this.game.state.start("preloader"),this.game.onMoveStart=function(t){t.global.interactions++,PiecSettings&&PiecSettings.onMoveStart&&PiecSettings.onMoveStart(t.global.interactions)},this.game.onMoveComplete=function(t){PiecSettings&&PiecSettings.onMoveComplete&&PiecSettings.onMoveComplete(t.global.moveStats)}}},{key:"initGlobalVariables",value:function(){this.game.global={deviceLanguage:"en",deviceOS:"",interaction:0,gameComplete:!1,currentVideoScript:null}}}]),e}(Phaser.State);i.default=s},{}],16:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=t("../prefabs/logo"),h=(a(u),t("../prefabs/custom-sprite")),c=a(h),d=t("../prefabs/custom-text"),g=a(d),f=t("../prefabs/audio-controller"),p=a(f),m=t("../prefabs/field"),v=a(m),w=t("../prefabs/cta-button"),y=a(w),b=t("../prefabs/background"),x=a(b),P=t("../prefabs/counter"),C=a(P),k=t("../prefabs/hand-gesture-controller"),I=a(k),O=t("../prefabs/powerup-game"),S=a(O),E=t("../utils/container-util"),F=(n(E),t("../utils/util")),T=(n(F),t("../utils/custom-png-sequences-renderer.js")),_=(n(T),t("../utils/tweener")),R=n(_),M=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return s(e,t),l(e,[{key:"create",value:function(){this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setUserScale(1/window.devicePixelRatio,1/window.devicePixelRatio,0,0),this.game.global.windowWidth=document.body.clientWidth,this.game.global.windowHeight=document.body.clientHeight,this.game.global.interacted=!1,this.audioController=new p.default(game),this.background=new x.default(this.game),this.game.add.existing(this.background),this.counter=new C.default(this.game,PiecSettings.moneyCounter,this.audioController),this.gameField=new v.default(this.game,this.counter,this.audioController),this.game.add.existing(this.gameField),this.cta=new y.default(this.game,{src:"cta",container:"cta-container",anchor:{x:.5,y:.5}}),this.game.add.existing(this.cta),this.cta.show(),this.gameField.actived.add(function(){null==this.miniGame&&this.initMiniGame()},this),this.hand=new c.default(this.game,{src:"hand",container:"hand-1",anchor:{x:.5,y:.5}}),this.hand.hide(),R.fadeIn(this.hand,800,300,Phaser.Easing.Linear.None,!0).onComplete.add(function(t){R.tap(this.hand,10,0,800,Phaser.Easing.Quadratic.InOut).onComplete.add(function(){R.fadeOut(this.hand,1e3,300,Phaser.Easing.Linear.None,!0)},this)},this),this.tutorialText=new g.default(this.game,PiecSettings.tutorialText),R.scaleIn(this.tutorialText,800,300,Phaser.Easing.Quadratic.InOut).onComplete.add(function(t){R.scaleOut(this.tutorialText,1e3,300,Phaser.Easing.Quadratic.InOut)},this),this.logo=new c.default(this.game,{src:"logo",container:"logo",anchor:{x:.5,y:.5}}),this.logo.show(),this.character=new c.default(this.game,{src:"farmer",container:"farmer",anchor:{x:.5,y:0}}),this.character.hide(),this.game.onComplete.add(function(){this.onComplete()},this)}},{key:"initMiniGame",value:function(){null!=this.hand&&(this.hand.hide(),this.hand.destroy()),this.gameField.levelUp(),this.handGestureController=new I.default(this.game),this.miniGame=new S.default(this.game,this.handGestureController,this.audioController,PiecSettings.miniGameArgs,this.gameField),this.miniGame.init(),this.game.time.events.add(1e3,function(){this.miniGame.enableInteraction()},this)}},{key:"onComplete",value:function(){console.log("onComplete"),this.miniGame.disableInteraction(),R.moveTo(this.counter,this.counter.x,-100,0,800,Phaser.Easing.Quadratic.InOut),R.slideInUp(this.character,300,800,Phaser.Easing.Back.Out),this.gameField.fieldDisappear(),this.miniGame.scaleCounter(.01),this.miniGame.disable(),R.moveToContainer(this.logo,"logo-final",0,800,Phaser.Easing.Quadratic.InOut),parent.postMessage("complete","*")}},{key:"resize",value:function(){}},{key:"render",value:function(){}}]),e}(Phaser.State);i.default=M},{"../prefabs/audio-controller":5,"../prefabs/background":6,"../prefabs/counter":7,"../prefabs/cta-button":8,"../prefabs/custom-sprite":9,"../prefabs/custom-text":10,"../prefabs/field":11,"../prefabs/hand-gesture-controller":12,"../prefabs/logo":13,"../prefabs/powerup-game":14,"../utils/container-util":19,"../utils/custom-png-sequences-renderer.js":20,"../utils/tweener":22,"../utils/util":23}],17:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("../atlas/index"),u=(n(l),t("../utils/util")),h=(n(u),t("../utils/custom-png-sequences-renderer.js")),c=n(h),d=function(t){function e(){a(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.asset=null,t}return o(e,t),s(e,[{key:"preload",value:function(){this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources(),c.preloadPngSequences(this.game)}},{key:"update",value:function(){}},{key:"loadResources",value:function(){for(var t=0;t<PiecSettings.assets.length;t++){var e=PiecSettings.assets[t],i=e.split(".");this.game.load.image(i[0],PiecSettings.assetsDir+e)}this.game.global.animations={},PiecSettings.animation=PiecSettings.animation||{}}},{key:"onLoadComplete",value:function(){this.game.state.start("endcard")}}]),e}(Phaser.State);i.default=d},{"../atlas/index":1,"../utils/custom-png-sequences-renderer.js":20,"../utils/util":23}],18:[function(t,e,i){"use strict";function n(t,e){t.loopReverse&&(t.animations.currentAnim.isReversed=!0),0!=e.loopCount&&e.loopCount==t.numberOfLoops&&(t.persistent||(t.alpha=0,e.loop=!1))}function a(t,e,i,n,a,s){if(e.loopReverse=a,e.speed=n,e.loopReverse)t.time.events.add(i,function(){e.alpha=1,e.animations.play("animation",n,!1),e.animations.currentAnim.onComplete.add(r,this)});else{var l=void 0!==s||s>=0;t.time.events.add(i,function(){e.alpha=1,e.animations.play("animation",n,l),l||e.animations.currentAnim.onComplete.add(o,this)})}}function r(t,e){t.animations.currentAnim.isReversed=!t.animations.currentAnim.isReversed,t.animations.play("animation",t.speed,!1)}function o(t,e){t.persistent||(t.alpha=0)}function s(t,e,i,r,o,s,l,u,h,c,d,g){for(var f=c.offsetWidth*window.devicePixelRatio,p=c.offsetHeight*window.devicePixelRatio,m=c.offsetLeft*window.devicePixelRatio,v=c.offsetTop*window.devicePixelRatio,w=f/100,y=p/100,b=[],x=0;x<e.length;x++){var P=d.add.sprite(m+e[x]*w,v+i[x]*y,t);g.add(P),P.anchor.set(s),P.animations.add("animation"),P.alpha=0,P.persistent=h,a(d,P,r[x],l,!1,o[x]),P.scale.x=f*u[x]/100/P.width,P.scale.y=P.scale.x,b.push(P),null!=o&&(P.numberOfLoops=o[x],P.animations.currentAnim.onLoop.add(n,this))}return b}function l(t,e,i,n,a,r){var o=e.scale.x;e.scale.x=.01,e.scale.y=.01,t.time.events.add(n,function(){t.add.tween(e.scale).to({x:o,y:o},i,Phaser.Easing.Back.Out,!0,0).onComplete.add(function(){t.time.events.add(a,function(){t.add.tween(e).to({alpha:0},i,Phaser.Easing.Quadratic.In,!0,0).onComplete.add(function(){e.destroy()},this)},this)},this)},this)}function u(t,e,i,n,a,r,o,s){t.time.events.add(o,function(){e.alpha=1,t.add.tween(e).to({y:n,x:i},r,s,!0,0),t.add.tween(e.scale).to({x:a,y:a},r,s,!0,0)},this),t.time.events.add(500+o,function(){t.add.tween(e).to({alpha:0},1e3,Phaser.Easing.Quadratic.InOut,!0,0),t.time.events.add(1e3,function(){e.destroy()},this)},this)}function h(t,e,i,n,a,r,o,s){t.time.events.add(o,function(){e.alpha=0,t.add.tween(e).to({alpha:[.5,1,0],y:n,x:i,angle:180},r,s,!0,0),t.add.tween(e.scale).to({x:a,y:a},r,s,!0,0)},this)}function c(t,e,i,n,a,r,o){this.starFloatWithDelayCustom(t,e,i,n,a,r,o,Phaser.Easing.Quadratic.Out)}function d(t,e,i,n,a,r){for(var o=Math.random()>.5?1:-1,s=50*Math.random()+30,l=0;l<20;l++){var u=new Phaser.Sprite(game,0,0,e);u.x=t.x,u.y=t.y,u.scale.x=t.x/1.5/u.width,u.scale.y=u.scale.x,u.alpha=0,u.anchor.set(.5);var h=u.scale.x,c=a+200*Math.random(),d=20*l+r,g=u.x;game.add.tween(u).to({x:[g+Math.random()*s*o,this.goal.getXCoordOfGoal(index)-Math.random()*s*o,this.goal.getXCoordOfGoal(index)],y:this.goal.getYCoordOfGoal(index),alpha:[1,1,1,1,0]},c,Phaser.Easing.Quadratic.InOut,!0,d).interpolation(function(t,e){return Phaser.Math.catmullRomInterpolation(t,e)}).onComplete.add(function(t){t.destroy()},this),game.add.tween(u.scale).to({x:[1.1*h,h,h,.5*h],y:[1.1*h,h,h,.5*h]},c,Phaser.Easing.Quadratic.InOut,!0,d),this.fxLayer.add(u)}}Object.defineProperty(i,"__esModule",{value:!0}),i.onLoop=n,i.playAnimation=a,i.onComplete=r,i.onCompleteNoLooping=o,i.playAnimations=s,i.spawnAndDissapear=l,i.starFloatWithDelayCustom2=u,i.starFloatWithDelayCustom=h,i.starFloatWithDelay=c,i.flyBubbleToGoal=d},{}],19:[function(t,e,i){"use strict";function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(e);var r=document.getElementById(e),o=r.offsetWidth*window.devicePixelRatio,s=r.offsetHeight*window.devicePixelRatio,l=r.getBoundingClientRect().left*window.devicePixelRatio,u=r.getBoundingClientRect().top*window.devicePixelRatio;void 0!==t.anchor&&(t.anchor.x=i,t.anchor.y=n),t.x=l+o*i,t.y=u+s*n;var h=t.scale.x;t.scale.x=o/(t.width/t.scale.x),t.scale.y=t.scale.x,t.height>s&&(t.scale.x=h,t.scale.y=h,t.scale.y=s/(t.height/t.scale.y),t.scale.x=t.scale.y)}function a(t){null==document.getElementById(t)&&console.log("ERROR: Container Name "+t+" doesn't exist in the DOM")}function r(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(e);var r=document.getElementById(e),o=r.offsetWidth*window.devicePixelRatio,s=r.offsetHeight*window.devicePixelRatio,l=r.getBoundingClientRect().left*window.devicePixelRatio,u=r.getBoundingClientRect().top*window.devicePixelRatio;void 0!==t.anchor&&(t.anchor.x=i,t.anchor.y=n),t.x=l+o*i,t.y=u+s*n,t.scale.x=o/(t.width/t.scale.x),t.scale.y=t.scale.x}function o(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(e);var r=document.getElementById(e),o=r.offsetWidth*window.devicePixelRatio,s=r.offsetHeight*window.devicePixelRatio,l=r.getBoundingClientRect().left*window.devicePixelRatio,u=r.getBoundingClientRect().top*window.devicePixelRatio;void 0!=t.anchor&&t.anchor.set(i,n),t.x=l+o*i,t.y=u+s*n,t.scale.y=s/t.height,t.scale.x=t.scale.y}function s(t,e){r(t,e),t.x+=t.width/2,t.y+=t.height/2}function l(t){return a(t),document.getElementById(t).getBoundingClientRect().top*window.devicePixelRatio}function u(t){return a(t),document.getElementById(t).getBoundingClientRect().left*window.devicePixelRatio}function h(t){return a(t),document.getElementById(t).offsetWidth*window.devicePixelRatio}function c(t){return a(t),document.getElementById(t).offsetHeight*window.devicePixelRatio}function d(t,e){a(e);var i=document.getElementById(e),n=i.offsetWidth*window.devicePixelRatio;i.offsetHeight,window.devicePixelRatio;t.scale.x=n/t.width,t.scale.y=t.scale.x}function g(t){a(t);var e=document.getElementById(t),i=e.offsetWidth*window.devicePixelRatio,n=(e.offsetHeight,window.devicePixelRatio,e.getBoundingClientRect().left*window.devicePixelRatio);e.getBoundingClientRect().top,window.devicePixelRatio;return n+Math.random()*i}function f(t){a(t);var e=document.getElementById(t),i=(e.offsetWidth,window.devicePixelRatio,e.offsetHeight*window.devicePixelRatio);e.getBoundingClientRect().left,window.devicePixelRatio;return e.getBoundingClientRect().top*window.devicePixelRatio+Math.random()*i}function p(t){a(t);var e=document.getElementById(t),i=e.offsetWidth*window.devicePixelRatio;return e.getBoundingClientRect().left*window.devicePixelRatio+i/2}function m(t){a(t);var e=document.getElementById(t),i=e.offsetHeight*window.devicePixelRatio;return e.getBoundingClientRect().top*window.devicePixelRatio+i/2}function v(t){var e={};if(e.x=t.global.windowWidth/2,e.y=t.global.windowHeight/2,-90==t.world.angle){var i=e.x;e.x=e.y,e.y=i}return e}function w(t,e,i){var n={};if(n.x=e,n.y=i,-90==t.world.angle){var a=n.x;n.x=n.y,n.y=a}return n}Object.defineProperty(i,"__esModule",{value:!0}),i.bestFit=n,i.fitInContainer=r,i.fitInContainerHeight=o,i.fitInContainerAnchorAtCenter=s,i.getContainerY=l,i.getContainerX=u,i.getContainerWidth=h,i.getContainerHeight=c,i.resizeToSizeOfContainer=d,i.getRandomXWithinContainer=g,i.getRandomYWithinContainer=f,i.getXCenterWithinContainer=p,i.getYCenterWithinContainer=m,i.getWorldCentre=v,i.getWorldPos=w},{}],20:[function(t,e,i){"use strict";function n(t){if(null!=PiecSettings.pngAnimations)for(var e=0;e<PiecSettings.pngAnimations.length;e++){var i=PiecSettings.pngAnimations[e];a(t,i)}}function a(t,e){var i=e.src.substr(0,e.src.indexOf("."));t.load.spritesheet(i,PiecSettings.assetsDir+e.src,e.spriteWidth,e.spriteHeight,e.spriteNumber)}function r(t,e,i,n,a,r,o){var l=e.src.substr(0,e.src.indexOf("."));if(null!=e.htmlContainer)var u=document.getElementById(e.htmlContainer),r=u.offsetWidth*window.devicePixelRatio,n=(u.offsetHeight,window.devicePixelRatio,u.getBoundingClientRect().left*window.devicePixelRatio),a=u.getBoundingClientRect().top*window.devicePixelRatio;var h=t.add.sprite(n,a,l);if(null!=i&&i.add(h),h.animations.add("animation"),h.anchor.set(0,0),h.alpha=0,null==e.loopReverse&&(e.loopReverse=!1),null!=e.isReversed&&e.isReversed&&(h.animations.currentAnim.isReversed=!0),s.playAnimation(t,h,e.delay,e.fps,e.loopReverse),null!=e.angle&&0!=e.angle){var c=0;this.game.global.windowWidth>this.game.global.windowHeight&&null!=e.responsiveAngle&&e.responsiveAngle&&(c=90),h.anchor.set(.5),h.angle=e.angle+c}if(h.scale.x=r/h.width,h.scale.y=h.scale.x,h.persistent=!1,null!=e.loops&&(h.numberOfLoops=e.loops,h.animations.currentAnim.onLoop.add(s.onLoop,this)),null!=e.effect&&-1!=e.effect.indexOf("fade-in")){h.alpha=0;t.add.tween(h).to({alpha:1},1e3,Phaser.Easing.Linear.None,!0,e.delay)}return h}Object.defineProperty(i,"__esModule",{value:!0}),i.preloadPngSequences=n,i.playPngSequence=r;var o=t("../utils/animations-util.js"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o)},{"../utils/animations-util.js":18}],21:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t,e,i,n,a,r){for(var o=0;o<r;o++){var l=s(t,e);d.fitInContainer(l,i,.5,.5),l.x=n,l.y=a;var u=.1*Math.random()+1;l.scale.x*=u,l.scale.y=l.scale.x;var h=90*Math.random();l.angle=h,t.add.existing(l);var c=100*Math.random(),g=600+200*Math.random(),p=Math.random()-.5,m=l.y-l.height*(3*Math.random()),v=f.moveTo(l,l.x+p*l.width*15,[m,m+l.height*(7*Math.random())],c,g,Phaser.Easing.Quadratic.Out);l.tween=v,t.add.tween(l).to({angle:h+25*p+100*(p<0?-1:1)},g,Phaser.Easing.Quadratic.InOut,!0,c),f.scaleOut(l,g-200,200,Phaser.Easing.Quadratic.InOut),v.onComplete.add(function(t){t.destroy()})}}function r(t,e,i,n,a,r,o){for(var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:10,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:40,h=0;h<o;h++){var c=s(t,e);d.fitInContainer(c,i,.5,.5),c.x=a,c.y=r;var g=.5*Math.random()+.5;c.scale.x*=g,c.scale.y=c.scale.x;var p=90*Math.random();c.angle=p,t.add.existing(c);var m=100*Math.random(),v=1500+200*Math.random(),w=Math.random()-.5,y=c.y-c.height*(Math.random()*l),b=-1,x=-1;if(void 0!==n&&(b=d.getContainerX(n),x=d.getContainerY(n)),-1!=b&&-1!=x){var P=f.moveTo(c,[c.x+w*c.width*u,c.x+w*c.width*u*5,b+Math.random()*c.width*10],[y,y+c.height*(30*Math.random()),x+Math.random()*c.height*10],m,v,Phaser.Easing.Quadratic.Out).interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)});c.tween=P}else if(l>0){var P=f.moveTo(c,c.x+w*c.width*u,[y,y+c.height*(30*Math.random())],m,v,Phaser.Easing.Quadratic.Out).interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)});c.tween=P}else{var P=f.moveTo(c,c.x+w*c.width*u,y+c.height*(30*Math.random()),m,v,Phaser.Easing.Quadratic.Out).interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)});c.tween=P}t.add.tween(c).to({angle:p+25*w+100*(w<0?-1:1)},v,Phaser.Easing.Quadratic.InOut,!0,m),f.scaleOut(c,v-100,100,Phaser.Easing.Quadratic.InOut),P.onComplete.add(function(t){t.destroy()})}}function o(t,e,i,n,a,r,o,l){for(var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=0;h<r;h++){var c=s(t,e);d.fitInContainer(c,i,.5,.5),c.x=n,c.y=a;var g=.5*Math.random()+1;c.scale.x*=g,c.scale.y=c.scale.x;var p=90*Math.random();c.angle=p,t.add.existing(c);var m=100*Math.random(),v=600+200*Math.random(),w=f.moveTo(c,c.x+o*c.width*(Math.random()+u),c.y+l*c.height*(Math.random()+u),m,v,Phaser.Easing.Quadratic.Out);c.tween=w,t.add.tween(c).to({angle:p+25*o+100*(o<0?-1:1)},v,Phaser.Easing.Quadratic.InOut,!0,m);var y=c.scale.x;c.scale.x=.2*y,c.scale.y=.2*y,t.add.tween(c.scale).to({x:[y,y,y,.01],y:[y,y,y,.01]},v,Phaser.Easing.Quadratic.InOut,!0,0),w.onComplete.add(function(t){t.destroy()})}}function s(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e[Math.min(Math.floor(Math.random()*e.length),e.length-1)];return i?m.playPngSequence(t,n,null):new Phaser.Sprite(t,0,0,n)}function l(t,e,i,n,a,r){for(var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:360,s=[],l=0;l<r;l++){var u=h(t,e,i,n,a,o);s.push(u)}return s}function u(t,e,i,n,a,r,o){for(var l=(arguments.length>7&&void 0!==arguments[7]&&arguments[7],[]),u=d.getContainerWidth(n)/2,h=0,c=2*Math.PI/o,g=0;g<o;g++){var f=s(t,e);d.fitInContainer(f,i,.5,.5),f.angle=90+360/o*g,l.push(f),t.add.existing(f),f.x=a,f.y=r;var p=f.scale.x,m=f.x+u*Math.cos(h),v=f.y+u*Math.sin(h);h+=c,t.add.tween(f).to({x:m,y:v},400,Phaser.Easing.Quadratic.Out,!0,0),f.scale.x=.1*p,t.add.tween(f.scale).to({x:[p,0],y:[p,0]},400,Phaser.Easing.Quadratic.Out,!0,0)}return l}function h(t,e,i,n,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:360,o=s(t,e),l=Math.random()-.5,u=Math.random()-.5;d.fitInContainer(o,i,.5,.5),o.x=n+l*o.width,o.y=a+u*o.width;var h=.1*Math.random()+1;o.scale.x*=h,o.scale.y=o.scale.x;var c=Math.random()*r;return o.angle=c,t.add.existing(o),o}Object.defineProperty(i,"__esModule",{value:!0}),i.particleBurst=a,i.particleRain=r,i.particleShoot=o,i.particleSpawn=l,i.particleExplosion=u;var c=t("../utils/container-util"),d=n(c),g=t("../utils/tweener"),f=n(g),p=t("../utils/custom-png-sequences-renderer"),m=n(p)},{"../utils/container-util":19,"../utils/custom-png-sequences-renderer":20,"../utils/tweener":22}],22:[function(t,e,i){"use strict";function n(t,e,i,n,a,r,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(null==t||null===t.game)return null;var l=document.getElementById(e),u=l.offsetWidth*window.devicePixelRatio,h=u*t.anchor.x,c=l.getBoundingClientRect().left*window.devicePixelRatio+h,d=u/(t.width/t.scale.x),g=l.offsetHeight*window.devicePixelRatio,f=g*t.anchor.y,p=l.getBoundingClientRect().top*window.devicePixelRatio+f;s&&t.height/t.scale.y*d>g&&(d=g/(t.height/t.scale.y));var m=t.game.add.tween(t).to({x:c,y:p},n,a,void 0===o||o,i);return t.game.add.tween(t.scale).to({x:d,y:d},n,a,void 0===o||o,i),r&&m.onComplete.add(r,this),m}function a(t,e,i,n,a,r,o,s){if(null===t||null===t.game)return null;var l=t.game.add.tween(t).to({x:e,y:i},a,r,void 0===s||s,n);return o&&l.onComplete.add(o,this),l}function r(t,e,i,n,a,r,o){if(null===t||null===t.game)return null;var s={};null!==e&&(s={alpha:e});var l=t.game.add.tween(t).to(s,0===n?1:n,a,void 0===r||r,i);return o&&l.onComplete.add(o,this),l}function o(t,e,i,n,a,r){return this.fade(t,1,e,i,n,a,r)}function s(t,e,i,n,a,r){return this.fade(t,0,e,i,n,a,r)}function l(t,e,i,n,a,r,o){if(null===t||null===t.game)return null;var s=t.game.add.tween(t.scale).to({x:e,y:i},a,r,!0,n);return o&&s.onComplete.add(o,this),s}function u(t,e,i,n,a,r){if(null===t||null===t.game)return null;var o=document.getElementById(e),s=o.getBoundingClientRect(),l=this.getScaleFromDom(e,t);this.moveTo(t,(s.left+.5*s.width)*window.devicePixelRatio,(s.top+.5*s.height)*window.devicePixelRatio,i,n,a,r),this.scaleTo(t,l,l,i,n,a)}function h(t,e){var i=document.getElementById(t),n=i.getBoundingClientRect(),a=n.width*window.devicePixelRatio/e._frame.width;return!1==e._frame.height*a<=n.height*window.devicePixelRatio&&(a=n.height*window.devicePixelRatio/e._frame.height),a}function c(t,e,i){if(null===t||null===t.game)return null;t.game.add.tween(t.scale).to({x:1.2*t.scale.x,y:1.2*t.scale.x},i,Phaser.Easing.Quadratic.InOut,!0,e,-1,!0)}function d(t,e,i){if(null===t||null===t.game)return null;var n=t.scale.x,a=t.scale.y;t.angle=0,t.scale.x=0,t.scale.y=0,t.game.add.tween(t.scale).to({x:n,y:a},i,Phaser.Easing.Quadratic.InOut,!0,e),t.game.add.tween(t).to({angle:360},i,Phaser.Easing.Back.InOut,!0,e)}function g(t,e,i,n,a){if(null===t||null===t.game)return null;i=t.scale.x*i,n=t.scale.x*n;var r=t.game.add.tween(t.scale).to({x:i,y:i},500,Phaser.Easing.Quadratic.Out,!0,0),o=t.game.add.tween(t.scale).to({x:n,y:n},500,Phaser.Easing.Quadratic.In,!1,0);r.chain(o);var s=t.game.add.tween(t).to({angle:15},500,function(t){return Math.sin(2*Math.PI*t)},!0,0,1);a&&s.onComplete.add(function(){a(t)},this)}function f(t,e,i,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=t.scale.x,o=t.scale.y;t.game.add.tween(t.scale).to({x:r*(e||1.1),y:o*(i||.9)},n||800,Phaser.Easing.Linear.None,!0,delay,-1).yoyo(a,0)}function p(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments[4],r=arguments[5];e=e||10;var o=t.angle,s=o+e;t.angle-=e,null!=a&&(t.anchor.x=a),null!=r&&(t.anchor.y=r),t.game.add.tween(t).to({angle:s},i,Phaser.Easing.Linear.None,!0,n,-1).yoyo(!0,0)}function m(t,e,i,n,a){var r=t.scale.x,o=t.scale.y;t.scale.x=.001,t.scale.y=.001,"function"==typeof t.show?t.show():t.alpha=1;var s=t.game.add.tween(t.scale).to({x:r,y:o},i||800,n,!0,e||0);return a&&s.onComplete.add(function(){a(t)},this),s}function v(t,e,i,n,a){var r=t.scale.x,o=t.game.add.tween(t.scale).to({x:.001,y:.001},i||800,n,!0,e||0);return a?o.onComplete.add(function(){"function"==typeof t.hide?t.hide():t.alpha=0,t.scale.x=r,t.scale.y=r,a(t)},this):o.onComplete.add(function(){"function"==typeof t.hide?t.hide():t.alpha=0,t.scale.x=r,t.scale.y=r},this),o}function w(t,e,i,n,a){var r=.3*a;t.alpha=0;var o=t.game.add.tween(t).to({alpha:1},r,Phaser.Easing.Linear.None,!0,n||0),s=t.game.add.tween(t).to({alpha:0},r,Phaser.Easing.Linear.None,!1,a-2*r);o.chain(s),t.game.add.tween(t).to({x:e,y:i},a,Phaser.Easing.Quadratic.Out,!0,n||0)}function y(t,e,i){var n=.3*i,a=.15*i,r=t.scale.x,o=t.scale.y;return t.scale.x=0,t.scale.y=0,t.game.add.tween(t.scale).to({x:r,y:o},a,Phaser.Easing.Quadratic.In,!0,e||0),t.game.add.tween(t).to({alpha:0},n,Phaser.Easing.Linear.None,!0,i-a)}function b(t,e,i,n){t.game.add.tween(t).to({angle:[-5,-5,0]},i,n,!0,e);var a=t.scale.x;return t.game.add.tween(t.scale).to({x:[.9*a,.9*a,a],y:[.9*a,.9*a,a]},i,n,!0,e)}function x(t,e,i,n,a){t.angle=e,t.game.add.tween(t).to({angle:[e+10,e+5,e-5,e-5,e]},n,a,!0,i);var r=t.scale.x;return t.game.add.tween(t.scale).to({x:[r,r,.9*r,.9*r,r],y:[r,r,.9*r,.9*r,r]},n,a,!0,i)}function P(t,e,i,n){t.game.add.tween(t).to({angle:-10},i,n,!0,e);var a=t.scale.x;return t.game.add.tween(t.scale).to({x:[1.05*a,.9*a],y:[1.05*a,.9*a]},i,n,!0,e)}function C(t,e,i,n){var a,r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"up",l=t.y,u=t.x,h=t.scale.x,c=20,d=0;switch(s){case"up":a=.1*t.width,r=1.2*t.height*-1,d=-20,c=-10;break;case"down":a=.1*t.width,r=1.2*t.height,d=20,c=-10;break;case"left":a=1.2*t.width*-1,r=.1*t.height,d=20,c=20;break;case"right":a=1.2*t.width,r=.1*t.height,d=-20;break;case"upleft":a=1.2*t.width*-1,r=1.2*t.height*-1,d=20,c=40;break;case"upright":a=1.2*t.width,r=1.2*t.height*-1,d=-20,c=-20;break;case"downleft":a=1.2*t.width*-1,r=1.2*t.height,d=20,c=-10;break;case"downright":a=1.2*t.width,r=1.2*t.height,d=-15,c=-5}t.game.add.tween(t).to({angle:[c+d,c,c-d],y:[l,l+r/2,l+r],x:[u,u+a/2,u+a]},i,n,!0,e).onComplete.add(function(){t.game.add.tween(t).to({angle:0,x:u,y:l},o-200,n,!0,150)},this),t.game.add.tween(t.scale).to({x:[.8*h,.8*h],y:[.8*h,.8*h]},i,n,!0,e).onComplete.add(function(){t.game.add.tween(t.scale).to({x:h,y:h},150,n,!0,0)},this)}function k(t,e,i,n,a,r,o){var s=n*t.width,l=e,u=i;return t.game.add.tween(t).to({x:[l,l+s*Math.cos(Math.PI/4),l+s,l+s*Math.cos(Math.PI/4),l,l-s*Math.cos(Math.PI/4),l-s,l-s*Math.cos(Math.PI/4),l],y:[u-s,u-s*Math.sin(Math.PI/4),u,u+s*Math.sin(Math.PI/4),u+s,u+s*Math.sin(Math.PI/4),u,u-s*Math.sin(Math.PI/4),u-s],angle:[0,-50,0,50,0]},r,o,!0,a).interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)})}function I(t,e,i,n){var a=.5*t.height,r=t.y,o=t.x,s=t.scale.x;t.game.add.tween(t).to({angle:[10,0,-10],y:[r,r+a/2,r+a],x:[o,o+0,o+0]},i,n,!0,e).onComplete.add(function(){t.game.add.tween(t).to({angle:0,x:o,y:r},i/2,n,!0,500)},this),t.game.add.tween(t.scale).to({x:[.9*s,.9*s],y:[.9*s,.9*s]},i,n,!0,e).onComplete.add(function(){t.game.add.tween(t.scale).to({x:s,y:s},500,n,!0,0)},this)}function O(t,e,i,n){var a=2*t.height*-1;return this.slideIn(t,0,a,e,i,n)}function S(t,e,i,n){var a=2*t.height;return this.slideIn(t,0,a,e,i,n)}function E(t,e,i,n){var a=2*t.width;return this.slideIn(t,a,0,e,i,n)}function F(t,e,i,n){var a=2*t.width*-1;return this.slideIn(t,a,0,e,i,n)}function T(t,e,i,n,a,r){var o=t.x,s=t.y;return t.x+=e,t.y+=i,this.fadeIn(t,n,a/2,Phaser.Easing.Quadratic.InOut),t.game.add.tween(t).to({x:o,y:s},a,r,!0,n)}function _(t,e,i,n){var a=t.scale.x;return t.game.add.tween(t.scale).to({x:1.1*a,y:1.1*a},i,n,!0,e).loop(!0).yoyo(!0)}function R(t,e,i,n){var a=t.scale.x;return t.game.add.tween(t.scale).to({x:1.1*a,y:1.1*a},i,n,!0,e).yoyo(!0)}function M(t,e,i,n){var a=t.scale.x;return t.scale.x=1.1*a,t.scale.y=.9*a,t.game.add.tween(t.scale).to({x:a,y:a},i,n,!0,e)}function D(t,e,i,n,a){var r=t.scale.y;return t.scale.y=.001,t.game.add.tween(t.scale).to({y:[1.2*r,r]},i,n,!0,e)}function B(t,e,i,n,a){var r=(t.scale.x,t.y);t.y+=2*t.height*-1,this.scaleIn(t,e,i/2,n,function(t){t.game.add.tween(t).to({y:[r,.9*r,r]},i,n,!0,0)})}function j(t,e,i,n,a){var r=t.scale.y;t.scale.y=r,t.game.add.tween(t.scale).to({y:.95*r},i||800,n,!0,e,-1).yoyo(!0,800)}function L(t,e,i,n,a,r){var o=t.game.add.tween(t).to({x:e,alpha:0},n,a,!0,i);return r&&o.onComplete.add(r(t),this),o}function G(t,e,i,n,a,r){var o=t.x,s=t.y,l=o-e,u=s-i;return t.game.add.tween(t).to({x:[l,.9*o,o],y:[u,.9*s,s]},a,r,!0,n)}Object.defineProperty(i,"__esModule",{value:!0}),i.moveToContainer=n,i.moveTo=a,i.fade=r,i.fadeIn=o,i.fadeOut=s,i.scaleTo=l,i.moveToDom=u,i.getScaleFromDom=h,i.bulge=c,i.spinIn=d,i.wobbleScaleIn=g,i.jiggle=f,i.jiggleAngle=p,i.scaleIn=m,i.scaleOut=v,i.fadeFloat=w,i.scaleThenFade=y,i.quickTap=b,i.tap=x,i.tapAndHold=P,i.swipe=C,i.circleAround=k,i.smallSwipeUpDown=I,i.slideInDown=O,i.slideInUp=S,i.slideInLeft=E,i.slideInRight=F,i.slideIn=T,i.pulse=_,i.pulseOnce=R,i.rubberBand=M,i.appearFromGround=D,i.appearFromSky=B,i.jiggleJump=j,i.disappearToSide=L,i.slightMoveYoyo=G},{}],23:[function(t,e,i){"use strict";function n(t,e){return e||(e=0),Math.floor(Math.random()*(t-e+1))+e}function a(t){return t[this.rndInt(t.length-1,0)]}function r(t){return t||(t=1),"rgba("+this.rndInt(256)+","+this.rndInt(256)+","+this.rndInt(256)+","+t+")"}function o(t){return t.global.windowHeight>t.global.windowWidth}function s(t){return JSON.parse(JSON.stringify(t))}function l(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}function u(t){return-1===t.lastIndexOf(".")?t:t.substring(0,t.lastIndexOf("."))}function h(t){t.style.opacity=0;var e=+new Date;!function i(){t.style.opacity=+t.style.opacity+(new Date-e)/400,e=+new Date,+t.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16))}()}function c(t){return 100*Math.sqrt(2*Math.abs(t)/w)}function d(t){var e={boolean:{},number:{},string:{}},i=[];return t.filter(function(t){var n=void 0===t?"undefined":v(t)
;return n in e?!e[n].hasOwnProperty(t)&&(e[n][t]=!0):!(i.indexOf(t)>=0)&&i.push(t)})}function g(t,e){var i,n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function f(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function p(t){switch(t){case"Linear":return Phaser.Easing.Linear.None;case"LinearOut":return Phaser.Easing.Linear.Out;case"LinearIn":return Phaser.Easing.Linear.In;case"BackIn":return Phaser.Easing.Back.In;case"BackOut":return Phaser.Easing.Back.Out;case"BounceIn":return Phaser.Easing.Bounce.In;case"BounceOut":return Phaser.Easing.Bounce.Out;case"CircularIn":return Phaser.Easing.Circular.In;case"CircularOut":return Phaser.Easing.Circular.Out;case"CubicIn":return Phaser.Easing.Cubic.In;case"CubicOut":return Phaser.Easing.Cubic.Out;case"ElasticIn":return Phaser.Easing.Elastic.In;case"ElasticOut":return Phaser.Easing.Elastic.Out;case"ExponentialIn":return Phaser.Easing.Exponential.In;case"ExponentialOut":return Phaser.Easing.Exponential.Out;case"QuadraticIn":return Phaser.Easing.Quadratic.In;case"QuadraticOut":return Phaser.Easing.Quadratic.Out;case"QuadraticInOut":return Phaser.Easing.Quadratic.InOut;case"QuarticIn":return Phaser.Easing.Quartic.In;case"QuarticOut":return Phaser.Easing.Quartic.Out;case"QuinticIn":return Phaser.Easing.Quintic.In;case"QuinticOut":return Phaser.Easing.Quintic.Out;case"SinusoidalIn":return Phaser.Easing.Sinusoidal.In;case"SinusoidalOut":return Phaser.Easing.Sinusoidal.Out}console.error('unkown easing value "'+t+'"')}function m(){var t=navigator.userAgent||navigator.vendor||window.opera,e=null;return/windows phone/i.test(t)&&(e="windowsPhone"),/android/i.test(t)&&(e="android"),/iPad|iPhone|iPod/.test(t)&&!window.MSStream&&(e="ios"),e}Object.defineProperty(i,"__esModule",{value:!0});var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.rndInt=n,i.sample=a,i.rndRgba=r,i.isPortrait=o,i.clone=s,i.remove=l,i.removeExtension=u,i.fadeIn=h,i.calcQuadTime=c,i.uniq=d,i.extend=g,i.numberWithCommas=f,i.getEasing=p,i.getDeviceOS=m;var w=19.8},{}]},{},[4]);
