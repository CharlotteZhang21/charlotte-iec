!function e(t,n,i){function o(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return o(n||e)},u,u.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({coin_burst_01:[{img:"logo.png"},{img:"cta.png"}],coin_cascade_05:[{img:"logo2.png"}]},"coin_cascade_05",[{img:"spin_button.png"},{img:"symbols.png"}])},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./pieces.js"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i);n.default={pieces:o.default}},{"./pieces.js":3}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={frames:{blue:{frame:{x:152,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},blue_p:{frame:{x:156,y:164,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},donut:{frame:{x:609,y:164,w:181,h:149},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:181,h:149},sourceSize:{w:181,h:149}},green:{frame:{x:460,y:327,w:149,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:161},sourceSize:{w:149,h:161}},macaron:{frame:{x:610,y:1,w:148,h:155},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:148,h:155},sourceSize:{w:148,h:155}},marshmallow:{frame:{x:305,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},orange:{frame:{x:156,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},orange_p:{frame:{x:308,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},popcorn:{frame:{x:461,y:164,w:146,h:161},rotated:!1,trimmed:!0,spriteSourceSize:{x:2,y:0,w:146,h:161},sourceSize:{w:151,h:161}},pudding:{frame:{x:611,y:315,w:159,h:153},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:159,h:153},sourceSize:{w:159,h:153}},purple:{frame:{x:1,y:165,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},purple_p:{frame:{x:1,y:328,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},red:{frame:{x:309,y:164,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},red_p:{frame:{x:458,y:1,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},yellow:{frame:{x:1,y:1,w:149,h:162},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:162},sourceSize:{w:149,h:162}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"tiles.png",format:"RGBA8888",size:{w:791,h:490},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:a52266418105fd394661db76f76d6094:5da80af01517e173c5b36dd3086b03ba:accbe1e7e294ded8391337fc1c446319$"}}},{}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=e("./states/boot"),a=i(o),r=e("./states/endcard"),s=i(r),l=e("./states/preloader"),c=i(l),u=new Phaser.Game(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio,Phaser.CANVAS,"game",null,!0);u.state.add("boot",new a.default),u.state.add("endcard",new s.default),u.state.add("preloader",new c.default),u.state.start("boot")},{"./states/boot":11,"./states/endcard":12,"./states/preloader":13}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.createSky(),n.createGround(),n}return a(t,e),r(t,[{key:"createSky",value:function(){this.sky=new Phaser.Sprite(this.game,0,0,"sky"),this.add(this.sky),l.fitInContainerHeight(this.sky,"sky",0,0)}},{key:"createGround",value:function(){this.ground=new Phaser.Sprite(this.game,0,0,"ground"),this.add(this.ground),l.fitInContainerHeight(this.ground,"ground",.5,.5)}},{key:"show",value:function(){this.game.add.tween(this).to({alpha:this.finalAlpha},500,Phaser.Easing.Sinusoidal.In,!0,200)}},{key:"hide",value:function(){if(this.alpha>0){this.game.add.tween(this).to({alpha:0},300,Phaser.Easing.Quadratic.In,!0,0)}}}]),t}(Phaser.Group);n.default=c},{"../utils/container-util":15}],6:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../utils/container-util"),c=i(l),u=e("../utils/animations-util"),d=i(u),h=function(e){function t(e,n){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.createBackground(),i.createForeground(),i.createLid(),i.createContents(),i.createShadow(),i.stars=[],i}return r(t,e),s(t,[{key:"createLid",value:function(){this.lid=new Phaser.Sprite(this.game,0,0,"lid"),this.add(this.lid),this.lid.anchor.set(.5,1),this.lid.y=0}},{key:"createForeground",value:function(){this.foreground=new Phaser.Sprite(this.game,0,0,"box"),this.add(this.foreground),this.foreground.anchor.set(.5,1),this.foreground.y=this.y+this.height/2}},{key:"createBackground",value:function(){this.background=new Phaser.Sprite(this.game,0,0,"boxBg"),this.add(this.background),this.background.anchor.set(.5,1),this.background.y=this.y+this.height/3}},{key:"createShadow",value:function(){this.shadow=new Phaser.Sprite(this.game,0,0,"shadow"),this.add(this.shadow),this.shadow.alpha=.4,this.shadow.anchor.set(.5,1),this.scale.x=.5,this.scale.y=this.scale.x,this.shadow.y=this.y+this.height/4,this.sendToBack(this.shadow)}},{key:"open",value:function(){var e={x:this.lid.x,y:this.lid.y},t=this.lid.scale.x;this.game.add.tween(this.lid.scale).to({x:[1.05*t,.95*t],y:[.95*t,.95*t]},500,Phaser.Easing.Quadratic.In,!0,100),this.game.add.tween(this.lid).to({x:[e.x,e.x-100],y:[e.y+10,e.y-700],angle:[0,-45]},700,Phaser.Easing.Quadratic.In,!0,100).onComplete.add(function(){this.revealContent(500)},this);var n=this.foreground.scale.x,i=this.foreground.y;this.game.add.tween(this.foreground.scale).to({x:[1.05*n,n],y:[.95*n,n]},500,Phaser.Easing.Quadratic.In,!0,100),this.game.add.tween(this.foreground).to({y:[i+10,i-50]},600,Phaser.Easing.Quadratic.In,!0,100),this.game.add.tween(this.background).to({y:[i+10,i-88]},600,Phaser.Easing.Quadratic.In,!0,100),this.game.add.tween(this.shadow).to({y:[this.foreground.y+20]},600,Phaser.Easing.Quadratic.In,!0,100)}},{key:"createContents",value:function(){var e="content-portrait";this.game.global.windowWidth>this.game.global.windowHeight&&(e="content-landscape"),this.contents=new Phaser.Sprite(this.game,0,0,e),this.contents.anchor.set(.5),this.game.add.existing(this.contents),c.fitInContainerHeight(this.contents,"contents",.5,.5),this.contents.angle=0,this.contentsScale=this.contents.scale.x,this.contentsY=this.contents.y,this.contents.scale.x=0,this.contents.scale.y=0,this.contents.y=c.getContainerY("gift")+c.getContainerHeight("gift")/2}},{key:"revealContent",value:function(e){this.game.add.tween(this.contents.scale).to({x:[.05*this.contentsScale,this.contentsScale],y:[.05*this.contentsScale,this.contentsScale]},1500,Phaser.Easing.Quadratic.InOut,!0,0),this.game.add.tween(this.contents).to({angle:[720],y:[this.contentsY-300,this.contentsY]},1500,Phaser.Easing.Quadratic.In,!0,0).onComplete.add(function(){this.game.add.tween(this.contents).to({y:[this.contentsY+10,this.contentsY]},1e3,Phaser.Easing.Linear.InOut,!0,0)},this)}},{key:"bringAllStarsToTop",value:function(){for(var e=0;e<this.stars.length;e++)this.stars[e].bringToTop()}},{key:"spawnStars",value:function(){for(var e=0;e<100;e++){var t=1,n=Math.random()>.7?"spark-particle":"star-particle";"spark-particle"==n&&(t=.6);var i=new Phaser.Sprite(this.game,0,0,n);this.add(i),this.stars.push(i),i.anchor.set(.5),this.game.global.windowWidth>this.game.global.windowHeight?(i.scale.x=this.foreground.width/i.width*(.2*Math.random())*t,i.scale.y=i.scale.x):(i.scale.x=this.foreground.width/i.width*(.3*Math.random())*t,i.scale.y=i.scale.x),i.x=this.foreground.x+10*Math.random(),i.y=this.foreground.y-this.foreground.height,i.angle=45*Math.random(),i.alpha=0;var o=i.scale.x,a=i.y,r=i.x,s=.8;this.game.global.windowWidth>this.game.global.windowHeight&&(s=.5);var l=r+this.foreground.width*s*(Math.random()>.5?1:-1),c=5;this.game.global.windowWidth>this.game.global.windowHeight&&(c=2.5);var u=a-Math.random()*this.foreground.height*c,h=o*Math.random(),f=5*e,g=1200*Math.random()+2e3;d.starFloatWithDelayCustom2(this.game,i,l,u,h,g,f,Phaser.Easing.Quadratic.Out),this.foreground.bringToTop()}}}]),t}(Phaser.Group);n.default=h},{"../utils/animations-util":14,"../utils/container-util":15}],7:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../utils/container-util"),l=i(s),c=e("../utils/animations-util"),u=(i(c),e("../utils/custom-png-sequences-renderer.js")),d=(i(u),function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.button=new Phaser.Sprite(n.game,0,0,"cta"),l.fitInContainer(n.button,"cta-container",.5,.5),n.button.inputEnabled=!0,n.button.input.useHandCursor=!0,n.button.events.onInputDown.add(function(){parent.postMessage("download","*")}),n.add(n.button);var i=n.button.y;return n.button.y=n.game.global.windowHeight*window.devicePixelRatio+1.5*n.button.height,n.game.add.tween(n.button).to({y:i},1e3,Phaser.Easing.Quadratic.InOut,!0,500).onComplete.add(function(){var e=this.button.scale.x;this.game.add.tween(this.button.scale).to({x:1.11*e,y:1.07*e},700,Phaser.Easing.Quadratic.InOut,!0,0).loop().yoyo(!0)},n),n.game.time.events.add(500,function(){document.getElementById("cta-elements-container").className=""}),n}return r(t,e),t}(Phaser.Group));n.default=d},{"../utils/animations-util":14,"../utils/container-util":15,"../utils/custom-png-sequences-renderer.js":16}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.graphics=e.add.graphics(0,0),null!=PiecSettings.finalOverlay&&null!=PiecSettings.finalOverlay.color?n.graphics.beginFill(PiecSettings.finalOverlay.color,1):n.graphics.beginFill(0,1),n.graphics.drawRect(0,0,n.game.global.windowWidth*window.devicePixelRatio,n.game.global.windowHeight*window.devicePixelRatio),n.add(n.graphics),null!=PiecSettings.finalOverlay&&null!=PiecSettings.finalOverlay.alpha?n.finalAlpha=PiecSettings.finalOverlay.alpha:n.finalAlpha=.4,n.alpha=n.finalAlpha,n.alpha=0,n}return a(t,e),r(t,[{key:"show",value:function(){this.game.add.tween(this).to({alpha:this.finalAlpha},500,Phaser.Easing.Sinusoidal.In,!0,200)}},{key:"hide",value:function(){if(this.alpha>0){this.game.add.tween(this).to({alpha:0},300,Phaser.Easing.Quadratic.In,!0,0)}}}]),t}(Phaser.Group);n.default=s},{}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=function(e){function t(e,n){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.logo=new Phaser.Sprite(a.game,0,0,"logo"),a.logo.anchor.set(.5,.5),a.add(a.logo),l.fitInContainerAnchorAtCenter(a.logo,"logo"),a}return a(t,e),r(t,[{key:"animate",value:function(){if(this.alpha=1,this.game.global.windowHeight>this.game.global.windowWidth){this.logo.scale.x=.01,this.logo.scale.y=.01;this.game.add.tween(this.logo.scale).to({x:this.initialLogoScale,y:this.initialLogoScale},700,Phaser.Easing.Back.Out,!0,400)}this.logo.angle=0}}]),t}(Phaser.Group);n.default=c},{"../utils/container-util":15}],10:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../utils/util"),c=(i(l),e("../utils/container-util")),u=i(c),d=e("../utils/animations-util"),h=(i(d),e("../utils/custom-png-sequences-renderer.js")),f=i(h),g=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.fireworks=n.createFirework("firework",["firework-left","firework-right"]);for(var i=0;i<n.fireworks.length;i++){var r=n.fireworks[i],s=600*Math.random();n.animateFireworks(r,800,s,1)}return n.fxLayer=n.game.add.group(),n.showMessage(),n}return r(t,e),s(t,[{key:"showMessage",value:function(){var e="message";this.game.global.windowWidth>this.game.global.windowHeight?e+="-landscape":e+="-portrait",this.message=new Phaser.Sprite(this.game,0,0,e),this.message.anchor.set(.5),this.add(this.message),u.fitInContainerAnchorAtCenter(this.message,"message");var t=this.message.scale.x,n=this.message.y,i=this.message.height;this.message.scale.x=.01,this.message.scale.y=.01,this.game.add.tween(this.message.scale).to({x:t,y:t},300,Phaser.Easing.Quadratic.In,!0,0).onComplete.add(function(){this.game.add.tween(this.message.scale).to({x:[1.3*t,.7*t,t],y:[.7*t,1.3*t,t]},600,Phaser.Easing.Quadratic.InOut,!0,0).onComplete.add(function(){this.game.add.tween(this.message.scale).to({x:.01,y:.01},500,Phaser.Easing.Back.In,!0,500),this.game.add.tween(this.message).to({y:n-1.5*i},500,Phaser.Easing.Back.In,!0,500)},this)},this)}},{key:"createFirework",value:function(e,t){for(var n=[],i=0;i<t.length;i++){var o=t[i],a=new Phaser.Sprite(this.game,0,0,e);a.anchor.set(.5),u.fitInContainerAnchorAtCenter(a,o),-1!=o.indexOf("right")&&(a.scale.x*=-1),n.push(a),this.add(a)}return n}},{key:"animateFireworks",value:function(e,t,n,i){var o=e.x,a=e.width,r=e.y,s=e.height,l=e.scale.x,c=e.scale.y;e.alpha=.8;var u=e.alpha;e.scale.x=.001,e.scale.y=.001,this.game.add.tween(e.scale).to({x:l,y:c},300,Phaser.Easing.Back.Out,!0,n).onComplete.add(function(){this.game.add.tween(e).to({x:[o-.25*a*i,o],y:[r+.3*s,r-.25*s,r-1.25*s,-s],angle:[0,-10*i+5*Math.random(),-5*i+5*Math.random(),10*i]},t,Phaser.Easing.Quadratic.InOut,!0,0).interpolation(function(e,t){return Phaser.Math.bezierInterpolation(e,t)}),this.game.add.tween(e.scale).to({x:[l,1.02*l,.9*l,.5*l],y:[c,1.02*c,.9*c,.5*c],alpha:[u,u,u,0]},t,Phaser.Easing.Quadratic.InOut,!0,0).onComplete.add(function(){if(this.game.global.windowWidth>this.game.global.windowHeight)var t=this.game.global.windowWidth/1.2;else var t=this.game.global.windowHeight/1.1;this.fireworkExplosion(0,this.message.y,t),e.destroy()},this)},this)}},{key:"fireworkExplosion",value:function(e,t,n){for(var i=0;i<5;i++)this.game.time.events.add(300*i,function(){f.playPngSequence(this.game,PiecSettings.pngAnimations[0],this.fxLayer,e+i*Math.random()*this.game.global.windowWidth/5,t+this.game.global.windowHeight*(Math.random()-.5),n,n)},this)}}]),t}(Phaser.Group);n.default=g},{"../utils/animations-util":14,"../utils/container-util":15,"../utils/custom-png-sequences-renderer.js":16,"../utils/util":17}],11:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),r(t,[{key:"preload",value:function(){}},{key:"init",value:function(){PiecSettings.assetsDir="dev"===PiecSettings.env?"assets/":"";var e=this.game;e.onGameComplete=new Phaser.Signal,e.onCompleteLevel=new Phaser.Signal,e.onGridComplete=new Phaser.Signal,"undefined"!=typeof piec&&(piec.lockGame=function(){e.global.locked=!0},piec.unlockGame=function(){e.global.locked=!1},piec.completeLevel=function(){e.onCompleteLevel.dispatch()},piec.destroyGame=function(){e.destroy()}),window.onresize=function(){e.scale.setGameSize(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio),e.scale.refresh(),e.state.start("boot",!0,!1)}}},{key:"create",value:function(){this.init(),this.game.input.maxPointers=1,this.initGlobalVariables(),this.game.state.start("preloader"),this.game.onMoveStart=function(e){e.global.interactions++,PiecSettings&&PiecSettings.onMoveStart&&PiecSettings.onMoveStart(e.global.interactions)},this.game.onMoveComplete=function(e){PiecSettings&&PiecSettings.onMoveComplete&&PiecSettings.onMoveComplete(e.global.moveStats)}}},{key:"initGlobalVariables",value:function(){this.game.global={interaction:0,reelsSpinCompleted:0,isComplete:!1}}}]),t}(Phaser.State);n.default=s},{}],12:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=e("../prefabs/logo"),u=(o(c),e("../prefabs/dark-overlay")),d=(o(u),e("../prefabs/cta-button")),h=o(d),f=e("../prefabs/background"),g=o(f),p=e("../prefabs/welcome-message"),m=(o(p),e("../prefabs/box")),w=o(m),y=e("../utils/container-util"),b=i(y),v=e("../utils/custom-png-sequences-renderer.js"),x=(i(v),function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),l(t,[{key:"create",value:function(){this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setUserScale(1/window.devicePixelRatio,1/window.devicePixelRatio,0,0),this.game.global.windowWidth=document.body.clientWidth,this.game.global.windowHeight=document.body.clientHeight,this.game.stage.disableVisibilityChange=!0,this.background=new g.default(this.game),this.game.add.existing(this.background),this.santa=new Phaser.Sprite(this.game,0,0,"santa"),this.game.add.existing(this.santa),b.fitInContainerHeight(this.santa,"santa",.5,.5),this.christmasTree=new Phaser.Sprite(this.game,0,0,"christmasTree"),this.game.add.existing(this.christmasTree),b.fitInContainerHeight(this.christmasTree,"christmasTree",.5,.5),this.blueTree=new Phaser.Sprite(this.game,0,0,"blueTree"),this.game.add.existing(this.blueTree),b.fitInContainerHeight(this.blueTree,"blueTree",.5,.5),this.blueTreeRight=new Phaser.Sprite(this.game,0,0,"blueTree"),this.game.add.existing(this.blueTreeRight),b.fitInContainerHeight(this.blueTreeRight,"blueTreeRight",.5,.5),this.blueTreeRight.scale.x*=-1,this.fence=new Phaser.Sprite(this.game,0,0,"fence"),this.game.add.existing(this.fence),b.fitInContainer(this.fence,"blueTree",0,1),this.fence.x=0,this.giftBox=new w.default(this.game,this.contents),this.game.add.existing(this.giftBox),b.fitInContainer(this.giftBox,"gift",.5,1);var e=this.giftBox.x,t=this.giftBox.y;this.giftBox.y=-this.giftBox.height;var n=this.santa.y;this.game.add.tween(this.santa).to({x:this.game.global.windowWidth*window.devicePixelRatio+this.santa.width,y:[.8*n],angle:[0,30]},1800,Phaser.Easing.Quadratic.Out,!0,300);this.game.time.events.add(1e3,function(){this.animateGiftBox(e,t)},this),this.game.world.bringToTop(this.blueTree),this.game.world.bringToTop(this.blueTreeRight),this.game.world.bringToTop(this.fence),this.cta=new h.default(this.game),this.game.add.existing(this.cta),document.getElementById("fullScreenClick").addEventListener("click",function(){parent.postMessage("download","*")})}},{key:"resize",value:function(){}},{key:"render",value:function(){}},{key:"animateGiftBox",value:function(e,t){var n=this.giftBox.scale.x;this.giftBox.scale.x=.95*n,this.giftBox.scale.y=1.05*n,this.game.add.tween(this.giftBox.scale).to({x:[.8*n,1.2*n,n],y:[1.2*n,.7*n,n]},800,Phaser.Easing.Quadratic.In,!0,0).onComplete.add(function(){this.giftBox.open(),this.game.time.events.add(800,function(){this.giftBox.spawnStars(),this.game.global.windowWidth>=768&&(this.game.add.tween(this.blueTree).to({y:this.blueTree.y+100},500,Phaser.Easing.Linear.None,!0,1500),this.game.add.tween(this.blueTreeRight).to({y:this.blueTree.y+100},500,Phaser.Easing.Linear.None,!0,1500))},this)},this),this.game.add.tween(this.giftBox).to({x:e,y:t},500,Phaser.Easing.Quadratic.In,!0,0)}}]),t}(Phaser.State));n.default=x},{"../prefabs/background":5,"../prefabs/box":6,"../prefabs/cta-button":7,"../prefabs/dark-overlay":8,"../prefabs/logo":9,"../prefabs/welcome-message":10,"../utils/container-util":15,"../utils/custom-png-sequences-renderer.js":16}],13:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../atlas/index"),c=(i(l),e("../utils/util")),u=(i(c),e("../animations.js")),d=(i(u),e("../utils/custom-png-sequences-renderer.js")),h=i(d),f=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e}return r(t,e),s(t,[{key:"preload",value:function(){this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources(),h.preloadPngSequences(this.game)}},{key:"update",value:function(){}},{key:"loadResources",value:function(){this.game.load.image("content-landscape",PiecSettings.assetsDir+"landscape.jpg"),this.game.load.image("content-portrait",PiecSettings.assetsDir+"portrait.jpg"),this.game.load.image("cta",PiecSettings.assetsDir+"cta.png"),this.game.load.image("star-particle",PiecSettings.assetsDir+"star_particle.png"),this.game.load.image("spark-particle",PiecSettings.assetsDir+"spark_particle.png");for(var e=0;e<PiecSettings.assets.length;e++){var t=PiecSettings.assets[e],n=t.split(".");this.game.load.image(n[0],PiecSettings.assetsDir+t)}this.game.global.animations={},PiecSettings.animation=PiecSettings.animation||{}}},{key:"onLoadComplete",value:function(){this.game.state.start("endcard")}}]),t}(Phaser.State);n.default=f},{"../animations.js":1,"../atlas/index":2,"../utils/custom-png-sequences-renderer.js":16,"../utils/util":17}],14:[function(e,t,n){"use strict";function i(e,t){e.loopReverse&&(e.animations.currentAnim.isReversed=!0),0!=t.loopCount&&t.loopCount===e.numberOfLoops&&(e.persistent||(t.loop=!1,e.alpha=0))}function o(e,t,n,i,o){t.loopReverse=o,t.speed=i,t.loopReverse?e.time.events.add(n,function(){t.alpha=1,t.animations.play("animation",i,!1),t.animations.currentAnim.onComplete.add(a,this)}):e.time.events.add(n,function(){t.alpha=1,t.animations.play("animation",i,!0)})}function a(e,t){e.animations.currentAnim.isReversed=!e.animations.currentAnim.isReversed,e.animations.play("animation",e.speed,!1)}function r(e,t,n,a,r,s,l,c,u,d,h,f){for(var g=d.offsetWidth*window.devicePixelRatio,p=d.offsetHeight*window.devicePixelRatio,m=d.offsetLeft*window.devicePixelRatio,w=d.offsetTop*window.devicePixelRatio,y=g/100,b=p/100,v=[],x=0;x<t.length;x++){var P=h.add.sprite(m+t[x]*y,w+n[x]*b,e);f.add(P),P.anchor.set(s),P.animations.add("animation"),P.alpha=0,P.persistent=u,o(h,P,a[x],l,!1),P.scale.x=g*c[x]/100/P.width,P.scale.y=P.scale.x,v.push(P),null!=r&&(P.numberOfLoops=r[x],P.animations.currentAnim.onLoop.add(i,this))}return v}function s(e,t,n,i,o,a,r,s){e.time.events.add(r,function(){t.alpha=1,e.add.tween(t).to({y:i,x:n},a,s,!0,0),e.add.tween(t.scale).to({x:o,y:o},a,s,!0,0)},this),e.time.events.add(r+1700,function(){e.add.tween(t).to({alpha:0},1e3,Phaser.Easing.Quadratic.InOut,!0,0),e.time.events.add(1e3,function(){t.destroy()},this)},this)}function l(e,t,n,i,o,a,r,s){e.time.events.add(r,function(){t.alpha=90*Math.random()+5,e.add.tween(t).to({alpha:0,y:i,x:n},a,s,!0,0),e.add.tween(t.scale).to({x:o,y:o},a,s,!0,0)},this)}function c(e,t,n,i,o,a,r){this.starFloatWithDelayCustom(e,t,n,i,o,a,r,Phaser.Easing.Quadratic.InOut)}function u(e,t,n,i,o,a,r,s){e.time.events.add(r,function(){e.add.tween(t).to({alpha:0,y:[i,i+100],x:n},a,s,!0,0),e.add.tween(t.scale).to({x:0,y:0},a,s,!0,0)},this)}Object.defineProperty(n,"__esModule",{value:!0}),n.onLoop=i,n.playAnimation=o,n.onComplete=a,n.playAnimations=r,n.starFloatWithDelayCustom2=s,n.starFloatWithDelayCustom=l,n.starFloatWithDelay=c,n.fireworkExplosion=u},{}],15:[function(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0
;o(t);var a=document.getElementById(t),r=a.offsetWidth*window.devicePixelRatio,s=a.offsetHeight*window.devicePixelRatio,l=a.getBoundingClientRect().left*window.devicePixelRatio,c=a.getBoundingClientRect().top*window.devicePixelRatio;void 0!==e.anchor&&(e.anchor.x=n,e.anchor.y=i),e.x=l+r*n,e.y=c+s*i;var u=e.scale.x;e.scale.x=r/(e.width/e.scale.x),e.scale.y=e.scale.x,e.height>s&&(e.scale.x=u,e.scale.y=u,e.scale.y=s/(e.height/e.scale.y),e.scale.x=e.scale.y)}function o(e){null==document.getElementById(e)&&console.log("ERROR: Container Name "+e+" doesn't exist in the DOM")}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(t);var a=document.getElementById(t),r=a.offsetWidth*window.devicePixelRatio,s=a.offsetHeight*window.devicePixelRatio,l=a.getBoundingClientRect().left*window.devicePixelRatio,c=a.getBoundingClientRect().top*window.devicePixelRatio;void 0!==e.anchor&&(e.anchor.x=n,e.anchor.y=i),e.x=l+r*n,e.y=c+s*i,e.scale.x=r/(e.width/e.scale.x),e.scale.y=e.scale.x}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(t);var a=document.getElementById(t),r=a.offsetWidth*window.devicePixelRatio,s=a.offsetHeight*window.devicePixelRatio,l=a.getBoundingClientRect().left*window.devicePixelRatio,c=a.getBoundingClientRect().top*window.devicePixelRatio;void 0!=e.anchor&&e.anchor.set(n,i),e.x=l+r*n,e.y=c+s*i,e.scale.y=s/e.height,e.scale.x=e.scale.y}function s(e,t){a(e,t),e.x+=e.width/2,e.y+=e.height/2}function l(e){return o(e),document.getElementById(e).getBoundingClientRect().top*window.devicePixelRatio}function c(e){return o(e),document.getElementById(e).getBoundingClientRect().left*window.devicePixelRatio}function u(e){return o(e),document.getElementById(e).offsetWidth*window.devicePixelRatio}function d(e){return o(e),document.getElementById(e).offsetHeight*window.devicePixelRatio}function h(e,t){o(t);var n=document.getElementById(t),i=n.offsetWidth*window.devicePixelRatio;n.offsetHeight,window.devicePixelRatio;e.scale.x=i/e.width,e.scale.y=e.scale.x}function f(e){o(e);var t=document.getElementById(e),n=t.offsetWidth*window.devicePixelRatio,i=(t.offsetHeight,window.devicePixelRatio,t.getBoundingClientRect().left*window.devicePixelRatio);t.getBoundingClientRect().top,window.devicePixelRatio;return i+Math.random()*n}function g(e){o(e);var t=document.getElementById(e),n=(t.offsetWidth,window.devicePixelRatio,t.offsetHeight*window.devicePixelRatio);t.getBoundingClientRect().left,window.devicePixelRatio;return t.getBoundingClientRect().top*window.devicePixelRatio+Math.random()*n}function p(e){o(e);var t=document.getElementById(e),n=t.offsetWidth*window.devicePixelRatio;return t.getBoundingClientRect().left*window.devicePixelRatio+n/2}function m(e){o(e);var t=document.getElementById(e),n=t.offsetHeight*window.devicePixelRatio;return t.getBoundingClientRect().top*window.devicePixelRatio+n/2}Object.defineProperty(n,"__esModule",{value:!0}),n.bestFit=i,n.fitInContainer=a,n.fitInContainerHeight=r,n.fitInContainerAnchorAtCenter=s,n.getContainerY=l,n.getContainerX=c,n.getContainerWidth=u,n.getContainerHeight=d,n.resizeToSizeOfContainer=h,n.getRandomXWithinContainer=f,n.getRandomYWithinContainer=g,n.getXCenterWithinContainer=p,n.getYCenterWithinContainer=m},{}],16:[function(e,t,n){"use strict";function i(e){if(null!=PiecSettings.pngAnimations)for(var t=0;t<PiecSettings.pngAnimations.length;t++){var n=PiecSettings.pngAnimations[t];o(e,n)}}function o(e,t){var n=t.src.substr(0,t.src.indexOf("."));e.load.spritesheet(n,PiecSettings.assetsDir+t.src,t.spriteWidth,t.spriteHeight,t.spriteNumber)}function a(e,t,n,i,o,a,r){var l=t.src.substr(0,t.src.indexOf("."));if(null!=t.htmlContainer)var c=document.getElementById(t.htmlContainer),a=c.offsetWidth*window.devicePixelRatio,i=(c.offsetHeight,window.devicePixelRatio,c.getBoundingClientRect().left*window.devicePixelRatio),o=c.getBoundingClientRect().top*window.devicePixelRatio;var u=e.add.sprite(i,o,l);if(n.add(u),u.animations.add("animation"),u.anchor.set(0,0),u.alpha=0,null==t.loopReverse&&(t.loopReverse=!1),null!=t.isReversed&&t.isReversed&&(u.animations.currentAnim.isReversed=!0),s.playAnimation(e,u,t.delay,t.fps,t.loopReverse),null!=t.angle&&0!=t.angle){var d=0;this.game.global.windowWidth>this.game.global.windowHeight&&null!=t.responsiveAngle&&t.responsiveAngle&&(d=90),u.anchor.set(.5),u.angle=t.angle+d}if(u.scale.x=a/u.width,u.scale.y=u.scale.x,u.persistent=!1,null!=t.loops&&(u.numberOfLoops=t.loops,u.animations.currentAnim.onLoop.add(s.onLoop,this)),null!=t.effect&&-1!=t.effect.indexOf("fade-in")){u.alpha=0;e.add.tween(u).to({alpha:1},1e3,Phaser.Easing.Linear.None,!0,t.delay)}return u}Object.defineProperty(n,"__esModule",{value:!0}),n.preloadPngSequences=i,n.playPngSequence=a;var r=e("../utils/animations-util.js"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r)},{"../utils/animations-util.js":14}],17:[function(e,t,n){"use strict";function i(e,t){return t||(t=0),Math.floor(Math.random()*(e-t+1))+t}function o(e){return e[this.rndInt(e.length-1,0)]}function a(e){return e||(e=1),"rgba("+this.rndInt(256)+","+this.rndInt(256)+","+this.rndInt(256)+","+e+")"}function r(){return this.game.global.windowHeight>this.game.global.windowWidth}function s(e){return JSON.parse(JSON.stringify(e))}function l(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function c(e){return-1===e.lastIndexOf(".")?e:e.substring(0,e.lastIndexOf("."))}function u(e){e.style.opacity=0;var t=+new Date;!function n(){e.style.opacity=+e.style.opacity+(new Date-t)/400,t=+new Date,+e.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))}()}function d(e){return 100*Math.sqrt(2*Math.abs(e)/m)}function h(e){var t={boolean:{},number:{},string:{}},n=[];return e.filter(function(e){var i=void 0===e?"undefined":p(e);return i in t?!t[i].hasOwnProperty(e)&&(t[i][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)})}function f(e,t){var n,i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}function g(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}Object.defineProperty(n,"__esModule",{value:!0});var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.rndInt=i,n.sample=o,n.rndRgba=a,n.isPortrait=r,n.clone=s,n.remove=l,n.removeExtension=c,n.fadeIn=u,n.calcQuadTime=d,n.uniq=h,n.extend=f,n.numberWithCommas=g;var m=19.8},{}]},{},[4]);
