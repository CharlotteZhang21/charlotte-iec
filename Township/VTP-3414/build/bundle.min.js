!function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){var i=t[r][1][e];return o(i||e)},u,u.exports,e,t,i,n)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({coin_burst_01:[{img:"logo.png"},{img:"cta.png"}],coin_cascade_05:[{img:"logo2.png"}]},"coin_cascade_05",[{img:"spin_button.png"},{img:"symbols.png"}])},{}],2:[function(e,t,i){"use strict";function n(e){e.load.spritesheet("congrats",PiecSettings.assetsDir+"congrats.png",302,302,27)}function o(e,t){var i=document.getElementById("character"),n=[20],o=[30],a=[0],s=[0],l=[100];return r.playAnimations("congrats",n,o,a,s,.5,10,l,!1,i,e,t)}Object.defineProperty(i,"__esModule",{value:!0}),i.preload=n,i.play=o;var a=e("../utils/slot-animations-util.js"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(a)},{"../utils/slot-animations-util.js":17}],3:[function(e,t,i){"use strict";function n(e){e.load.spritesheet("sad",PiecSettings.assetsDir+"sad.png",302,302,47)}function o(e,t){var i=document.getElementById("character"),n=[20],o=[30],a=[0],s=[0],l=[100];return r.playAnimations("sad",n,o,a,s,.5,10,l,!1,i,e,t)}Object.defineProperty(i,"__esModule",{value:!0}),i.preload=n,i.play=o;var a=e("../utils/slot-animations-util.js"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(a)},{"../utils/slot-animations-util.js":17}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={}},{}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=e("./states/boot"),a=n(o),r=e("./states/endcard"),s=n(r),l=e("./states/preloader"),c=n(l),u=new Phaser.Game(window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio,Phaser.CANVAS,"game",null,!0);u.state.add("boot",new a.default),u.state.add("endcard",new s.default),u.state.add("preloader",new c.default),u.state.start("boot")},{"./states/boot":12,"./states/endcard":13,"./states/preloader":14}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../utils/util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),c=function(e){function t(e,i,a){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.container=document.getElementById("chair"),r.chair=r.game.add.sprite(0,0,i),r.add(r.chair),r.chair.alpha=0,r.stars=[],l.fitInContainer(r.chair,a,.5,.5),r.initialScale=r.chair.scale.x,r.initialYPos=r.chair.y,r.initialWidth=r.chair.width,r.initialHeight=r.chair.height,l.display(e,r.chair,100),r}return a(t,e),r(t,[{key:"hide",value:function(e,t){var i=this.chair.scale.x;this.game.add.tween(this.chair.scale).to({x:[1.2*i,0],y:[1.2*i,0]},t,Phaser.Easing.Quadratic.In,!0,e).onComplete.add(function(){this.chair.alpha=0},this)}},{key:"popUp",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.chair.scale.x=0,this.chair.scale.y=0;var o=this.game.add.tween(this.chair.scale).to({x:[1.2*this.initialScale,this.initialScale],y:[1.2*this.initialScale,this.initialScale]},t,Phaser.Easing.Quadratic.In,!0,e);i?o.onComplete.add(function(){this.shaking(n)},this):this.game.time.events.add(200,function(){this.spawnStars()},this)}},{key:"shaking",value:function(e){var t=this.initialScale;this.chair.scale.x=t,this.chair.scale.y=t,this.chair.idleScaleTween=this.game.add.tween(this.chair.scale).to({x:[.95*t,1.05*t,t],y:[1.05*t,.95*t,t]},450+10*e,Phaser.Easing.Quadratic.InOut,!0,0,-1),this.chair.idleScaleTween.repeatDelay(800+10*e)}},{key:"getPosition",value:function(){var e={};return e.x=this.chair.x,e.y=this.chair.y,e}},{key:"getWidth",value:function(){return this.chair.width}},{key:"getHeight",value:function(){return this.chair.height}},{key:"setOption",value:function(e){this.chair.optionNum=e,this.chair.inputEnabled=!0,this.chair.input.useHandCursor=!0,this.chair.events.onInputDown.add(function(t){console.log("input"+e),this.chair.inputEnabled=!1,this.game.global.selection=e,this.game.onChange.dispatch()},this)}},{key:"disableOption",value:function(){this.chair.inputEnabled=!1}},{key:"getOption",value:function(){return this.chair.optionNum}},{key:"spawnStars",value:function(){console.log("stars");for(var e=0;e<80;e++){var t=.5,i=Math.random()>.7?"spark-particle":"star-particle";"spark-particle"==i&&(t=.3);var n=new Phaser.Sprite(this.game,0,0,i);this.add(n),this.stars.push(n),n.anchor.set(.5),this.game.global.windowWidth>this.game.global.windowHeight?(n.scale.x=this.initialWidth/n.width*(.18*Math.random())*t,n.scale.y=n.scale.x):(n.scale.x=this.initialWidth/n.width*(.3*Math.random())*t,n.scale.y=n.scale.x),n.x=this.chair.x+this.initialWidth/2.5*Math.random(),n.y=this.chair.y+.45*this.initialHeight/2,n.angle=45*Math.random(),n.alpha=0;var o=n.scale.x,a=n.y,r=n.x,s=.3;this.game.global.windowWidth>this.game.global.windowHeight&&(s=.2);var c=r+this.initialWidth*s*(Math.random()>.5?1:-1),u=5;this.game.global.windowWidth>this.game.global.windowHeight&&(u=2.5);var h=a-Math.random()*this.initialHeight*u,d=o*Math.random(),f=5*e,p=1e3*Math.random()+2e3;l.starFloatWithDelayCustom2(this.game,n,c,h,d,p,f,Phaser.Easing.Quadratic.Out)}}}]),t}(Phaser.Group);i.default=c},{"../utils/util":18}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../utils/fx-renderer.js"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),c=function(e){function t(e,i){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.fxEffectsLayer=i,a.sadCharacter(),a}return a(t,e),r(t,[{key:"sadCharacter",value:function(){this.sadAni=l.playFx(this.game,this.fxEffectsLayer,"sad")}},{key:"changeToHappy",value:function(){console.log("happy yo"),this.sadAni[0].visible=!1;l.playFx(this.game,this.fxEffectsLayer,"congrats")}},{key:"createDialog",value:function(){this.dialogBg=this.game.add.sprite(0,0,"dialogBg"),this.add(this.dialogBg),this.fitInContainer(this.dialogBg,"dialog"),this.createText("Is that my chair?!")}},{key:"fitInContainer",value:function(e,t){var i=document.getElementById(t),n=i.offsetWidth*window.devicePixelRatio,o=(i.offsetHeight,window.devicePixelRatio,i.getBoundingClientRect().left*window.devicePixelRatio),a=i.getBoundingClientRect().top*window.devicePixelRatio;e.scale.x=n/e.width,e.scale.y=e.scale.x,e.x=o,e.y=a}},{key:"createText",value:function(e){var t=document.getElementById("dialog-text"),i=t.offsetWidth*window.devicePixelRatio,n=t.offsetHeight*window.devicePixelRatio;t.getBoundingClientRect().left,window.devicePixelRatio,t.getBoundingClientRect().top,window.devicePixelRatio;this.fontSize=.7*n;var o={font:"bold "+this.fontSize+"px "+PiecSettings.fontFamily};this.textField=new Phaser.Text(this.game,i/2,n/2,e,o),this.add(this.textField),this.textField.anchor.set(.5,.5),this.textField.align="center",this.textField.padding.set(this.fontSize/2,0),null!=PiecSettings.fontColor?(this.textField.stroke="black",this.textField.strokeThickness=2,this.textField.fill=PiecSettings.fontColor,this.textField.setShadow(2,3,"rgb(0,0,0)",0)):(this.textField.stroke="#ff9d1b",this.textField.strokeThickness=5)}},{key:"hide",value:function(){this.spinButton.button.inputEnabled=!1}},{key:"fade",value:function(){this.game.add.tween(this).to({alpha:0},800,Phaser.Easing.Quadratic.In,!0,0)}},{key:"show",value:function(){if(this.spinButton.button.inputEnabled=!0,this.dissapearing&&PiecSettings.spins.length!=this.game.global.spin){this.game.add.tween(this).to({y:0},300,Phaser.Easing.Quadratic.In,!0,0)}}}]),t}(Phaser.Group);i.default=c},{"../utils/fx-renderer.js":16}],8:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.button=new Phaser.Sprite(e,0,0,"cta",0),i.add(i.button),i.button.anchor.set(.5),i.fitInContainer(),i.initialCtaWidth=i.button.width,i.button.inputEnabled=!0,i.button.input.useHandCursor=!0,i.button.events.onInputDown.add(function(){doSomething("download")}),i}return a(t,e),r(t,[{key:"fitInContainer",value:function(){this.container=document.getElementById("cta-container"),this.containerWidth=this.container.offsetWidth*window.devicePixelRatio,this.containerHeight=this.container.offsetHeight*window.devicePixelRatio;var e=this.container.getBoundingClientRect().left*window.devicePixelRatio,t=this.container.getBoundingClientRect().top*window.devicePixelRatio;this.x=e+this.containerWidth/2,this.y=t+this.containerHeight/2,this.scale.x=this.containerWidth/this.button.width,this.scale.y=this.scale.x}},{key:"animate",value:function(){var e=document.getElementById("cta-container-final"),t=e.offsetWidth*window.devicePixelRatio,i=e.offsetHeight*window.devicePixelRatio,n=e.getBoundingClientRect().left*window.devicePixelRatio+t/2,o=e.getBoundingClientRect().top*window.devicePixelRatio+i/2,a=t/this.initialCtaWidth;this.game.add.tween(this).to({x:n,y:o},1400,Phaser.Easing.Back.InOut,!0,0),this.game.add.tween(this.scale).to({x:a,y:a},1e3,Phaser.Easing.InOut,!0,0,-1,!0)}}]),t}(Phaser.Group);i.default=s},{}],9:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=e("../utils/fx-renderer.js"),u=(o(c),e("../utils/util")),h=o(u),d=e("../prefabs/chair"),f=n(d),p=e("../prefabs/tooltip"),g=n(p),y=function(e){function t(e,i){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.container="dialog",n.createDialogBg(),n}return s(t,e),l(t,[{key:"createDialogBg",value:function(){this.dialogBg=this.game.add.sprite(0,0,"dialogBg"),this.add(this.dialogBg),h.display(this.game,this.dialogBg,100),h.fitInContainer(this.dialogBg,this.container),this.createText("Is that my chair?!"),h.display(this.game,this.textField,100),this.game.time.events.add(2e3,function(){this.changeTextTo("Please help me\n choose a new one!",2e3)},this)}},{key:"createText",value:function(e){var t=h.getContainerWidth(this.container),i=h.getContainerHeight(this.container),n=h.getContainerX(this.container),o=h.getContainerY(this.container);this.fontSize=.3*i;var a={font:"bold "+this.fontSize+"px "+PiecSettings.fontFamily};this.textField=new Phaser.Text(this.game,0,0,e,a),this.add(this.textField),this.textField.anchor.set(.5,.5),this.textField.align="center",this.textField.padding.set(this.fontSize/2,0),this.textField.x=n+t/2,this.textField.y=o+i/2,null!=PiecSettings.fontColor?this.textField.fill=PiecSettings.fontColor:this.textField.stroke="#ff9d1b"}},{key:"changeTextTo",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.textField.text=""+e;var n=this.game.add.tween(this.textField.scale).to({x:[0,1.2,1],y:[0,1.2,1]},1*t/5,Phaser.Easing.Linear.None,!0,0);i&&n.onComplete.add(function(){this.game.add.tween(this.textField.scale).to({x:[1.2,0],y:[1.2,0]},1*t/5,Phaser.Easing.Linear.None,!0,1e3).onComplete.add(function(){this.createOptions()},this)},this)}},{key:"createOptions",value:function(){this.options=[];for(var e=0,t=0;t<PiecSettings.options.length;t++){var i="option"+(t+1),n=new f.default(this.game,PiecSettings.options[t],i);n.setOption(t),this.add(n),this.options.push(n),n.popUp(200*t,500,!0,t),e+=200*t}}},{key:"hideOptions",value:function(e){for(var t=0,i=0;i<this.options.length;i++)this.options[i].hide(e+300*i,500),t+=300*i;this.game.time.events.add(e+t,function(){this.changeTextTo("Thank you!",2e3,!1)},this)}},{key:"createTooltip",value:function(){this.tooltip=new g.default(this.game),this.add(this.tooltip),this.tooltip.x=this.options[1].x,this.tooltip.y=this.options[1].y,this.tooltip.moveHandToItem(this.options[1])}}]),t}(Phaser.Group);i.default=y},{"../prefabs/chair":6,"../prefabs/tooltip":11,"../utils/fx-renderer.js":16,"../utils/util":18}],10:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.logo=i.game.add.sprite(0,0,"logo"),i.add(i.logo),i.logo.anchor.set(.5),i.logo.alpha=0,i.fitInContainer(),i}return a(t,e),r(t,[{key:"fitInContainer",value:function(){this.container=document.getElementById("logo");var e=this.container.offsetWidth*window.devicePixelRatio,t=this.container.offsetHeight*window.devicePixelRatio,i=this.container.getBoundingClientRect().left*window.devicePixelRatio,n=this.container.getBoundingClientRect().top*window.devicePixelRatio;this.initialLogoWidth=this.logo.width,this.logo.scale.x=e/this.initialLogoWidth,this.logo.scale.y=this.logo.scale.x,this.logo.x=i+e/2,this.logo.y=n+t/2,this.game.add.tween(this.logo).to({alpha:1},500,Phaser.Easing.Linear.None,!0,0)}},{key:"animate",value:function(){var e=document.getElementById("logo-final"),t=e.offsetWidth*window.devicePixelRatio,i=e.offsetHeight*window.devicePixelRatio,n=e.getBoundingClientRect().left*window.devicePixelRatio+t/2,o=e.getBoundingClientRect().top*window.devicePixelRatio+i/2,a=t/this.initialLogoWidth;this.game.add.tween(this.logo).to({x:n,y:o},1e3,Phaser.Easing.Quadratic.InOut,!0,0),this.game.add.tween(this.logo.scale).to({x:a,y:a},1e3,Phaser.Easing.Quadratic.InOut,!0,0),this.game.add.tween(this.logo).to({angle:360},1e3,Phaser.Easing.Back.InOut,!0,0)}}]),t}(Phaser.Group);i.default=s},{}],11:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../utils/util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),c=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.hand=new Phaser.Sprite(i.game,0,0,"hand"),l.fitInContainer(i.hand,"option1"),i.add(i.hand),i.hand.anchor.set(.5),i.hand.alpha=0,i}return a(t,e),r(t,[{key:"moveHandToItem",value:function(e){l.display(this.game,this.hand,1e3),this.hand.y=e.getPosition().y+e.getHeight()/2.8;var t=this.game.add.tween(this.hand).to({x:e.getPosition().x+e.getWidth()/2},1e3,Phaser.Easing.Quadratic.InOut,!0);this.game.add.tween(this.hand).to({angle:[-15,0]},300,Phaser.Easing.Quadratic.InOut,!0,0,500,-1).yoyo(!0,100),t.onComplete.add(function(){this.game.add.tween(this.hand).to({alpha:0},500,Phaser.Easing.Linear.None,!0,1e3)},this)}},{key:"moveHandToManyItems",value:function(e){l.display(this.game,this.hand,800);this.game.add.tween(this.hand).to({angle:[-15,0]},300,Phaser.Easing.Quadratic.InOut,!0,0,500,-1).yoyo(!0,800);for(var t=0;t<e.length;t++){var i=e[t].getPosition().x+e[t].getWidth()/2,n=e[t].getPosition().y+e[t].getHeight()/2,o=this.game.add.tween(this.hand).to({x:i,y:n},800,Phaser.Easing.Quadratic.InOut,!0,800*t+300);this.hand.x=i,this.hand.y=n,t==e.length-1&&o.onComplete.add(function(){this.game.add.tween(this.hand).to({alpha:0},500,Phaser.Easing.Linear.None,!0,200)},this)}}}]),t}(Phaser.Group);i.default=c},{"../utils/util":18}],12:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),r(t,[{key:"preload",value:function(){}},{key:"init",value:function(){PiecSettings.assetsDir="dev"===PiecSettings.env?"assets/":"";var e=this.game;e.onGameComplete=new Phaser.Signal,e.onCompleteLevel=new Phaser.Signal,e.onChange=new Phaser.Signal,e.onReelSpinComplete=new Phaser.Signal,e.onSpinComplete=new Phaser.Signal,"undefined"!=typeof piec&&(piec.lockGame=function(){e.global.locked=!0},piec.unlockGame=function(){e.global.locked=!1},piec.completeLevel=function(){e.onCompleteLevel.dispatch()},piec.destroyGame=function(){e.destroy()},piec.spin=function(){e.onSpin.dispatch()}),window.onresize=function(){e.scale.setGameSize(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio),e.scale.refresh(),e.state.start("boot",!0,!1)}}},{key:"create",value:function(){this.init(),this.game.input.maxPointers=1,this.initGlobalVariables(),this.game.state.start("preloader"),this.game.onMoveStart=function(e){e.global.interactions++,PiecSettings&&PiecSettings.onMoveStart&&PiecSettings.onMoveStart(e.global.interactions)},this.game.onMoveComplete=function(e){PiecSettings&&PiecSettings.onMoveComplete&&PiecSettings.onMoveComplete(e.global.moveStats)}}},{key:"initGlobalVariables",value:function(){this.game.global={selection:0,isComplete:!1}}}]),t}(Phaser.State);i.default=s},{}],13:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../prefabs/logo"),c=n(l),u=e("../prefabs/cta-button"),h=n(u),d=e("../prefabs/character"),f=n(d),p=e("../prefabs/dialog"),g=n(p),y=e("../prefabs/chair"),m=n(y),w=e("../utils/fx-renderer.js"),v=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);t.default=e}(w),function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),s(t,[{key:"create",value:function(){this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setUserScale(1/window.devicePixelRatio,1/window.devicePixelRatio,0,0),this.dialogBox=new g.default(this.game),this.game.add.existing(this.dialogBox),this.currentChair=new m.default(this.game,"armchair_old","chair"),this.game.add.existing(this.currentChair),this.options=[];for(var e=0;e<PiecSettings.options.length;e++){var t=new m.default(this.game,PiecSettings.options[e],"chair");this.game.add.existing(t),this.options.push(t),t.alpha=0}this.logo=new c.default(this.game),this.game.add.existing(this.logo),this.fxEffectsLayer=this.game.add.group(),this.character=new f.default(this.game,this.fxEffectsLayer),this.game.add.existing(this.character),this.cta=new h.default(this.game),this.game.add.existing(this.cta),this.game.onChange.add(this.onChange,this),this.game.onGameComplete.add(this.onChangeComplete,this),this.game.time.events.add(PiecSettings.timer,function(){document.getElementById("vungle-close").className="visible"},this)}},{key:"render",value:function(){}},{key:"onChange",value:function(){document.getElementById("vungle-close").className="visible";for(var e=0;e<this.options.length;e++)this.options[e].disableOption();var t=this.options[this.game.global.selection];t.alpha=1;this.currentChair.hide(0,300);t.popUp(300,500),this.dialogBox.hideOptions(300),this.character.changeToHappy(),this.game.time.events.add(2e3,function(){this.game.onGameComplete.dispatch()},this)}},{key:"onChangeComplete",value:function(){this.game.add.tween(this.dialogBox).to({y:-100,alpha:0},500,Phaser.Easing.Back.In,!0,800),this.game.time.events.add(1e3,function(){this.logo.animate(),this.cta.animate(),PiecSettings.ASOI&&setTimeout(function(){doSomething("download")},2e3)},this)}},{key:"onLoop",value:function(){console.log("looping")}}]),t}(Phaser.State));i.default=v},{"../prefabs/chair":6,"../prefabs/character":7,"../prefabs/cta-button":8,"../prefabs/dialog":9,"../prefabs/logo":10,"../utils/fx-renderer.js":16}],14:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../atlas/index"),c=n(l),u=e("../utils/util"),h=n(u),d=e("../animations.js"),f=(n(d),e("../utils/fx-renderer.js")),p=n(f),g=e("../utils/custom-png-sequences-renderer.js"),y=(n(g),e("../utils/win-messages-util.js")),m=n(y),w=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e}return r(t,e),s(t,[{key:"preload",value:function(){this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources(),p.preloadFx(this.game),m.preloadWinMessages(this.game)}},{key:"update",value:function(){}},{key:"loadResources",value:function(){this.game.load.image("logo",PiecSettings.assetsDir+"logo.png"),this.game.load.image("cta",PiecSettings.assetsDir+"cta.png"),this.game.load.image("character",PiecSettings.assetsDir+"character.png"),this.game.load.image("armchair_old",PiecSettings.assetsDir+"armchair_old.png"),this.game.load.image("armchair_blue",PiecSettings.assetsDir+"armchair_blue.png"),this.game.load.image("armchair_orange",PiecSettings.assetsDir+"armchair_orange.png"),this.game.load.image("armchair_yellow",PiecSettings.assetsDir+"armchair_yellow.png"),this.game.load.image("dialogBg",PiecSettings.assetsDir+"box_bg.png"),this.game.load.image("hand",PiecSettings.assetsDir+"hand.png"),this.game.load.image("spark-particle",PiecSettings.assetsDir+"spark-particle.png"),this.game.load.image("star-particle",PiecSettings.assetsDir+"star-particle.png"),this.game.global.animations={},PiecSettings.animation=PiecSettings.animation||{};var e={frameRate:60,scale:1};for(var t in c.default)c.default.hasOwnProperty(t)&&(this.game.load.atlasJSONHash(t,PiecSettings.assetsDir+t+".png",null,c.default[t]),this.game.global.animations[t]=h.extend(e,PiecSettings.animation[t]||{}))}},{key:"onLoadComplete",value:function(){this.game.state.start("endcard")}}]),t}(Phaser.State);i.default=w},{"../animations.js":1,"../atlas/index":4,"../utils/custom-png-sequences-renderer.js":15,"../utils/fx-renderer.js":16,"../utils/util":18,"../utils/win-messages-util.js":19}],15:[function(e,t,i){"use strict";function n(e){for(var t=0;t<PiecSettings.spins.length;t++)if(null!=PiecSettings.spins[t].pngSequence){var i=PiecSettings.spins[t].pngSequence;console.log(i);var n=i.src.substr(0,i.src.indexOf("."));e.load.spritesheet(n,PiecSettings.assetsDir+i.src,i.spriteWidth,i.spriteHeight,i.spriteNumber)}}function o(e,t,i){var n=t.src.substr(0,t.src.indexOf(".")),o=document.getElementById(t.htmlContainer),a=o.offsetWidth*window.devicePixelRatio,s=(o.offsetHeight,window.devicePixelRatio,o.getBoundingClientRect().left*window.devicePixelRatio),l=o.getBoundingClientRect().top*window.devicePixelRatio,c=e.add.sprite(s,l,n);if(i.add(c),c.animations.add("animation"),c.anchor.set(0,0),c.alpha=0,r.playAnimation(e,c,t.delay,t.fps),c.scale.x=a/c.width,c.scale.y=c.scale.x,c.persistent=!1,null!=t.loops&&(c.numberOfLoops=t.loops,c.animations.currentAnim.onLoop.add(r.onLoop,this)),null!=t.effect&&-1!=t.effect.indexOf("fade-in")){c.alpha=0;e.add.tween(c).to({alpha:1},1e3,Phaser.Easing.Linear.None,!0,t.delay)}return c}Object.defineProperty(i,"__esModule",{value:!0}),i.preloadPngSequences=n,i.playPngSequence=o;var a=e("../utils/slot-animations-util.js"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(a)},{"../utils/slot-animations-util.js":17}],16:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){l.preload(e),u.preload(e)}function a(e,t,i){switch(i){case"congrats":return l.play(e,t);case"sad":return u.play(e,t)}}Object.defineProperty(i,"__esModule",{value:!0}),i.preloadFx=o,i.playFx=a;var r=e("../utils/util"),s=(n(r),e("../animations/congrats.js")),l=n(s),c=e("../animations/sad.js"),u=n(c)},{"../animations/congrats.js":2,"../animations/sad.js":3,"../utils/util":18}],17:[function(e,t,i){"use strict";function n(e,t){0!=t.loopCount&&t.loopCount===e.numberOfLoops&&(e.persistent||(t.loop=!1,e.alpha=0))}function o(e,t,i,n){e.time.events.add(i,function(){t.alpha=1,t.animations.play("animation",n,!t.persistent)})}function a(e,t,i,a,r,s,l,c,u,h,d,f){
for(var p=h.offsetWidth*window.devicePixelRatio,g=h.offsetHeight*window.devicePixelRatio,y=h.offsetLeft*window.devicePixelRatio,m=h.offsetTop*window.devicePixelRatio,w=p/100,v=g/100,b=[],P=0;P<t.length;P++){var x=d.add.sprite(y+t[P]*w,m+i[P]*v,e);f.add(x),x.anchor.set(s),x.animations.add("animation"),x.alpha=0,x.persistent=u,o(d,x,a[P],l),x.scale.x=p*c[P]/100/x.width,x.scale.y=x.scale.x,b.push(x),null!=r&&(x.numberOfLoops=r[P],x.animations.currentAnim.onLoop.add(n,this))}return b}Object.defineProperty(i,"__esModule",{value:!0}),i.onLoop=n,i.playAnimation=o,i.playAnimations=a},{}],18:[function(e,t,i){"use strict";function n(e,t){return t||(t=0),Math.floor(Math.random()*(e-t+1))+t}function o(e){return e[this.rndInt(e.length-1,0)]}function a(e){return e||(e=1),"rgba("+this.rndInt(256)+","+this.rndInt(256)+","+this.rndInt(256)+","+e+")"}function r(){return window.innerHeight>window.innerWidth}function s(e){return JSON.parse(JSON.stringify(e))}function l(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}function c(e){return-1===e.lastIndexOf(".")?e:e.substring(0,e.lastIndexOf("."))}function u(e){e.style.opacity=0;var t=+new Date;!function i(){e.style.opacity=+e.style.opacity+(new Date-t)/400,t=+new Date,+e.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16))}()}function h(e){return 100*Math.sqrt(2*Math.abs(e)/_)}function d(e){var t={boolean:{},number:{},string:{}},i=[];return e.filter(function(e){var n=void 0===e?"undefined":O(e);return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)})}function f(e,t){var i,n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function p(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function g(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=document.getElementById(t),a=o.offsetWidth*window.devicePixelRatio,r=o.offsetHeight*window.devicePixelRatio,s=o.getBoundingClientRect().left*window.devicePixelRatio,l=o.getBoundingClientRect().top*window.devicePixelRatio;e.anchor.set(i,n),e.x=s+a*i,e.y=l+r*n,e.scale.x=a/e.width,e.scale.y=e.scale.x}function y(e){return document.getElementById(e).getBoundingClientRect().top*window.devicePixelRatio}function m(e){return document.getElementById(e).getBoundingClientRect().left*window.devicePixelRatio}function w(e){return document.getElementById(e).offsetWidth*window.devicePixelRatio}function v(e){return document.getElementById(e).offsetHeight*window.devicePixelRatio}function b(e,t){var i=document.getElementById(t),n=i.offsetWidth*window.devicePixelRatio;i.offsetHeight,window.devicePixelRatio;e.scale.x=n/e.width,e.scale.y=e.scale.x}function P(e,t,i){t.alpha=0,e.add.tween(t).to({alpha:1},i,Phaser.Easing.Linear.None,!0,50)}function x(e,t,i,n,o,a,r,s){e.time.events.add(r,function(){t.alpha=1,e.add.tween(t).to({y:n,x:i},a,s,!0,0),e.add.tween(t.scale).to({x:o,y:o},a,s,!0,0)},this),e.time.events.add(r+1e3,function(){e.add.tween(t).to({alpha:0},1e3,Phaser.Easing.Quadratic.InOut,!0,0),e.time.events.add(1e3,function(){t.destroy()},this)},this)}Object.defineProperty(i,"__esModule",{value:!0});var O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.rndInt=n,i.sample=o,i.rndRgba=a,i.isPortrait=r,i.clone=s,i.remove=l,i.removeExtension=c,i.fadeIn=u,i.calcQuadTime=h,i.uniq=d,i.extend=f,i.numberWithCommas=p,i.fitInContainer=g,i.getContainerY=y,i.getContainerX=m,i.getContainerWidth=w,i.getContainerHeight=v,i.resizeToSizeOfContainer=b,i.display=P,i.starFloatWithDelayCustom2=x;var _=19.8},{}],19:[function(e,t,i){"use strict";function n(e){}function o(e,t,i){}Object.defineProperty(i,"__esModule",{value:!0}),i.preloadWinMessages=n,i.playWinMessage=o},{}]},{},[5]);
