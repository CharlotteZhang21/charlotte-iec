!function e(t,i,n){function a(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return a(i||e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./pieces.js"),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(n);i.default={pieces:a.default}},{"./pieces.js":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{blue:{frame:{x:152,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},blue_p:{frame:{x:156,y:164,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},donut:{frame:{x:609,y:164,w:181,h:149},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:181,h:149},sourceSize:{w:181,h:149}},green:{frame:{x:460,y:327,w:149,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:161},sourceSize:{w:149,h:161}},macaron:{frame:{x:610,y:1,w:148,h:155},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:148,h:155},sourceSize:{w:148,h:155}},marshmallow:{frame:{x:305,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},orange:{frame:{x:156,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},orange_p:{frame:{x:308,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},popcorn:{frame:{x:461,y:164,w:146,h:161},rotated:!1,trimmed:!0,spriteSourceSize:{x:2,y:0,w:146,h:161},sourceSize:{w:151,h:161}},pudding:{frame:{x:611,y:315,w:159,h:153},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:159,h:153},sourceSize:{w:159,h:153}},purple:{frame:{x:1,y:165,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},purple_p:{frame:{x:1,y:328,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},red:{frame:{x:309,y:164,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},red_p:{frame:{x:458,y:1,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},yellow:{frame:{x:1,y:1,w:149,h:162},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:162},sourceSize:{w:149,h:162}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"tiles.png",format:"RGBA8888",size:{w:791,h:490},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:a52266418105fd394661db76f76d6094:5da80af01517e173c5b36dd3086b03ba:accbe1e7e294ded8391337fc1c446319$"}}},{}],3:[function(e,t,i){"use strict";function n(e,t){var i=this;i.DIRECTION_UP=1,i.DIRECTION_DOWN=2,i.DIRECTION_LEFT=4,i.DIRECTION_RIGHT=8,i.DIRECTION_UP_RIGHT=16,i.DIRECTION_UP_LEFT=32,i.DIRECTION_DOWN_RIGHT=64,i.DIRECTION_DOWN_LEFT=128,i.game=e,i.model=void 0!==t?t:null,i.dragLength=100,i.diagonalDelta=50,i.swiping=!1,i.direction=null,i.tmpDirection=null,i.tmpCallback=null,i.diagonalDisabled=!1,this.game.input.onDown.add(function(){i.swiping=!0}),this.game.input.onUp.add(function(){i.swiping=!1})}n.prototype.keyUp=function(){this.direction=this.tmpDirection,this.tmpDirection=null,null!==this.tmpCallback&&(this.tmpCallback.call(this.model),this.tmpCallback=null)},n.prototype.check=function(){if(null!==this.direction){var e={x:0,y:0,direction:this.direction};return this.direction=null,e}if(!this.swiping)return null;if(Phaser.Point.distance(this.game.input.activePointer.position,this.game.input.activePointer.positionDown)<this.dragLength)return null;this.swiping=!1;var t=null,i=this.game.input.activePointer.position.x-this.game.input.activePointer.positionDown.x,n=this.game.input.activePointer.position.y-this.game.input.activePointer.positionDown.y,e={x:this.game.input.activePointer.positionDown.x,y:this.game.input.activePointer.positionDown.y},a=Math.abs(i),o=Math.abs(n);return!this.diagonalDisabled&&a>this.dragLength-this.diagonalDelta&&o>this.dragLength-this.diagonalDelta?i>0&&n>0?(t=this.DIRECTION_DOWN_RIGHT,null!==this.model&&this.model.downRight&&this.model.downRight(e)):i>0&&n<0?(t=this.DIRECTION_UP_RIGHT,null!==this.model&&this.model.upRight&&this.model.upRight(e)):i<0&&n>0?(t=this.DIRECTION_DOWN_LEFT,null!==this.model&&this.model.downLeft&&this.model.downLeft(e)):i<0&&n<0&&(t=this.DIRECTION_UP_LEFT,null!==this.model&&this.model.upLeft&&this.model.upLeft(e)):(a>this.dragLength||o>this.dragLength)&&(a>o?i>0?(t=this.DIRECTION_RIGHT,null!==this.model&&this.model.right&&this.model.right(e)):i<0&&(t=this.DIRECTION_LEFT,null!==this.model&&this.model.left&&this.model.left(e)):n>0?(t=this.DIRECTION_DOWN,null!==this.model&&this.model.down&&this.model.down(e)):n<0&&(t=this.DIRECTION_UP,null!==this.model&&this.model.up&&this.model.up(e))),null!==t?(e.direction=t,e):null},void 0!==i&&void 0!==t&&t.exports&&(t.exports=n)},{}],4:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=e("./states/boot"),o=n(a),r=e("./states/endcard"),s=n(r),l=e("./states/preloader"),u=n(l),c=new Phaser.Game(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio,Phaser.CANVAS,"game",null,!0);c.state.add("boot",new o.default),c.state.add("endcard",new s.default),c.state.add("preloader",new u.default),c.state.start("boot")},{"./states/boot":25,"./states/endcard":26,"./states/preloader":27}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.audios=[]}return a(e,[{key:"play",value:function(e,t,i){null==this.audios[e]&&(this.audios[e]=new Audio(t)),this.initAudioArgs(e,i),this.audios[e].play()}},{key:"pause",value:function(e){null!=this.audios[e]&&this.audios[e].pause()}},{key:"mute",value:function(e){null!=this.audios[e]&&(this.audios[e].muted=!0)}},{key:"muteAll",value:function(){for(var e in this.audios)this.audios.hasOwnProperty(e)&&(this.audios[e].pause(),this.audios[e].muted=!0)}},{key:"unmuteAll",value:function(){for(var e in this.audios)this.audios.hasOwnProperty(e)&&(this.audios[e].muted=!1)}},{key:"initAudioArgs",value:function(e,t){this.audios[e].muted=!1,this.audios[e].autoplay=!0,void 0!==t&&void 0!==t.loop&&"boolean"==typeof t.loop&&(this.audios[e].loop=t.loop)}}]),e}();i.default=o},{}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../prefabs/collectible"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){n(this,e),this.game=t,this.initSignals(),void 0!==PiecSettings.collectibles&&this.createCollectibles(),this.setupController()}return a(e,[{key:"initSignals",value:function(){this.onHudCreate=new Phaser.Signal,this.onCollectUpdate=new Phaser.Signal}},{key:"setupController",value:function(){}},{key:"createCollectibles",value:function(){this.collectibles=[];for(var e in PiecSettings.collectibles){var t=new r.default(this.game,e,PiecSettings.collectibles[e]);t.onHudCreate.add(function(e,t){this.onHudCreate.dispatch(e,t)},this),t.onCollectUpdate.add(function(e,t){this.onCollectUpdate.dispatch(e,t)},this),this.collectibles[e]=t}}},{key:"getCollectible",value:function(e){return this.collectibles[e]}}]),e}();i.default=s},{"../prefabs/collectible":7}],7:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e("../prefabs/audio-controller"),c=a(u),h=e("../utils/container-util"),d=n(h),f=e("../utils/animations-util"),p=(n(f),e("../utils/tweener")),g=n(p),v=e("../prefabs/counter"),m=a(v),y=function(e){function t(e,i,n){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.collectibleKey=i,a.initSignals(),a.config=n,a.amount=n.initialValue,a.minValue=n.valueRange.min,a.maxValue=n.valueRange.max,void 0!==n.counter&&a.initCounter(n.counter),void 0!==n.sounds&&a.initSounds(n.sounds),a.game.time.events.add(10,function(){this.onHudCreate.dispatch(n.counter.tag,this.collectibleCounter),this.onCollectUpdate.dispatch(this.collectibleKey,this.amount)},a),a}return s(t,e),l(t,[{key:"initSignals",value:function(){this.onHudCreate=new Phaser.Signal,this.onCollectUpdate=new Phaser.Signal}},{key:"initSounds",value:function(){this.audioController=new c.default}},{key:"initCounter",value:function(e){e.initialValue=this.amount,e.maxValue=this.maxValue,e.minValue=this.minValue,this.collectibleCounter=new m.default(this.game,e),this.collectibleCounter.hide()}},{key:"spawnCollectibles",value:function(e){var t=e.amount,i=e.lifetime,n=e.spawnArea;t=Math.min(t,30);for(var a=0;a<t;a++){var o=new Phaser.Sprite(this.game,0,0,this.config.src);this.add(o),d.fitInContainer(o,this.config.htmlTag,.5,.5),o.x=d.getRandomXWithinContainer(n),o.y=d.getRandomYWithinContainer(n),o.alpha=1,o.angle=90,this.collectibleItemAppear(o,200*Math.random(),i,n),o.inputEnabled=!0,o.input.useHandCursor=!0,o.events.onInputDown.add(function(e){this.collectItem(e)},this)}}},{key:"collectibleItemAppear",value:function(e,t,i,n){var a=e.x,o=e.y,r=e.scale.x;e.x=d.getXCenterWithinContainer(n),e.y=d.getYCenterWithinContainer(n),e.scale.x=.001,e.scale.y=.001,this.game.add.tween(e).to({x:a,y:[o-.5*d.getYCenterWithinContainer(n),o],angle:0},500,Phaser.Easing.Quadratic.InOut,!0,t).onComplete.add(function(){g.jiggleAngle(e,20,200,100),this.game.time.events.add(i+100*Math.random(),function(){e.inputEnabled&&this.collectibleItemDisappear(e)},this)},this),this.game.add.tween(e.scale).to({x:r,y:r},200,Phaser.Easing.Quadratic.InOut,!0,t+100)}},{key:"increaseCollectibleAmount",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.amount+e;this.setCollectibleAmount(i,t)}},{key:"setCollectibleAmount",value:function(e,t){e<this.amount&&0!=this.amount&&this.game.time.events.add(300,function(){t&&this.dropOutEffect(),null!=this.audioController&&void 0!==this.config.sounds.lose&&this.audioController.play("coin-empty",PiecSettings.assetsDir+this.config.sounds.lose)},this),this.amount=Math.min(Math.max(e,this.minValue),this.maxValue),null!=this.collectibleCounter&&(this.collectibleCounter.changeCounterTo(this.amount,50),this.onCollectUpdate.dispatch(this.collectibleKey,this.amount))}},{key:"collectItem",value:function(e){e.inputEnabled=!1,this.amount+=this.config.eachItemCountsAs,this.amount=Math.min(Math.max(this.amount,this.minValue),this.maxValue),null!=this.collectibleCounter&&(this.collectibleCounter.changeCounterTo(this.amount,50),this.onCollectEffect(e,this.config.onCollectEffects),this.onCollectUpdate.dispatch(this.collectibleKey,this.amount)),null!=this.audioController&&void 0!==this.config.sounds.collect&&this.audioController.play("coin-pickup-"+this.amount,PiecSettings.assetsDir+this.config.sounds.collect)}},{key:"collectibleItemDisappear",value:function(e){e.inputEnabled&&(e.inputEnabled=!1);var t=e.scale.x;g.scaleTo(e,[1.2*t,0],[1.2*t,0],300*Math.random(),500,Phaser.Easing.Quadratic.Out),g.fadeOut(e,0,800,Phaser.Easing.Quadratic.out,!0,function(){e.destroy()}),void 0!==e&&this.spawnCloudExplosion(e)}},{key:"spawnCloudExplosion",value:function(e){if(null!=e&&void 0!=e)for(var t=0;t<30;t++){var i=new Phaser.Sprite(this.game,0,0,"cloud");this.game.add.existing(i),i.anchor.set(.5);var n=e.width/i.width;i.x=e.position.x,i.y=e.position.y,i.scale.x=n,i.scale.y=n;var a=i.y,o=i.x,r=e.width*(Math.random()-.5),s=e.height*(Math.random()-.5),l=o+r,u=a+s,n=0,c=100*Math.random(),h=50*Math.random()+400;g.scaleOut(i,c,h,Phaser.Easing.Quadratic.Out,function(e){e.alpha=0,e.destroy()}),g.moveTo(i,l,u,c,h,Phaser.Easing.Linear.InOut,null,!0)}}},{key:"onCollectEffect",value:function(e,t){for(var i=0;i<t.length;i++)switch(t[i]){case"flyToGoal":this.flyToGoal(e)}}},{key:"flyToGoal",value:function(e){var t=this.collectibleCounter.x,i=this.collectibleCounter.y;this.game.add.tween(e).to({x:t,y:i},400,Phaser.Easing.Back.InOut,!0,0),this.game.add.tween(e.scale).to({x:.01,y:.01},100,Phaser.Easing.Quadratic.InOut,!0,300)}},{key:"dropOutEffect",value:function(){for(var e=(this.collectibleCounter.x,this.collectibleCounter.y,2*(Math.random()+5)),t=0;t<e;t++){var i=new Phaser.Sprite(this.game,0,0,this.config.src);this.game.add.existing(i),d.fitInContainer(i,this.config.htmlTag,.5,.5),i.x=this.collectibleCounter.x,i.y=this.collectibleCounter.y,i.alpha=1,i.angle=90*(Math.random()-.5);var n=100*Math.random(),a=this,o=.8*this.game.global.windowHeight;g.moveTo(i,i.x+(Math.random()-.5)*this.collectibleCounter.width,[i.y-i.height/2,o],n,500,Phaser.Easing.Linear.Out,function(e){g.fadeOut(e,0,300,Phaser.Easing.Quadratic.out,!0,function(){e.destroy()}),void 0!==e&&a.spawnCloudExplosion(e)})}}}]),t}(Phaser.Group);i.default=y},{"../prefabs/audio-controller":5,"../prefabs/counter":8,"../utils/animations-util":28,"../utils/container-util":29,"../utils/tweener":31}],8:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../utils/util"),u=n(l),c=e("../utils/container-util"),h=n(c),d=function(e){function t(e,i){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));switch(n.currentValue=i.initialValue,n.maxValue=i.maxValue,n.minValue=i.minValue,n.args=i,n.getContainerInfo(n.args.htmlTag),null!=n.args.backgroundSrc&&n.createCounterBackground(),n.visualStyle=i.style,i.style){case"number":n.createNumberCounter();break;case"rectangle_progressbar":n.createRectProgressBarCounter();break;case"circle_progressbar":n.createCircleProgressBarCounter();break;default:console.log("please set the counter style")}return n.game.add.existing(n),n.x+=n.width/2,n.y+=n.height/2,n.anchor=[],n.anchor.x=.5,n.anchor.y=.5,n}return r(t,e),s(t,[{key:"getContainerInfo",value:function(e){this.containerWidth=h.getContainerWidth(e),this.containerHeight=h.getContainerHeight(e),this.x=h.getContainerX(e),this.y=h.getContainerY(e)}},{key:"createRectProgressBarCounter",value:function(){this.barFilling=new Phaser.Sprite(this.game,0,0,this.args.backgroundSrc+"-fill"),this.add(this.barFilling),this.barFilling.anchor.set(0,.5),this.barFilling.x=this.counterBackground.x,this.barFilling.y=this.counterBackground.y+this.counterBackground.height/2,this.barFilling.scale.x=this.counterBackground.width/this.barFilling.width,this.barFilling.scale.y=this.counterBackground.height/this.barFilling.height*.75,this.fullWidthFilling=this.barFilling.scale.x,null!=this.maxValue&&(this.barFilling.scale.x=this.currentValue/this.maxValue*this.fullWidthFilling),null!=this.args.iconSrc&&this.createCounterIcon("outside")}},{key:"createCircleProgressBarCounter",value:function(){this.barFilling=new Phaser.Sprite(this.game,0,0,this.args.backgroundSrc+"-fill"),this.add(this.barFilling),this.barFilling.anchor.set(.5),this.barFilling.x=this.counterBackground.x+this.counterBackground.width/2,this.barFilling.y=this.counterBackground.y+this.counterBackground.height/2,this.barFilling.scale.x=this.counterBackground.width/this.barFilling.width,this.barFilling.scale.y=this.counterBackground.height/this.barFilling.height,this.maskAngle={from:90,to:450},this.fullWidthFilling=this.maskAngle.to-this.maskAngle.from,this.arcMask=this.game.add.graphics(0,0);var e=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.arcMask.beginFill(16777215),this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(e),this.game.math.degToRad(this.maskAngle.from),!0),this.barFilling.mask=this.arcMask,this.add(this.arcMask)}},{key:"createNumberCounter",value:function(){var e,t="bold",i=PiecSettings.fontFamily,n=[PiecSettings.fontColor],a=null,o=null,r=null,s=.5,l=.5;if(void 0!=this.args.fontStyle){var c=this.args.fontStyle;t=c.fontWeight,e=this.counterBackground.height*c.fontSize||.5*this.counterBackground.height,i=c.fontFamily,n=c.color,a=c.stroke||null,o=c.strokeThickness||null,r=c.shadow||null,s=c.anchor.x||.5,l=c.anchor.y||.5}var h={font:t+" "+e+"px "+i},d=0;void 0!==this.args.iconSrc&&(d=.2);var f=" "+this.currentValue;null!=this.args.counterCommaSeparation&&this.args.counterCommaSeparation&&(f=" "+u.numberWithCommas(this.currentValue)),this.textField=new Phaser.Text(this.game,this.counterBackground.width*(.5+d),0,f,h),this.textField.x-=this.counterBackground.width/2,this.add(this.textField),this.textField.anchor.set(s,l),this.textField.align="center",this.textField.padding.set(e/2,0);var p=this.textField.context.createLinearGradient(0,0,0,this.height);if(void 0!==n&&n.length>0)for(var g=0;g<n.length;g++){var v=g/n.length;p.addColorStop(v,n[g])}if(this.textField.fill=p,null!==a&&(this.textField.stroke=a),void 0!==o&&(this.textField.strokeThickness=o),null!==r){var m=r;this.textField.setShadow(m.x,m.y,m.color,m.blur)}this.changeNumTo(this.currentValue,50),null!=this.args.iconSrc&&this.createCounterIcon("contain")}},{key:"createCounterIcon",value:function(e){this.counterIcon=new Phaser.Sprite(this.game,0,0,this.args.iconSrc),this.add(this.counterIcon),this.counterIcon.anchor.set(.5),"contain"==e?(this.counterIcon.scale.x=.7*this.counterBackground.height/this.counterIcon.height,this.counterIcon.x=this.counterBackground.x+this.counterIcon.width):"outside"==e&&(this.counterIcon.scale.x=.7*this.counterBackground.height/this.counterIcon.height,this.counterIcon.x=this.counterBackground.x-this.counterIcon.width),this.counterIcon.scale.y=this.counterIcon.scale.x,this.counterIcon.y=this.counterBackground.y+this.counterBackground.height/2}},{key:"createCounterBackground",value:function(){this.counterBackground=new Phaser.Sprite(this.game,0,0,this.args.backgroundSrc),this.add(this.counterBackground),this.counterBackground.scale.x=this.containerWidth/this.counterBackground.width,this.counterBackground.scale.y=this.counterBackground.scale.x,this.counterBackground.x-=this.counterBackground.width/2,this.counterBackground.y-=this.counterBackground.height/2}},{key:"createCounterGraphicContainer",value:function(e){var t=new Phaser.Graphics(this.game,0,0);t.beginFill(16777215,0),t.drawRect(h.getContainerX(e),h.getContainerY(e),h.getContainerWidth(e),h.getContainerHeight(e)),this.counterBackground=t,this.add(this.counterBackground)}},{key:"changeCounterTo",value:function(e,t){var i=this.calcSpeedFromDuration(e,t);switch(this.visualStyle){case"number":this.changeNumTo(e,i);var n=this.textField.scale.x;this.game.add.tween(this.textField.scale).to({x:1.4*n,y:1.4*n},1*t/4,Phaser.Easing.Linear.None,!0,1*t/3).onComplete.add(function(){this.game.add.tween(this.textField.scale).to({x:n,y:n},1*t/4,Phaser.Easing.Linear.None,!0,0)},this);break;case"rectangle_progressbar":this.changeRectBarTo(e,i);break;case"circle_progressbar":this.changeCircleBarTo(e,i)}}},{key:"calcSpeedFromDuration",value:function(e,t){return Math.ceil(Math.abs(e-this.currentValue)/t)}},{key:"changeNumTo",value:function(e,t){var i=void 0!==this.args.iconText?this.args.iconText:"";e>this.currentValue?this.currentValue<e&&(this.currentValue+=t,this.currentValue>e&&(this.currentValue=e),this.game.time.events.add(10,function(){null!=this.args.counterCommaSeparation&&this.args.counterCommaSeparation?this.textField.text=""+i+u.numberWithCommas(this.currentValue):this.textField.text=""+i+this.currentValue,this.currentValue<e&&this.changeNumTo(e,t)},this)):this.currentValue>=e&&(this.currentValue-=t,this.currentValue<e&&(this.currentValue=e),this.game.time.events.add(10,function(){null!=this.args.counterCommaSeparation&&this.args.counterCommaSeparation?this.textField.text=""+i+u.numberWithCommas(this.currentValue):this.textField.text=""+i+this.currentValue,this.currentValue>e&&this.changeNumTo(e,t)},this))}},{key:"changeRectBarTo",value:function(e,t){e>this.currentValue?this.currentValue<e&&(this.currentValue+=t,this.currentValue>e&&(this.currentValue=e),this.game.time.events.add(10,function(){this.barFilling.scale.x=this.currentValue/this.maxValue*this.fullWidthFilling,this.currentValue<e&&this.changeRectBarTo(e,t)},this)):this.currentValue>e&&(this.currentValue-=t,this.currentValue<e&&(this.currentValue=e),this.game.time.events.add(10,function(){this.barFilling.scale.x=this.currentValue/this.maxValue*this.fullWidthFilling,this.currentValue>e&&this.changeRectBarTo(e,1)},this))}},{key:"setCircleBarTo",value:function(e){this.currentValue=e;var t=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.arcMask.clear(),this.arcMask.beginFill(16777215),this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(t),this.game.math.degToRad(this.maskAngle.from),!0)}},{key:"changeCircleBarTo",value:function(e,t){if(e>this.currentValue){if(this.currentValue<e){this.currentValue+=t,this.currentValue>e&&(this.currentValue=e);var i=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.game.time.events.add(10,function(){this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(i),this.game.math.degToRad(this.maskAngle.from),!0),this.currentValue<e&&this.changeCircleBarTo(e,t)},this)}}else if(this.currentValue>e){this.currentValue-=t,this.currentValue<e&&(this.currentValue=e);var i=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.arcMask.clear(),this.game.time.events.add(10,function(){this.arcMask.beginFill(16777215),this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(i),this.game.math.degToRad(this.maskAngle.from),!0),this.currentValue>e&&this.changeCircleBarTo(e,t)},this)}}},{key:"hide",value:function(){this.alpha=0}},{key:"show",value:function(){this.alpha=1}},{key:"getXCoord",value:function(){}},{key:"getYCoord",value:function(){}}]),t}(Phaser.Group);i.default=d},{"../utils/container-util":29,"../utils/util":32}],9:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../utils/container-util"),u=n(l),c=e("../utils/animations-util"),h=(n(c),e("../utils/custom-png-sequences-renderer.js")),d=(n(h),function(e){function t(e,i){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.args=i,n.initSignals(),void 0!==i.src&&""!=i.src?n.createButton(i):n.createInteractiveArea(i),n.button.inputEnabled=!0,n.button.input.useHandCursor=!0,n.button.events.onInputDown.add(function(){this.game.onSDKCall.dispatch(),this.game.time.events.add(50,function(){doSomething("download")},this)},n),n.game.world.bringToTop(n),n.hide(),n.anchor=[],n.anchor.x=.5,n.anchor.y=.5,n}return r(t,e),s(t,[{key:"createButton",value:function(e){this.button=new Phaser.Sprite(this.game,0,0,e.src),this.button.x-=this.button.width/2,this.button.y-=this.button.height/2,this.add(this.button),this.button.bringToTop(),u.fitInContainer(this,e.container,.5,.5)}},{key:"createInteractiveArea",value:function(e){var t=new Phaser.Graphics(this.game,0,0);t.beginFill(16777215,0),t.drawRect(u.getContainerX(e.container),u.getContainerY(e.container),u.getContainerWidth(e.container),u.getContainerHeight(e.container)),this.button=t,this.add(this.button)}},{key:"initSignals",value:function(){this.onInteract=new Phaser.Signal}},{key:"show",value:function(){this.alpha<1&&(this.alpha=1),this.button.inputEnabled=!0}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0),this.button.inputEnabled=!1}},{key:"enable",value:function(){this.button.inputEnabled||(this.button.inputEnabled=!0)}},{key:"disable",value:function(){this.button.inputEnabled&&(this.button.inputEnabled=!1)}},{key:"fitInContainer",value:function(e){u.fitInContainer(this,e,this.anchor.x,this.anchor.y)}}]),t}(Phaser.Group));i.default=d},{"../utils/animations-util":28,"../utils/container-util":29,"../utils/custom-png-sequences-renderer.js":30}],10:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),u=function(e){function t(e,i){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,0,0,i.src));return l.fitInContainer(o,i.container,i.anchor.x,i.anchor.y),o.game.add.existing(o),o.currentContainer=i.container,o.alpha=0,o}return o(t,e),r(t,[{key:"show",value:function(){this.alpha<1&&(this.alpha=1)}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0)}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"fitInContainer",value:function(e){l.fitInContainer(this,e,this.anchor.x,this.anchor.y)}}]),t}(Phaser.Sprite);i.default=u},{"../utils/container-util":29}],11:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../utils/container-util"),u=n(l),c=e("../utils/tweener"),h=(n(c),e("../utils/util")),d=n(h),f=function(e){function t(e,i){a(this,t);var n=(i.text,u.getContainerHeight(i.container)),r={font:i.style.fontWeight+" "+n+"px "+i.style.fontFamily+","+PiecSettings.genericFontFamily};console.log(i.style.fontFamily+","+PiecSettings.genericFontFamily);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,0,0,i.text,r)),l=s.context.createLinearGradient(0,0,0,s.height);if(void 0!==i.style.color&&i.style.color.length>0)for(var c=0;c<i.style.color.length;c++){var h=c/i.style.color.length;l.addColorStop(h,i.style.color[c])}if(s.fill=l,void 0!==i.style.stroke&&(s.stroke=i.style.stroke),void 0!==i.style.strokeThickness&&(s.strokeThickness=i.style.strokeThickness),void 0!==i.style.shadow){var d=i.style.shadow;s.setShadow(d.x,d.y,d.color,d.blur,d.shadowStroke,d.shadowFill)}return s.game.add.existing(s),s.currentContainer=i.container,s.alpha=0,void 0!==i.autolocalise&&1==i.autolocalise&&void 0!==PiecSettings.translations[s.text]?s.autolocalise():s.text=" "+s.text+" ",void 0!==i.style.fontCase&&"uppercase"==i.style.fontCase&&(s.text=s.text.toUpperCase()),u.bestFit(s,i.container,i.anchor.x,i.anchor.y),s}return r(t,e),s(t,[{key:"show",value:function(){this.alpha<1&&(this.alpha=1)}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0)}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"autolocalise",value:function(){var e=d.getDeviceLang();void 0!==PiecSettings.translations[this.text][e]&&(this.text=" "+PiecSettings.translations[this.text][e]+" ")}},{key:"fitInContainer",value:function(e){
u.bestFit(this,e,this.anchor.x,this.anchor.y)}}]),t}(Phaser.Text);i.default=f},{"../utils/container-util":29,"../utils/tweener":31,"../utils/util":32}],12:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../ext/swipe"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){n(this,e),this.game=t,this.swipe=new r.default(this.game),this.initSignals()}return a(e,[{key:"initSignals",value:function(){this.onSwipe=new Phaser.Signal}},{key:"update",value:function(){this.updateSwipe()}},{key:"updateSwipe",value:function(){var e=this.swipe.check();if(null!==e)switch(e.direction){case this.swipe.DIRECTION_LEFT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("LEFT"));break;case this.swipe.DIRECTION_RIGHT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("RIGHT"));break;case this.swipe.DIRECTION_UP:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("UP"));break;case this.swipe.DIRECTION_DOWN:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("DOWN"));break;case this.swipe.DIRECTION_UP_LEFT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("UPLEFT"));break;case this.swipe.DIRECTION_UP_RIGHT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("UPRIGHT"));break;case this.swipe.DIRECTION_DOWN_LEFT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("DOWNLEFT"));break;case this.swipe.DIRECTION_DOWN_RIGHT:this.onSwipe.dispatch(this.correctDirectionForRotatedWorld("DOWNRIGHT"))}}},{key:"correctDirectionForRotatedWorld",value:function(e){if(-90==this.game.world.angle)switch(e){case"LEFT":return"UP";case"RIGHT":return"DOWN";case"UP":return"RIGHT";case"DOWN":return"LEFT";case"UPLEFT":return"UPRIGHT";case"UPRIGHT":return"DOWNRIGHT";case"DOWNLEFT":return"UPLEFT";case"DOWNRIGHT":return"DOWNLEFT"}return e}}]),e}();i.default=s},{"../ext/swipe":3}],13:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),u=function(e){function t(e,i,o){n(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.initSignals(),r.args=o,void 0!==o.src&&""!=o.src?r.createButton(o):r.createInteractiveArea(o),r.button.inputEnabled=!0,r.button.input.useHandCursor=!0,"onInputUp"==o.onInteractEvent?r.game.input.onUp.add(function(){if(this.button.inputEnabled){var e=this.game.input.x,t=this.game.input.y;if(-90==this.game.world.angle){var i=e;e=this.game.global.windowHeight-t,t=i}var n=this.button.worldX,a=this.button.worldY,o=this.button.worldWidth,r=this.button.worldHeight,s=n-o*this.button.anchor.x,l=a-r*this.button.anchor.y,u=n+o*(1-this.button.anchor.x),c=a+r*(1-this.button.anchor.y);e>s&&t>l&&e<u&&t<c&&this.onInteract.dispatch(this)}},r):r.button.events.onInputDown.add(function(){this.onInteract.dispatch(this)},r),r}return o(t,e),r(t,[{key:"createButton",value:function(e){this.button=new Phaser.Sprite(this.game,0,0,e.src),this.button.anchor.set(.5),this.button.x+=this.button.width/2,this.button.y+=this.button.height/2,this.button.worldX=this.button.x,this.button.worldY=this.button.y,this.button.worldWidth=this.button.width,this.button.worldHeight=this.button.height,this.add(this.button),l.fitInContainer(this.button,e.container)}},{key:"createInteractiveArea",value:function(e){var t=new Phaser.Graphics(this.game,0,0);t.beginFill(14554186,0),t.drawRect(l.getContainerX(e.container),l.getContainerY(e.container),l.getContainerWidth(e.container),l.getContainerHeight(e.container)),t.worldX=l.getContainerX(e.container),t.worldY=l.getContainerY(e.container),t.worldWidth=l.getContainerWidth(e.container),t.worldHeight=l.getContainerHeight(e.container),this.button=t,this.add(this.button)}},{key:"initSignals",value:function(){this.onInteract=new Phaser.Signal,this.onFail=new Phaser.Signal}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0)}},{key:"show",value:function(){this.alpha<1&&(this.alpha=1)}},{key:"disable",value:function(){this.button.inputEnabled&&(this.button.inputEnabled=!1),this.hide()}},{key:"enable",value:function(){this.button.inputEnabled||(this.button.inputEnabled=!0),this.show()}},{key:"autoDestroy",value:function(e){this.game.time.events.add(e,function(){this.destroy()},this)}}]),t}(Phaser.Group);i.default=u},{"../utils/container-util":29}],14:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../utils/util.js"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o),s=function(){function e(t,i,a){n(this,e),this.game=t,this.orientationLock=a,this.videoOrientation=i,this.windowWidth=document.body.clientWidth,this.windowHeight=document.body.clientHeight}return a(e,[{key:"update",value:function(){this.aspectRatio=document.body.clientWidth/document.body.clientHeight,"landscape"==this.orientationLock&&r.isPortrait()||"portrait"==this.orientationLock&&!r.isPortrait()?(this.resizeVideoToFillScreenRotated(document.getElementById("videoBg")),this.resizeWrapperToFillScreenRotated(document.getElementById("videoBg"),document.getElementById("vpiec-wrap")),this.resizeGameToFillScreenRotated(),document.getElementById("vungle-header").classList.add("left")):("landscape"==this.orientationLock&&!r.isPortrait()||"portrait"==this.orientationLock&&r.isPortrait(),this.resizeVideoToFillScreenNormal(document.getElementById("videoBg")),this.resizeWrapperToFillScreenNormal(document.getElementById("videoBg"),document.getElementById("vpiec-wrap")),this.resizeGameToFillScreenNormal(),document.getElementById("vungle-header").classList.remove("left"))}},{key:"resizeGameToFillScreenNormal",value:function(){this.game.scale.setGameSize(this.getVideoWidth()*window.devicePixelRatio,this.getVideoHeight()*window.devicePixelRatio),this.game.scale.refresh(),this.game.world.angle=0,this.game.world.setBounds(0,0,this.game.world.bounds.width,this.game.world.bounds.height)}},{key:"resizeGameToFillScreenRotated",value:function(){this.game.scale.setGameSize(this.getVideoHeight()*window.devicePixelRatio,this.getVideoWidth()*window.devicePixelRatio),this.game.scale.refresh(),this.game.world.angle=-90,this.game.world.setBounds(0,-this.game.world.bounds.height,this.game.world.bounds.width,this.game.world.bounds.height)}},{key:"getVideoWidth",value:function(){return document.getElementById("vpiec-wrap").offsetWidth}},{key:"getVideoHeight",value:function(){return document.getElementById("vpiec-wrap").offsetHeight}},{key:"resizeWrapperToFillScreenRotated",value:function(e,t){this.resetWrapper(t),t.style.width=this.calcVideoHeightRotated(e),t.style.height=this.calcVideoWidthRotated(e)}},{key:"resizeWrapperToFillScreenNormal",value:function(e,t){this.resetWrapper(t),t.style.width=this.calcVideoWidthNormal(e),t.style.height=this.calcVideoHeightNormal(e)}},{key:"calcVideoHeightRotated",value:function(e){return r.isPortrait()?this.aspectRatio>9/16?"landscape"==this.videoOrientation?e.offsetWidth+"px":9*e.offsetHeight/16+"px":"landscape"==this.videoOrientation?16*e.offsetHeight/9+"px":9*e.offsetHeight/16+"px":this.aspectRatio>16/9?(this.videoOrientation,e.offsetWidth+"px"):"landscape"==this.videoOrientation?e.offsetWidth+"px":9*e.offsetHeight/16+"px"}},{key:"calcVideoWidthRotated",value:function(e){return r.isPortrait()?this.aspectRatio>9/16?"landscape"==this.videoOrientation?9*e.offsetWidth/16+"px":e.offsetHeight+"px":(this.videoOrientation,e.offsetHeight+"px"):this.aspectRatio>16/9?"landscape"==this.videoOrientation?9*e.offsetWidth/16+"px":16*e.offsetWidth/9+"px":"landscape"==this.videoOrientation?9*e.offsetWidth/16+"px":e.offsetHeight+"px"}},{key:"calcVideoHeightNormal",value:function(e){return r.isPortrait()?this.aspectRatio>9/16?"landscape"==this.videoOrientation?9*e.offsetWidth/16+"px":e.offsetHeight+"px":"landscape"==this.videoOrientation?9*e.offsetWidth/16+"px":16*e.offsetWidth/9+"px":this.aspectRatio>16/9?e.offsetHeight+"px":"landscape"==this.videoOrientation?9*e.offsetWidth/16+"px":e.offsetHeight+"px"}},{key:"calcVideoWidthNormal",value:function(e){return r.isPortrait()?this.aspectRatio>9/16?"landscape"==this.videoOrientation?e.offsetWidth+"px":9*e.offsetHeight/16+"px":(this.videoOrientation,e.offsetWidth+"px"):this.aspectRatio>16/9?"landscape"==this.videoOrientation?16*e.offsetHeight/9+"px":9*e.offsetHeight/16+"px":"landscape"==this.videoOrientation?e.offsetWidth+"px":9*e.offsetHeight/16+"px"}},{key:"resetWrapper",value:function(e){e.className="",e.style.top=0,e.style.left=0,e.style.padding=0,e.style.transform="none"}},{key:"resizeVideoToFillScreenNormal",value:function(e){e.style.width=this.windowWidth,e.style.height=this.windowHeight,e.style.transform="none",e.style.top="0",e.style.left="0"}},{key:"resizeVideoToFillScreenRotated",value:function(e){e.style.width=this.windowHeight+"px",e.style.height=this.windowWidth+"px",e.style.transform="rotate(-90deg)",e.style.top="100%",e.style.left="0"}}]),e}();i.default=s},{"../utils/util.js":32}],15:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../utils/container-util"),u=n(l),c=e("../utils/custom-png-sequences-renderer"),h=n(c),d=function(e){function t(e,i,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.initSignals(),r.containerName=n.container,r.getContainerInfo(),r.projectiles=[],r.gameDuration=n.gameDuration,r.initialTimeMargin=n.initialTimeMargin,r.endTimeMargin=n.endTimeMargin,r.failAni=void 0!==n.failAni?n.failAni:null,r.successAni=void 0!==n.successAni?n.successAni:null,r.triggered=!1,r.handGestureController=i,r.swipe="",r.failed=!1,r.createProjectiles(n.src,n.isAnimation,n.amount,n.direction),r}return r(t,e),s(t,[{key:"initSignals",value:function(){this.onSuccess=new Phaser.Signal,this.onFail=new Phaser.Signal}},{key:"getContainerInfo",value:function(){this.containerWidth=u.getContainerWidth(this.containerName),this.containerHeight=u.getContainerHeight(this.containerName),this.x=u.getContainerX(this.containerName),this.y=u.getContainerY(this.containerName)}},{key:"createInteractionArea",value:function(){this.handGestureController.onSwipe.add(function(e){-1!=e.indexOf("UP")&&(console.log("SWIPE UP"),this.swipe="up",this.failed||this.flyUpProjectiles())},this)}},{key:"createProjectiles",value:function(e,t,i,n){for(var a=0;a<i;a++){if(t)var o=h.playPngSequence(this.game,e,this);else var o=new Phaser.Sprite(this.game,0,0,e);switch(o.anchor.set(.5),o.scale.y=this.containerHeight/o.height/i,o.scale.x=o.scale.y,o.x=this.containerWidth+Math.abs(o.width)/2+this.x,o.y=0==a?u.getYCenterWithinContainer(this.containerName):u.getRandomYWithinContainer(this.containerName)/i+this.y,n){case"inverse":o.scale.x*=-1;break;case"random":o.scale.x*=Math.floor(2*Match.random()-1);break;case"same":o.scale.x*=1;default:console.log("please set the projectile direction")}this.projectiles.push(o)}}},{key:"updateProjectiles",value:function(e){switch(e){case"up":for(var t=0;t<this.projectiles.length;t++){var i=this.projectiles[t],n=this.angle;this.game.add.tween(i).to({y:-1e3,angle:[n+=120]},1e3,Phaser.Easing.Linear.out,!0,100*t)}break;case"down":for(var t=0;t<this.projectiles.length;t++){var i=this.projectiles[t],n=this.angle;this.game.add.tween(i).to({y:this.game.global.windowHeight+1e3,angle:[n-=120]},1e3,Phaser.Easing.Linear.out,!0,100*t)}}}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0)}},{key:"show",value:function(){this.alpha<1&&(this.alpha=1),this.triggered||this.fly()}},{key:"fly",value:function(){this.triggered=!0,this.flyToCenterProjectiles(this.initialTimeMargin);var e=this.gameDuration-this.initialTimeMargin-this.endTimeMargin;this.game.time.events.add(this.initialTimeMargin,function(){this.createInteractionArea(),this.flySlowMoProjectiles(e)},this),this.game.time.events.add(e,function(){""==this.swipe&&(this.onFail.dispatch(this),this.flyStraightProjectiles(this.endTimeMargin),this.failed=!0)},this)}},{key:"flyToCenterProjectiles",value:function(e){for(var t=0;t<this.projectiles.length;t++){var i=this.projectiles[t];this.flyToCenter(i,e)}}},{key:"flyToCenter",value:function(e,t){e.tween&&this.game.tweens.remove(e.tween),e.tween=this.game.add.tween(e).to({x:this.containerWidth/2+Math.abs(e.width)/2+this.x},t,Phaser.Easing.Quadratic.In,!0,0)}},{key:"flySlowMoProjectiles",value:function(e){for(var t=0;t<this.projectiles.length;t++){var i=this.projectiles[t];this.flySlowMo(i,e)}}},{key:"flySlowMo",value:function(e,t){e.tween&&this.game.tweens.remove(e.tween),e.tween=this.game.add.tween(e).to({x:this.containerWidth/2+this.x},t,Phaser.Easing.Linear.None,!0,0)}},{key:"flyStraightProjectiles",value:function(e){for(var t=0;t<this.projectiles.length;t++){var i=this.projectiles[t];this.flyStraight(i,e)}}},{key:"flyStraight",value:function(e,t){e.tween&&this.game.tweens.remove(e.tween),e.tween=this.game.add.tween(e).to({x:this.x+.1*Math.abs(e.width)},t,Phaser.Easing.Linear.In,!0,0),e.tween.onComplete.add(function(e){if(e.alpha=0,null!=this.failAni){var t=h.playPngSequence(this.game,this.failAni,this);t.scale.y=1.8*e.height/t.height,t.scale.x=t.scale.y,t.x=this.x-.4*Math.abs(e.width),t.y=e.y-t.height/2}},this)}},{key:"flyUpProjectiles",value:function(){for(var e=0;e<this.projectiles.length;e++)this.flyUp(this.projectiles[e],0,this.endTimeMargin);this.onSuccess.dispatch(this)}},{key:"flyUp",value:function(e,t,i){e.tween&&this.game.tweens.remove(e.tween);var n=this.angle,a=e.y;this.game.add.tween(e).to({y:[a,-500],angle:[n+=120],x:this.x},i,Phaser.Easing.Linear.Out,!0,t)}},{key:"disable",value:function(){this.hide()}},{key:"enable",value:function(){this.show()}}]),t}(Phaser.Group);i.default=d},{"../utils/container-util":29,"../utils/custom-png-sequences-renderer":30}],16:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../utils/container-util"),u=n(l),c=e("../utils/animations-util"),h=(n(c),e("../utils/custom-png-sequences-renderer.js")),d=(n(h),function(e){function t(e,i){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.args=i,n.initSignals(),void 0!==i.src&&""!=i.src?n.createButton(i):n.createInteractiveArea(i),n.button.inputEnabled=!0,n.button.input.useHandCursor=!0,n.button.events.onInputDown.add(function(){this.game.scale.setGameSize(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio),this.game.scale.refresh(),this.game.state.start("boot",!0,!1),this.game.onSDKCall.dispatch()},n),n.game.world.bringToTop(n),n.hide(),n.anchor=[],n.anchor.x=.5,n.anchor.y=.5,n}return r(t,e),s(t,[{key:"createButton",value:function(e){this.button=new Phaser.Sprite(this.game,0,0,e.src),this.button.anchor.set(.5),this.button.x+=this.button.width/2,this.button.y+=this.button.height/2,this.add(this.button),this.button.bringToTop(),u.fitInContainer(this.button,e.container)}},{key:"createInteractiveArea",value:function(e){var t=new Phaser.Graphics(this.game,0,0);t.beginFill(16777215,0),t.drawRect(u.getContainerX(e.container),u.getContainerY(e.container),u.getContainerWidth(e.container),u.getContainerHeight(e.container)),this.button=t,this.add(this.button)}},{key:"initSignals",value:function(){this.onInteract=new Phaser.Signal}},{key:"show",value:function(){this.alpha<1&&(this.alpha=1),this.button.inputEnabled=!0}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0),this.button.inputEnabled=!1}},{key:"enable",value:function(){this.button.inputEnabled||(this.button.inputEnabled=!0)}},{key:"disable",value:function(){this.button.inputEnabled&&(this.button.inputEnabled=!1)}},{key:"fitInContainer",value:function(e){u.fitInContainer(this,e,this.anchor.x,this.anchor.y)}}]),t}(Phaser.Group));i.default=d},{"../utils/animations-util":28,"../utils/container-util":29,"../utils/custom-png-sequences-renderer.js":30}],17:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.container=t,this.video=document.getElementById(t),this.source=document.createElement("source"),this.video.appendChild(this.source),this.video.controls=!1,this.muted=!0,this.initSignals()}return a(e,[{key:"initSignals",value:function(){this.onComplete=new Phaser.Signal,this.onLoop=new Phaser.Signal}},{key:"play",value:function(e,t){if(void 0==this.videoName||this.videoName!=e){this.videoName=e,this.source.setAttribute("src",e),this.video.load(),this.video.play(),this.video.currentTime=0,this.video.endTime=0,this.video.muted=this.muted;var i=this;this.video.addEventListener("loadeddata",function(){i.initVideoArgs(t)})}else this.initVideoArgs(t),this.video.play()}},{key:"update",value:function(){this.video.muted=this.muted,this.videoEnded()&&(this.video.shouldLoop?(this.video.currentTime=this.video.initialTime,this.onLoop.dispatch()):this.video.paused||(this.video.pause(),this.onComplete.dispatch())),!this.video.paused&&this.videoEnded()&&(this.video.pause(),this.onComplete.dispatch())}},{key:"videoEnded",value:function(){return this.video.ended||0!=this.video.endTime&&this.video.currentTime>=this.video.endTime}},{key:"initVideoArgs",value:function(e){void 0!==e&&(void 0!==e.from&&void 0!==e.to&&(this.video.initialTime=e.from,this.video.currentTime=e.from,this.video.endTime=e.to),void 0!==e.loop&&"boolean"==typeof e.loop?this.video.shouldLoop=e.loop:this.video.shouldLoop=!1)}},{key:"unmute",value:function(){this.muted=!1}},{key:"mute",value:function(){this.muted=!0}},{key:"pause",value:function(){this.mute(),this.video.pause()}}]),e}();i.default=o},{}],18:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../prefabs/audio-controller"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){n(this,e),this.game=t,this.audioController=new r.default,this.canPlay=!1}return a(e,[{key:"enableAudio",value:function(){this.canPlay=!0}},{key:"pauseAllAudio",value:function(){this.audioController.muteAll()}},{key:"resetToDefaultAudioList",value:function(e){if(void 0!==e&&null!=e)for(var t=0;t<e.length;t++)e[t].played=!1}},{key:"resetAudio",value:function(e){if(void 0!==e&&null!=e)for(var t=0;t<e.length;t++)e[t].played&&!e[t].triggerOnce&&(this.audioController.pause(e[t].tag),e[t].played=!1)}},{key:"update",value:function(e,t){if(void 0!==t&&null!=t)for(var i=0;i<t.length;i++){var n=this.checkIfShouldBeEnabled(t[i],e);if(null!=n&&!t[i].played){if(n){var a=t[i].tag,o=PiecSettings.assetsDir+t[i].src,r={loop:t[i].loop};this.audioController.play(a,o,r)}else this.audioController.pause(t[i].tag);void 0!==t[i].triggerOnce&&this.canPlay&&(t[i].played=!0)}}}},{key:"checkIfShouldBeEnabled",value:function(e,t){return void 0!==e.at&&t>e.at?!(!e.play||!this.canPlay):null}}]),e}();i.default=s},{"../prefabs/audio-controller":5}],19:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../prefabs/collectible-controller"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){n(this,e),this.game=t,this.initSignals(),this.collectibleController=new r.default(this.game),this.collectibleList=[],this.collectibleListFired=[],this.setupController()}return a(e,[{key:"initSignals",value:function(){this.onHudCreate=new Phaser.Signal,this.onCollectUpdate=new Phaser.Signal}},{key:"setupController",value:function(){this.collectibleController.onHudCreate.add(function(e,t){this.onHudCreate.dispatch(e,t)},this),this.collectibleController.onCollectUpdate.add(function(e,t){this.onCollectUpdate.dispatch(e,t),this.variablesController&&this.variablesController.applyConsequences(this.collectibleController.getCollectible(e).consequences)},this)}},{key:"setCollectibleAmount",value:function(e,t){var i=this.collectibleController.getCollectible(e);null!=i&&i.setCollectibleAmount(t)}},{key:"update",value:function(e,t,i){if(this.variablesController||(this.variablesController=t),void 0!==i){this.collectibleList!=i&&(this.collectibleList=i,this.collectibleListFired=[]);for(var n=0;n<i.length;n++){var a=i[n].tag;!this.collectibleListFired[n]&&t.evaluateConditions(i[n].conditions)&&this.checkIfCollectibleShouldBeFired(i[n],e)&&(this.collectibleListFired[n]=!0,void 0!==i[n].spawn&&i[n].spawn?this.collectibleController.getCollectible(a).spawnCollectibles({amount:i[n].amount,lifetime:1e3*(i[n].to-i[n].from),spawnArea:i[n].htmlTag}):this.collectibleController.getCollectible(a).increaseCollectibleAmount(i[n].amount,i[n].spawn),this.collectibleController.getCollectible(a).consequences=i[n].consequences)}}}},{key:"checkIfCollectibleShouldBeFired",value:function(e,t){return void 0!==e.from&&t>=e.from}}]),e}();i.default=s},{"../prefabs/collectible-controller":6}],20:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../prefabs/custom-sprite"),l=a(s),u=e("../prefabs/custom-text"),c=a(u),h=e("../prefabs/cta-button"),d=a(h),f=e("../prefabs/retry-button"),p=a(f),g=e("../utils/container-util"),v=(n(g),e("../utils/tweener")),m=n(v),y=function(){function e(t){o(this,e),this.game=t,this.hudObjectsLayer=new Phaser.Group(this.game),this.initHudObjects()}return r(e,[{key:"addHudObject",value:function(e,t){this.hudObjects[e]=t,this.hudObjectsLayer.add(t)}},{key:"initHudObjects",value:function(){if(this.hudObjects=[],void 0!=PiecSettings.hudElements&&null!=PiecSettings.hudElements){for(var e in PiecSettings.hudElements)if(PiecSettings.hudElements.hasOwnProperty(e)){var t=PiecSettings.hudElements[e];void 0!==t.type&&"cta"==t.type?this.hudObjects[e]=new d.default(this.game,{src:t.src,container:t.htmlTag,anchor:t.anchor}):void 0!==t.type&&"retry"==t.type?this.hudObjects[e]=new p.default(this.game,{src:t.src,container:t.htmlTag,anchor:t.anchor}):void 0!==t.src?this.hudObjects[e]=new l.default(this.game,{src:t.src,container:t.htmlTag,anchor:t.anchor}):void 0!==t.text&&(this.hudObjects[e]=new c.default(this.game,{text:t.text,container:t.htmlTag,anchor:t.anchor,style:t.style,autolocalise:t.autolocalise})),this.hudObjectsLayer.add(this.hudObjects[e])}this.game.world.bringToTop(this.hudObjectsLayer)}}},{key:"resetToDefaultHudList",value:function(e){if(void 0!==e&&null!=e)for(var t=0;t<e.length;t++)e[t].played=!1}},{key:"resetHudList",value:function(e){if(void 0!==e&&null!=e)for(var t=0;t<e.length;t++)e[t].played&&!e[t].triggerOnce&&(e[t].played=!1)}},{key:"update",value:function(e,t,i){if(void 0!==i&&null!=i)for(var n=0;n<i.length;n++){var a=i[n].tag;if(!i[n].played&&null!=this.hudObjects[a]){var o=this.checkIfHudShouldBeEnabled(i[n],e),r=this.checkIfHasAnimationEffects(i[n],e),s=this.checkIfHudShouldMove(i[n],e);t.evaluateConditions(i[n].conditions)&&(this.game.world.bringToTop(this.hudObjectsLayer),r&&(this.animate(this.hudObjects[a],i[n].effect),-1!=i[n].effect.indexOf("In")&&"function"==typeof this.hudObjects[a].enable?this.hudObjects[a].enable():-1!=i[n].effect.indexOf("Out")&&"function"==typeof this.hudObjects[a].disable&&this.hudObjects[a].disable()),null!=o&&(o?this.hudObjects[a].show():this.hudObjects[a].hide()),s&&this.moveToContainer(this.hudObjects[a],i[n].effect,i[n].htmlTag),(null!=o||s||r)&&(i[n].played=!0,t.applyConsequences(i[n].consequences)))}}}},{key:"checkIfHudShouldMove",value:function(e,t){return void 0!==e.htmlTag&&void 0!==e.at&&t>=e.at}},{key:"checkIfHasAnimationEffects",value:function(e,t){return void 0!==e.effect&&void 0!==e.at&&t>=e.at}},{key:"checkIfHudShouldBeEnabled",value:function(e,t){return void 0!==e.at&&t>e.at&&void 0!==e.show?!!e.show:null}},{key:"moveToContainer",value:function(e,t,i){e.currentContainer!=i&&(e.alpha>0||void 0!==t&&-1!=t.indexOf("fade"))?(e.currentContainer=i,m.moveToContainer(e,i,0,600,Phaser.Easing.Quadratic.InOut)):e.fitInContainer(i)}},{key:"animate",value:function(e,t){switch(this.removeTween(e),t){case"fadeIn":e.tween=m.fadeIn(e,0,300,Phaser.Easing.Quadratic.InOut);break;case"fadeOut":e.tween=m.fadeOut(e,0,300,Phaser.Easing.Quadratic.InOut);break;case"tap":e.tween=m.tap(e,0,0,700,Phaser.Easing.Quadratic.InOut);break;case"tapDown":e.tween=m.tap(e,-130,0,700,Phaser.Easing.Quadratic.InOut);break;case"quickTap":e.tween=m.quickTap(e,0,300,Phaser.Easing.Quadratic.InOut);break;case"slideInDown":e.tween=m.slideInDown(e,0,300,Phaser.Easing.Quadratic.InOut);break;case"slideInDownBack":e.tween=m.slideInDown(e,0,500,Phaser.Easing.Back.Out);break;case"slideInUp":e.tween=m.slideInUp(e,0,300,Phaser.Easing.Quadratic.InOut);break;case"slideInUpBack":e.tween=m.slideInUp(e,0,500,Phaser.Easing.Back.Out);break;case"slideInLeft":e.tween=m.slideInLeft(e,0,300,Phaser.Easing.Quadratic.InOut);break;case"slideInLeftBack":e.tween=m.slideInLeft(e,0,500,Phaser.Easing.Back.Out);break;case"slideInRight":e.tween=m.slideInRight(e,0,300,Phaser.Easing.Quadratic.InOut);break;case"slideInRightBack":e.tween=m.slideInRight(e,0,500,Phaser.Easing.Back.Out);break;case"pulse":e.tween=m.pulse(e,0,300,Phaser.Easing.Quadratic.InOut);break;case"pulseSlow":e.tween=m.pulse(e,0,500,Phaser.Easing.Quadratic.InOut);break;case"swipe":e.tween=m.swipe(e,0,600,Phaser.Easing.Quadratic.InOut);break;case"scaleIn":e.tween=m.scaleIn(e,0,500,Phaser.Easing.Quadratic.Out);break;case"scaleOut":e.tween=m.scaleOut(e,0,500,Phaser.Easing.Elastic.Out);break;case"rubberBand":e.tween=m.rubberBand(e,0,1e3,Phaser.Easing.Elastic.Out)}}},{key:"removeTween",value:function(e){void 0!==e.tween&&null!=e.tween&&this.game.tweens.remove(e.tween)}}]),e}();i.default=y},{"../prefabs/cta-button":9,"../prefabs/custom-sprite":10,"../prefabs/custom-text":11,"../prefabs/retry-button":16,"../utils/container-util":29,"../utils/tweener":31}],21:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../prefabs/interactive-element"),s=n(r),l=e("../prefabs/hand-gesture-controller"),u=n(l),c=e("../prefabs/projectile-game"),h=n(c),d=e("../utils/util"),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(d),p=function(){function e(t,i){a(this,e),this.game=t,this.videoPlayableStateController=i,this.currentInteractions=null,this.interactiveElements=[],this.handGestureController=new u.default(this.game),this.initSignals(),this.setupController()}return o(e,[{key:"initSignals",value:function(){this.onInteract=new Phaser.Signal}},{key:"setupController",value:function(){}},{key:"update",value:function(e,t,i){if(this.handGestureController.update(),this.currentInteractions!=i&&(this.currentInteractions=i,this.clearCurrentInteractiveElements(),this.createInteractiveElements(e,i,t)),
void 0!=i&&null!=i)for(var n=0;n<i.length;n++){var a=i[n];this.checkIfInteractionShouldBeEnabled(a,e)&&t.evaluateConditions(i[n].conditions)?this.interactiveElements[n].enable():this.interactiveElements[n].disable()}}},{key:"clearCurrentInteractiveElements",value:function(){for(var e=this.interactiveElements.length,t=0;t<e;t++)this.interactiveElements[t].disable(),this.interactiveElements[t].autoDestroy(100);this.interactiveElements=[]}},{key:"calculateDuration",value:function(e,t){return 1e3*(t-e)}},{key:"createInteractiveElements",value:function(e,t,i){if(void 0!=t&&null!=t)for(var n=0;n<t.length;n++){var a,o=t[n],r=0,l=0;if(void 0!==o.to?(a=this.calculateDuration(o.from,o.to),r=a):a=null,"tap"==o.typeOfInteraction||"release"==o.typeOfInteraction){var u="onInputDown";"release"==o.typeOfInteraction&&(u="onInputUp");var c=new s.default(this.game,this.handGestureController,{src:o.src,container:o.htmlTag,onInteractEvent:u});c.onSuccess=o.onSuccess,c.consequences=o.consequences,this.game.add.existing(c),this.interactiveElements[n]=c,c.hide(),c.disable(),void 0!==c&&c.onInteract.add(function(e){this.videoPlayableStateController.transitionToState(e.onSuccess),i.applyConsequences(e.consequences),this.onInteract.dispatch(e.args.onInteractEvent)},this)}else if("minigame"==o.typeOfInteraction){var d=PiecSettings.minigames[o.gameTag],p={initialTimeMargin:d.initialTimeMargin,endTimeMargin:d.endTimeMargin,gameDuration:a,container:o.htmlTag};r-=d.initialTimeMargin+d.endTimeMargin,l+=d.initialTimeMargin;var g=new h.default(this.game,this.handGestureController,f.JSONmerge(d,p));g.successConsequences=o.successConsequences,g.successScript=o.onSuccess,g.failConsequences=o.failConsequences,g.failScript=o.onFail,this.game.add.existing(g),this.interactiveElements[n]=g,g.hide(),g.disable(),g.onSuccess.add(function(e){void 0!==e.successConsequences&&i.applyConsequences(e.successConsequences),void 0!==e.successScript&&(this.videoPlayableStateController.transitionToState(e.successScript),this.onInteract.dispatch(e.successScript)),g.disable()},this),g.onFail.add(function(e){g.disable(),void 0!==e.failConsequences&&i.applyConsequences(e.failConsequences),void 0!==e.failScript&&(this.videoPlayableStateController.transitionToState(e.failScript),this.onInteract.dispatch(e.failScript))},this)}if(this.interactionHasTimer(o)){var v=l+this.calculateDuration(e,o.from);null!=this.videoPlayableStateController.videoPlayableTimer&&this.videoPlayableStateController.videoPlayableTimer.startTimer(v,r/1e3)}}}},{key:"interactionHasTimer",value:function(e){return void 0!==e.timer&&e.timer}},{key:"checkIfInteractionShouldBeEnabled",value:function(e,t){return!(void 0!==e.to&&t>e.to)&&(void 0!==e.from&&t>=e.from)}}]),e}();i.default=p},{"../prefabs/hand-gesture-controller":12,"../prefabs/interactive-element":13,"../prefabs/projectile-game":15,"../utils/util":32}],22:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../prefabs/video-playable-interactive-elements-controller"),s=n(r),l=e("../prefabs/video-playable-collectible-controller"),u=n(l),c=e("../prefabs/video-playable-audio-controller"),h=n(c),d=e("../prefabs/video-controller"),f=n(d),p=e("../prefabs/video-playable-hud-controller"),g=n(p),v=e("../prefabs/video-playable-variables-controller"),m=n(v),y=e("../prefabs/video-playable-timer"),b=n(y),w=e("../utils/video-playable-util"),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(w),C=function(){function e(t,i,n,o,r){a(this,e),this.game=t,this.initialState=n,this.scripts=o,this.firstInteraction=!1,this.videoController=new f.default(i),this.videoPlayableAudioController=new h.default(this.game),this.interactiveElementsController=new s.default(this.game,this),this.videoPlayableCollectibleController=new u.default(this.game),this.videoPlayableHudController=new g.default(this.game),this.videoPlayableVariablesController=new m.default(r),this.videoPlayableTimer=null!=document.getElementById("video-playable-timer")?new b.default(this.game):null,this.currentState=this.initialState,this.initSignals(),this.setupController()}return o(e,[{key:"initSignals",value:function(){this.onStateChange=new Phaser.Signal,this.onPlayableComplete=new Phaser.Signal}},{key:"setupController",value:function(){this.videoController.onLoop.add(function(){this.videoPlayableHudController.resetHudList(this.currentState.hud),this.videoPlayableAudioController.resetAudio(this.currentState.audios)},this),this.videoController.onComplete.add(function(){this.currentStateHasDirectAutoplay()&&this.autoplay(),this.currentStateIsTheEnd()&&this.onPlayableComplete.dispatch()},this),this.game.input.onUp.add(function(){this.firstInteraction||(this.firstInteraction=!0,this.game.time.events.add(500,function(){this.playAudio(),this.videoController.unmute()},this))},this),this.videoPlayableCollectibleController.onHudCreate.add(function(e,t){this.videoPlayableHudController.addHudObject(e,t)},this),this.videoPlayableCollectibleController.onCollectUpdate.add(function(e,t){this.videoPlayableVariablesController.setVariable(e,t)},this),this.videoPlayableVariablesController.onVariableUpdate.add(function(e,t){this.videoPlayableCollectibleController.setCollectibleAmount(e,t)},this)}},{key:"update",value:function(){this.videoController.update(),this.interactiveElementsController.update(this.getVideoControllerCurrentTime(),this.videoPlayableVariablesController,this.currentState.interactions),this.videoPlayableHudController.update(this.getVideoControllerCurrentTime(),this.videoPlayableVariablesController,this.currentState.hud),this.videoPlayableCollectibleController.update(this.getVideoControllerCurrentTime(),this.videoPlayableVariablesController,this.currentState.collectibles),this.videoPlayableAudioController.update(this.getVideoControllerCurrentTime(),this.currentState.audios)}},{key:"getVideoControllerCurrentTime",value:function(){return Math.max(this.currentState.from,this.videoController.video.currentTime)}},{key:"transitionToState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";null!=this.videoPlayableTimer&&this.videoPlayableTimer.stopTimer(),""!=e&&(this.currentState=this.scripts[e]),this.videoPlayableHudController.resetToDefaultHudList(this.currentState.hud),this.videoPlayableAudioController.resetToDefaultAudioList(this.currentState.audios);var t,i,n=PiecSettings.assetsDir+this.currentState.video;if(void 0!==PiecSettings.videoFramerate){var a=PiecSettings.videoFramerate;t=P.convertFrameToSeconds(this.currentState.from,a),i=P.convertFrameToSeconds(this.currentState.to,a)}else t=this.currentState.from,i=this.currentState.to;this.videoController.play(n,{from:t,to:i,loop:this.currentState.loop}),this.currentStateHasAutoplayTimer()&&this.currentState.loop&&this.setAutoPlayTimer(this.currentState.autoplay),this.currentStateHasDirectAutoplay()&&this.currentStateHasTimer()&&this.setVideoPlayableTimer()}},{key:"getCurrentStateEarliestInteractionTime",value:function(){var e=1e3;if(void 0!==this.currentState.interactions&&null!=this.currentState.interactions)for(var t=0;t<this.currentState.interactions.length;t++)this.currentState.interactions[t].from<e&&(e=this.currentState.interactions[t].from);else e=this.currentState.from;return e}},{key:"getCurrentStateLatestInteractionTime",value:function(){var e=this.currentState.to;if(void 0!==this.currentState.interactions&&null!=this.currentState.interactions)for(var t=0;t<this.currentState.interactions.length;t++)void 0!==this.currentState.interactions[t].to&&this.currentState.interactions[t].to>e&&(e=this.currentState.interactions[t].to);return e}},{key:"getCurrentStateTimerDuration",value:function(){return this.currentStateHasAutoplayTimer()?this.currentState.autoplay.after/1e3:this.getCurrentStateLatestInteractionTime()-this.getCurrentStateEarliestInteractionTime()}},{key:"currentStateHasTimer",value:function(){return void 0!==this.currentState.autoplay&&void 0!==this.currentState.autoplay.timer&&this.currentState.autoplay.timer}},{key:"currentStateHasDirectAutoplay",value:function(){return void 0!==this.currentState.autoplay&&void 0!==this.currentState.autoplay.script}},{key:"currentStateHasAutoplayTimer",value:function(){return void 0!==this.currentState.autoplay&&void 0!==this.currentState.autoplay.script&&void 0!==this.currentState.autoplay.after}},{key:"currentStateIsTheEnd",value:function(){return!this.currentStateHasDirectAutoplay()&&(void 0==this.currentState.interactions||0==this.currentState.interactions.length)}},{key:"autoplay",value:function(){this.transitionToState(this.currentState.autoplay.script)}},{key:"playAudio",value:function(){this.videoPlayableAudioController.enableAudio()}},{key:"pause",value:function(){this.videoPlayableAudioController.pauseAllAudio(),this.videoController.pause()}},{key:"setAutoPlayTimer",value:function(e){var t=this.currentState;this.autoplayTimer=this.game.time.events.add(e.after,function(){this.currentState==t&&this.autoplay()},this)}},{key:"setVideoPlayableTimer",value:function(){if(null!=this.videoPlayableTimer){var e=this.getCurrentStateTimerDuration(),t=this.getCurrentStateEarliestInteractionTime()-this.videoController.video.currentTime;this.videoPlayableTimer.startTimer(1e3*t,e)}}}]),e}();i.default=C},{"../prefabs/video-controller":17,"../prefabs/video-playable-audio-controller":18,"../prefabs/video-playable-collectible-controller":19,"../prefabs/video-playable-hud-controller":20,"../prefabs/video-playable-interactive-elements-controller":21,"../prefabs/video-playable-timer":23,"../prefabs/video-playable-variables-controller":24,"../utils/video-playable-util":33}],23:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../prefabs/counter"),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=e("../utils/tweener"),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(u),h=function(e){function t(e){n(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.timerHud=new l.default(i.game,{tag:"video-playable-timer",htmlTag:"video-playable-timer",backgroundSrc:"timer",style:"circle_progressbar",initialValue:100,maxValue:100,minValue:0}),i.add(i.timerHud),i.initialScale=i.timerHud.scale.x,i.enabled=!1,i.lastXSeconds=1,i.timerHud.alpha=0,i.game.time.events.loop(Phaser.Timer.SECOND/100,i.updateTimer,i),i}return o(t,e),r(t,[{key:"startTimer",value:function(e,t){this.resetTimer(),this.popIn(e),this.game.time.events.add(e,function(){this.enabled=!0,this.startTime=new Date,this.countdownTime=t,this.elapsedTime=0},this)}},{key:"resetTimer",value:function(){this.pulsating=!1}},{key:"stopTimer",value:function(){this.popOut(),this.enabled=!1}},{key:"updateTimer",value:function(){if(this.elapsedTime<this.countdownTime&&this.enabled){var e=new Date,t=this.startTime.getTime()-e.getTime();this.elapsedTime=Math.abs(t/1e3);var i=this.countdownTime-this.elapsedTime;i>0&&this.timerHud.setCircleBarTo(this.getCompletionValue(i)),i<2*this.lastXSeconds&&(this.pulsating||this.pulsate(this.lastXSeconds)),i<=0&&this.stopTimer()}}},{key:"getCompletionValue",value:function(e){return e>2*this.lastXSeconds?(e-this.lastXSeconds)/(this.countdownTime-this.lastXSeconds)*100:e/(2*(this.countdownTime-this.lastXSeconds))*100}},{key:"popIn",value:function(e){this.game.time.events.add(Math.max(0,e-500),function(){this.timerHud.setCircleBarTo(105),this.removeTween(),this.restartScale(),this.tween=c.scaleIn(this.timerHud,0,500,Phaser.Easing.Elastic.Out),this.timerHud.alpha=1},this)}},{key:"popOut",value:function(){this.removeTween(),this.tween=c.scaleOut(this.timerHud,0,500,Phaser.Easing.Elastic.In)}},{key:"pulsate",value:function(e){this.removeTween(),this.restartScale(),this.pulsating=!0,this.tween=this.game.add.tween(this.timerHud.scale).to({x:1.1,y:1.1},500,Phaser.Easing.Quadratic.InOut,!0,0).repeat(e).yoyo(!0)}},{key:"restartScale",value:function(){this.timerHud.scale.x=this.initialScale,this.timerHud.scale.y=this.initialScale}},{key:"removeTween",value:function(){this.tween&&this.game.tweens.remove(this.tween)}}]),t}(Phaser.Group);i.default=h},{"../prefabs/counter":8,"../utils/tweener":31}],24:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.variables=[];for(var i in t)this.variables[i]=t[i].value;this.initSignals()}return a(e,[{key:"initSignals",value:function(){this.onVariableUpdate=new Phaser.Signal}},{key:"applyConsequences",value:function(e){if(void 0!==e)for(var t=e.split(";"),i=0;i<t.length;i++){var n=t[i],a="";if(n.includes("--"))this.decreaseVariable(n.split("--")[0],1),a=n.split("--")[0];else if(n.includes("-="))this.decreaseVariable(n.split("-=")[0],parseFloat(n.split("-=")[1])),a=n.split("-=")[0];else if(n.includes("++"))this.increaseVariable(n.split("++")[0],1),a=n.split("++")[0];else if(n.includes("+="))this.increaseVariable(n.split("+=")[0],parseFloat(n.split("+=")[1])),a=n.split("+=")[0];else if(n.includes("=")){var o=n.split("=")[1];this.setVariable(n.split("=")[0],isNaN(o)?o:parseFloat(o)),a=n.split("=")[0]}this.onVariableUpdate.dispatch(a,this.variables[a])}}},{key:"increaseVariable",value:function(e,t){null!=this.variables[e]&&(this.variables[e]+=t)}},{key:"decreaseVariable",value:function(e,t){null!=this.variables[e]&&(this.variables[e]-=t)}},{key:"setVariable",value:function(e,t){null!=this.variables[e]&&(this.variables[e]=t)}},{key:"evaluateConditions",value:function(e){var t=!0;if(void 0!==e)for(var i=e.split("&&"),n=0;n<i.length;n++){var a=i[n];if(a.includes("==")){var o=a.split("==")[1];t&=this.variableEqualTo(a.split("==")[0],isNaN(o)?o:parseFloat(o))}else if(a.includes("!=")){var o=a.split("!=")[1];t&=this.variableDifferentThan(a.split("!=")[0],isNaN(o)?o:parseFloat(o))}else if(a.includes(">=")){var o=a.split(">=")[1],r=this.variableBiggerThanOrEqualTo(a.split(">=")[0],isNaN(o)?o:parseFloat(o));t&=r}else if(a.includes("<=")){var o=a.split("<=")[1];t&=this.variableSmallerThanOrEqualTo(a.split("<=")[0],isNaN(o)?o:parseFloat(o))}else if(a.includes(">")){var o=a.split(">")[1];t&=this.variableBiggerThan(a.split(">")[0],isNaN(o)?o:parseFloat(o))}else if(a.includes("<")){var o=a.split("<")[1];t&=this.variableSmallerThan(a.split("<")[0],isNaN(o)?o:parseFloat(o))}else console.log("Operator not supported! "+a)}return t}},{key:"variableBiggerThan",value:function(e,t){return this.variables[e]>t}},{key:"variableBiggerThanOrEqualTo",value:function(e,t){return this.variables[e]>=t}},{key:"variableSmallerThan",value:function(e,t){return this.variables[e]<t}},{key:"variableSmallerThanOrEqualTo",value:function(e,t){return this.variables[e]<=t}},{key:"variableEqualTo",value:function(e,t){return this.variables[e].toString()==t.toString()}},{key:"variableDifferentThan",value:function(e,t){return this.variables[e].toString()!=t.toString()}}]),e}();i.default=o},{}],25:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),r(t,[{key:"preload",value:function(){}},{key:"init",value:function(){PiecSettings.assetsDir="dev"===PiecSettings.env?"assets/":"";var e=this.game;e.onInteract=new Phaser.Signal,e.onSDKCall=new Phaser.Signal,e.onResize=new Phaser.Signal,"undefined"!=typeof piec&&(piec.lockGame=function(){e.global.locked=!0},piec.unlockGame=function(){e.global.locked=!1},piec.destroyGame=function(){e.destroy()},piec.onSDKCall=function(){e.onSDKCall.dispatch()},piec.onResize=function(){e.onResize.dispatch()}),window.onresize=function(){e.scale.setGameSize(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio),e.scale.refresh(),e.state.start("boot",!0,!1)}}},{key:"create",value:function(){this.init(),this.game.input.maxPointers=1,this.initGlobalVariables(),this.game.state.start("preloader"),this.game.onMoveStart=function(e){e.global.interactions++,PiecSettings&&PiecSettings.onMoveStart&&PiecSettings.onMoveStart(e.global.interactions)},this.game.onMoveComplete=function(e){PiecSettings&&PiecSettings.onMoveComplete&&PiecSettings.onMoveComplete(e.global.moveStats)}}},{key:"initGlobalVariables",value:function(){this.game.global={interaction:0,gameComplete:!1,currentVideoScript:null}}}]),t}(Phaser.State);i.default=s},{}],26:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../prefabs/orientation-locker"),u=n(l),c=e("../prefabs/video-playable-state-controller"),h=n(c),d=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),s(t,[{key:"create",value:function(){if(this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setUserScale(1/window.devicePixelRatio,1/window.devicePixelRatio,0,0),this.game.global.windowWidth=document.body.clientWidth*window.devicePixelRatio,this.game.global.windowHeight=document.body.clientHeight*window.devicePixelRatio,this.orientationLock(),this.game.onSDKCall.add(this.mute,this),this.game.onResize.add(this.resize,this),void 0!==PiecSettings.timer&&1==PiecSettings.timer){var e=void 0!==PiecSettings.timerDuration?PiecSettings.timerDuration:4e3;this.game.time.events.add(e,function(){document.getElementById("vungle-close").classList.remove("hide")},this)}else document.getElementById("vungle-close").classList.remove("hide");this.videoPlayableStateController=new h.default(this.game,"videoBg",PiecSettings.script[PiecSettings.initialScript],PiecSettings.script,PiecSettings.variables),this.videoPlayableStateController.transitionToState(PiecSettings.initialScript),this.setupController()}},{key:"setupController",value:function(){this.videoPlayableStateController.onPlayableComplete.add(function(){this.onGameComplete()},this)}},{key:"resize",value:function(){null!=this.orientationLocker&&this.orientationLocker.update()}},{key:"render",value:function(){}},{key:"update",value:function(){this.videoPlayableStateController.update()}},{key:"mute",value:function(){this.videoPlayableStateController.pause()}},{key:"onGameComplete",value:function(){void 0!==PiecSettings.asoi&&1==PiecSettings.asoi&&(this.game.onSDKCall.dispatch(),this.game.time.events.add(50,function(){doSomething("download")},this))}},{key:"orientationLock",value:function(){var e=void 0!==PiecSettings.orientationLock?PiecSettings.orientationLock:"none",t=void 0!==PiecSettings.videoOrientation?PiecSettings.videoOrientation:"none";this.orientationLocker=new u.default(this.game,t,e),this.orientationLocker.update()}}]),t}(Phaser.State);i.default=d},{"../prefabs/orientation-locker":14,"../prefabs/video-playable-state-controller":22}],27:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../atlas/index"),u=(n(l),e("../utils/util")),c=(n(u),e("../utils/custom-png-sequences-renderer.js")),h=n(c),d=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.preloadAsset=!1,e}return r(t,e),s(t,[{key:"preload",value:function(){this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources(),h.preloadPngSequences(this.game)}},{key:"update",value:function(){}},{key:"loadResources",value:function(){this.loadInteractionImages(),this.loadCollectiblesImages(),this.loadHudElements(),this.preloadAsset||this.onLoadComplete()}},{key:"loadInteractionImages",value:function(){for(var e in PiecSettings.script)if(PiecSettings.script.hasOwnProperty(e)){var t=PiecSettings.script[e];if(void 0!==t.interactions)for(var i=0;i<t.interactions.length;i++)void 0!==t.interactions[i].src&&""!=t.interactions[i].src&&(this.game.load.image(t.interactions[i].src,PiecSettings.assetsDir+t.interactions[i].src),this.preloadAsset=!0);void 0!==t.autoplay&&void 0!==t.autoplay.timer&&t.autoplay.timer&&(this.game.load.image("timer",PiecSettings.assetsDir+"timer.png"),this.game.load.image("timer-fill",PiecSettings.assetsDir+"timer_fill.png"),this.preloadAsset=!0)}}},{key:"loadCollectiblesImages",value:function(){var e=0;if(void 0!==PiecSettings.collectibles)for(var t in PiecSettings.collectibles)if(PiecSettings.collectibles.hasOwnProperty(t)){e++;var i=PiecSettings.collectibles[t];this.game.load.image(i.src,PiecSettings.assetsDir+i.src),void 0!==i.counter&&(void 0!==i.counter.iconSrc&&""!=i.counter.iconSrc&&(this.game.load.image(i.counter.iconSrc,PiecSettings.assetsDir+i.counter.iconSrc),this.preloadAsset=!0),void 0!==i.counter.backgroundSrc&&""!=i.counter.backgroundSrc&&(this.game.load.image(i.counter.backgroundSrc,PiecSettings.assetsDir+i.counter.backgroundSrc),this.preloadAsset=!0))}e>0&&(this.game.load.image("cloud",PiecSettings.assetsDir+"cloud.png"),this.preloadAsset=!0)}},{key:"loadHudElements",value:function(){if(void 0!==PiecSettings.hudElements)for(var e in PiecSettings.hudElements)if(PiecSettings.hudElements.hasOwnProperty(e)){var t=PiecSettings.hudElements[e];void 0!==t.src&&""!=t.src&&(this.game.load.image(t.src,PiecSettings.assetsDir+t.src),this.preloadAsset=!0)}}},{key:"onLoadComplete",value:function(){this.game.state.start("endcard")}}]),t}(Phaser.State);i.default=d},{"../atlas/index":1,"../utils/custom-png-sequences-renderer.js":30,"../utils/util":32}],28:[function(e,t,i){"use strict";function n(e,t){e.loopReverse&&(e.animations.currentAnim.isReversed=!0),0!=t.loopCount&&t.loopCount===e.numberOfLoops&&(e.persistent||(t.loop=!1,e.alpha=0))}function a(e,t,i,n,a){t.loopReverse=a,t.speed=n,t.loopReverse?e.time.events.add(i,function(){t.alpha=1,t.animations.play("animation",n,!1),t.animations.currentAnim.onComplete.add(o,this)}):e.time.events.add(i,function(){t.alpha=1,t.animations.play("animation",n,!0)})}function o(e,t){e.animations.currentAnim.isReversed=!e.animations.currentAnim.isReversed,e.animations.play("animation",e.speed,!1)}function r(e,t,i,o,r,s,l,u,c,h,d,f){for(var p=h.offsetWidth*window.devicePixelRatio,g=h.offsetHeight*window.devicePixelRatio,v=h.offsetLeft*window.devicePixelRatio,m=h.offsetTop*window.devicePixelRatio,y=p/100,b=g/100,w=[],P=0;P<t.length;P++){var C=d.add.sprite(v+t[P]*y,m+i[P]*b,e);f.add(C),C.anchor.set(s),C.animations.add("animation"),C.alpha=0,C.persistent=c,a(d,C,o[P],l,!1),C.scale.x=p*u[P]/100/C.width,C.scale.y=C.scale.x,w.push(C),null!=r&&(C.numberOfLoops=r[P],C.animations.currentAnim.onLoop.add(n,this))}return w}function s(e,t,i,n,a,o){var r=t.scale.x;t.scale.x=.01,t.scale.y=.01,e.time.events.add(n,function(){e.add.tween(t.scale).to({x:r,y:r},i,Phaser.Easing.Back.Out,!0,0).onComplete.add(function(){e.time.events.add(a,function(){e.add.tween(t).to({alpha:0},i,Phaser.Easing.Quadratic.In,!0,0).onComplete.add(function(){t.destroy()},this)},this)},this)},this)}function l(e,t,i,n,a,o,r,s){e.time.events.add(r,function(){t.alpha=1,e.add.tween(t).to({y:n,x:i},o,s,!0,0),e.add.tween(t.scale).to({x:a,y:a},o,s,!0,0)},this),e.time.events.add(9e3+r,function(){e.add.tween(t).to({alpha:0},1e3,Phaser.Easing.Quadratic.InOut,!0,0),e.time.events.add(1e3,function(){t.destroy()},this)},this)}function u(e,t,i,n,a,o,r,s){e.time.events.add(r,function(){t.alpha=0,e.add.tween(t).to({alpha:[.5,1,0],y:n,x:i,angle:180},o,s,!0,0),e.add.tween(t.scale).to({x:a,y:a},o,s,!0,0)},this)}function c(e,t,i,n,a,o,r){this.starFloatWithDelayCustom(e,t,i,n,a,o,r,Phaser.Easing.Quadratic.Out)}function h(e,t,i,n,a,o){for(var r=Math.random()>.5?1:-1,s=50*Math.random()+30,l=0;l<20;l++){var u=new Phaser.Sprite(game,0,0,t);u.x=e.x,u.y=e.y,u.scale.x=e.x/1.5/u.width,u.scale.y=u.scale.x,u.alpha=0,u.anchor.set(.5);var c=u.scale.x,h=a+200*Math.random(),d=20*l+o,f=u.x;game.add.tween(u).to({x:[f+Math.random()*s*r,this.goal.getXCoordOfGoal(index)-Math.random()*s*r,this.goal.getXCoordOfGoal(index)],y:this.goal.getYCoordOfGoal(index),alpha:[1,1,1,1,0]},h,Phaser.Easing.Quadratic.InOut,!0,d).interpolation(function(e,t){return Phaser.Math.catmullRomInterpolation(e,t)}).onComplete.add(function(e){e.destroy()},this),game.add.tween(u.scale).to({x:[1.1*c,c,c,.5*c],y:[1.1*c,c,c,.5*c]},h,Phaser.Easing.Quadratic.InOut,!0,d),this.fxLayer.add(u)}}Object.defineProperty(i,"__esModule",{value:!0}),i.onLoop=n,i.playAnimation=a,i.onComplete=o,i.playAnimations=r,i.spawnAndDissapear=s,i.starFloatWithDelayCustom2=l,i.starFloatWithDelayCustom=u,i.starFloatWithDelay=c,i.flyBubbleToGoal=h},{}],29:[function(e,t,i){"use strict";function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=document.getElementById(t),o=a.offsetWidth*window.devicePixelRatio,r=a.offsetHeight*window.devicePixelRatio,s=a.getBoundingClientRect().left*window.devicePixelRatio,l=a.getBoundingClientRect().top*window.devicePixelRatio;void 0!==e.anchor&&(e.anchor.x=i,e.anchor.y=n),e.x=s+o*i,e.y=l+r*n;var u=e.scale.x;e.scale.x=o/(e.width/e.scale.x),e.scale.y=e.scale.x,e.height>r&&(e.scale.x=u,e.scale.y=u,e.scale.y=r/(e.height/e.scale.y),e.scale.x=e.scale.y)}function a(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=document.getElementById(t),o=a.offsetWidth*window.devicePixelRatio,r=a.offsetHeight*window.devicePixelRatio,s=a.getBoundingClientRect().left*window.devicePixelRatio,l=a.getBoundingClientRect().top*window.devicePixelRatio;void 0!==e.anchor&&(e.anchor.x=i,e.anchor.y=n),e.x=s+o*i,e.y=l+r*n,e.scale.x=o/(e.width/e.scale.x),e.scale.y=e.scale.x}function o(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=document.getElementById(t),o=a.offsetWidth*window.devicePixelRatio,r=a.offsetHeight*window.devicePixelRatio,s=a.getBoundingClientRect().left*window.devicePixelRatio,l=a.getBoundingClientRect().top*window.devicePixelRatio;void 0!=e.anchor&&e.anchor.set(i,n),e.x=s+o*i,e.y=l+r*n,e.scale.y=r/e.height,e.scale.x=e.scale.y}function r(e,t){a(e,t),e.x+=e.width/2,e.y+=e.height/2}function s(e){return document.getElementById(e).getBoundingClientRect().top*window.devicePixelRatio}function l(e){return document.getElementById(e).getBoundingClientRect().left*window.devicePixelRatio}function u(e){return document.getElementById(e).offsetWidth*window.devicePixelRatio}function c(e){return document.getElementById(e).offsetHeight*window.devicePixelRatio}function h(e,t){var i=document.getElementById(t),n=i.offsetWidth*window.devicePixelRatio;i.offsetHeight,window.devicePixelRatio;e.scale.x=n/e.width,e.scale.y=e.scale.x}function d(e){var t=document.getElementById(e),i=t.offsetWidth*window.devicePixelRatio,n=(t.offsetHeight,window.devicePixelRatio,t.getBoundingClientRect().left*window.devicePixelRatio);t.getBoundingClientRect().top,window.devicePixelRatio;return n+Math.random()*i}function f(e){var t=document.getElementById(e),i=(t.offsetWidth,window.devicePixelRatio,t.offsetHeight*window.devicePixelRatio);t.getBoundingClientRect().left,window.devicePixelRatio;return t.getBoundingClientRect().top*window.devicePixelRatio+Math.random()*i}function p(e){var t=document.getElementById(e),i=t.offsetWidth*window.devicePixelRatio;return t.getBoundingClientRect().left*window.devicePixelRatio+i/2}function g(e){var t=document.getElementById(e),i=t.offsetHeight*window.devicePixelRatio;return t.getBoundingClientRect().top*window.devicePixelRatio+i/2}Object.defineProperty(i,"__esModule",{value:!0}),i.bestFit=n,i.fitInContainer=a,i.fitInContainerHeight=o,i.fitInContainerAnchorAtCenter=r,i.getContainerY=s,i.getContainerX=l,i.getContainerWidth=u,i.getContainerHeight=c,i.resizeToSizeOfContainer=h,i.getRandomXWithinContainer=d,i.getRandomYWithinContainer=f,i.getXCenterWithinContainer=p,i.getYCenterWithinContainer=g},{}],30:[function(e,t,i){"use strict";function n(e){
if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e){if(null!=PiecSettings.pngAnimations)for(var t in PiecSettings.pngAnimations){var i=PiecSettings.pngAnimations[t];o(e,i)}}function o(e,t){var i=t.src.substr(0,t.src.indexOf("."));e.load.spritesheet(i,PiecSettings.assetsDir+t.src,t.spriteWidth,t.spriteHeight,t.spriteNumber)}function r(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=PiecSettings.pngAnimations[t],o=a.src.substr(0,a.src.indexOf("."));if(null!=a.htmlContainer){var r=document.getElementById(a.htmlContainer),s=r.offsetWidth*window.devicePixelRatio;r.offsetHeight,window.devicePixelRatio,r.getBoundingClientRect().left,window.devicePixelRatio,r.getBoundingClientRect().top,window.devicePixelRatio}var u=e.add.sprite(0,0,o);if(null!=n&&c.animToDom(u,n),u.animations.add("animation"),u.alpha=0,null==a.loopReverse&&(a.loopReverse=!1),null!=a.isReversed&&a.isReversed&&(u.animations.currentAnim.isReversed=!0),l.playAnimation(e,u,a.delay,a.fps,a.loopReverse),null!=a.angle&&0!=a.angle){var h=0;this.game.global.windowWidth>this.game.global.windowHeight&&null!=a.responsiveAngle&&a.responsiveAngle&&(h=90),u.anchor.set(.5),u.angle=a.angle+h}if(null!=a.htmlContainer&&(u.scale.x=s/u.width,u.scale.y=u.scale.x,u.persistent=!1),null!=a.loops&&(u.numberOfLoops=a.loops,u.animations.currentAnim.onLoop.add(l.onLoop,this)),null!=a.effect&&-1!=a.effect.indexOf("fade-in")){u.alpha=0;e.add.tween(u).to({alpha:1},1e3,Phaser.Easing.Linear.None,!0,a.delay)}return u}Object.defineProperty(i,"__esModule",{value:!0}),i.preloadPngSequences=a,i.playPngSequence=r;var s=e("../utils/animations-util.js"),l=n(s),u=e("../utils/container-util"),c=n(u)},{"../utils/animations-util.js":28,"../utils/container-util":29}],31:[function(e,t,i){"use strict";function n(e,t,i,n,a,o,r){if(null==e||null===e.game)return null;var s=document.getElementById(t),l=s.offsetWidth*window.devicePixelRatio,u=l*e.anchor.x,c=s.getBoundingClientRect().left*window.devicePixelRatio+u,h=l/(e.width/e.scale.x),d=s.offsetHeight*window.devicePixelRatio,f=d*e.anchor.y,p=s.getBoundingClientRect().top*window.devicePixelRatio+f,g=e.game.add.tween(e).to({x:c,y:p},n,a,void 0===r||r,i);return e.game.add.tween(e.scale).to({x:h,y:h},n,a,void 0===r||r,i),o&&g.onComplete.add(o,this),g}function a(e,t,i,n,a,o,r,s){if(null===e||null===e.game)return null;var l=e.game.add.tween(e).to({x:t,y:i},a,o,void 0===s||s,n);return r&&l.onComplete.add(r,this),l}function o(e,t,i,n,a,o,r){if(null===e||null===e.game)return null;var s={};null!==t&&(s={alpha:t});var l=e.game.add.tween(e).to(s,0===n?1:n,a,void 0===o||o,i);return r&&l.onComplete.add(r,this),l}function r(e,t,i,n,a,o){return this.fade(e,1,t,i,n,a,o)}function s(e,t,i,n,a,o){return this.fade(e,0,t,i,n,a,o)}function l(e,t,i,n,a,o,r){if(null===e||null===e.game)return null;var s=e.game.add.tween(e.scale).to({x:t,y:i},a,o,!0,n);return r&&s.onComplete.add(r,this),s}function u(e,t,i,n,a,o){if(null===e||null===e.game)return null;var r=document.getElementById(t),s=r.getBoundingClientRect(),l=this.getScaleFromDom(t,e);this.moveTo(e,(s.left+.5*s.width)*window.devicePixelRatio,(s.top+.5*s.height)*window.devicePixelRatio,i,n,a,o),this.scaleTo(e,l,l,i,n,a)}function c(e,t){var i=document.getElementById(e),n=i.getBoundingClientRect(),a=n.width*window.devicePixelRatio/t._frame.width;return!1==t._frame.height*a<=n.height*window.devicePixelRatio&&(a=n.height*window.devicePixelRatio/t._frame.height),a}function h(e,t,i){if(null===e||null===e.game)return null;e.game.add.tween(e.scale).to({x:1.2*e.scale.x,y:1.2*e.scale.x},i,Phaser.Easing.Quadratic.InOut,!0,t,-1,!0)}function d(e,t,i){if(null===e||null===e.game)return null;var n=e.scale.x,a=e.scale.y;e.angle=0,e.scale.x=0,e.scale.y=0,e.game.add.tween(e.scale).to({x:n,y:a},i,Phaser.Easing.Quadratic.InOut,!0,t),e.game.add.tween(e).to({angle:360},i,Phaser.Easing.Back.InOut,!0,t)}function f(e,t,i,n,a){if(null===e||null===e.game)return null;i=e.scale.x*i,n=e.scale.x*n;var o=e.game.add.tween(e.scale).to({x:i,y:i},500,Phaser.Easing.Quadratic.Out,!0,0),r=e.game.add.tween(e.scale).to({x:n,y:n},500,Phaser.Easing.Quadratic.In,!1,0);o.chain(r);var s=e.game.add.tween(e).to({angle:15},500,function(e){return Math.sin(2*Math.PI*e)},!0,0,1);a&&s.onComplete.add(function(){a(e)},this)}function p(e,t,i,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e.scale.x,r=e.scale.y;e.game.add.tween(e.scale).to({x:o*(t||1.1),y:r*(i||.9)},n||800,Phaser.Easing.Linear.None,!0,delay,-1).yoyo(a,0)}function g(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments[4],o=arguments[5];t=t||10;var r=e.angle,s=r+t;e.angle-=t,null!=a&&(e.anchor.x=a),null!=o&&(e.anchor.y=o),e.game.add.tween(e).to({angle:s},i,Phaser.Easing.Linear.None,!0,n,-1).yoyo(!0,0)}function v(e,t,i,n,a){var o=e.scale.x,r=e.scale.y;e.scale.x=.001,e.scale.y=.001,"function"==typeof e.show?e.show():e.alpha=1;var s=e.game.add.tween(e.scale).to({x:o,y:r},i||800,n,!0,t||0);return a&&s.onComplete.add(function(){a(e)},this),s}function m(e,t,i,n,a){var o=e.scale.x,r=e.game.add.tween(e.scale).to({x:.001,y:.001},i||800,n,!0,t||0);return a?r.onComplete.add(function(){"function"==typeof e.hide?e.hide():e.alpha=0,e.scale.x=o,e.scale.y=o,a(e)},this):r.onComplete.add(function(){"function"==typeof e.hide?e.hide():e.alpha=0,e.scale.x=o,e.scale.y=o},this),r}function y(e,t,i,n,a){var o=.3*a;e.alpha=0;var r=e.game.add.tween(e).to({alpha:1},o,Phaser.Easing.Linear.None,!0,n||0),s=e.game.add.tween(e).to({alpha:0},o,Phaser.Easing.Linear.None,!1,a-2*o);r.chain(s),e.game.add.tween(e).to({x:t,y:i},a,Phaser.Easing.Quadratic.Out,!0,n||0)}function b(e,t,i){var n=.3*i,a=.15*i,o=e.scale.x,r=e.scale.y;e.scale.x=0,e.scale.y=0,e.game.add.tween(e.scale).to({x:o,y:r},a,Phaser.Easing.Quadratic.In,!0,t||0),e.game.add.tween(e).to({alpha:0},n,Phaser.Easing.Linear.None,!0,i-a)}function w(e,t,i,n){e.game.add.tween(e).to({angle:[-5,-5,0]},i,n,!0,t);var a=e.scale.x;return e.game.add.tween(e.scale).to({x:[.9*a,.9*a,a],y:[.9*a,.9*a,a]},i,n,!0,t)}function P(e,t,i,n,a){e.angle=t,e.game.add.tween(e).to({angle:[t+10,t+5,t-5,t-5,t]},n,a,!0,i);var o=e.scale.x;return e.game.add.tween(e.scale).to({x:[o,o,.9*o,.9*o,o],y:[o,o,.9*o,.9*o,o]},n,a,!0,i)}function C(e,t,i,n){var a=1.5*e.height*-1,o=.3*e.width,r=e.y,s=e.x,l=e.scale.x;e.game.add.tween(e).to({angle:[-20,0,20],y:[r,r+a/2,r+a],x:[s,s+.25*o,s+o]},i,n,!0,t).onComplete.add(function(){e.game.add.tween(e).to({angle:0,x:s,y:r},i/2,n,!0,500)},this),e.game.add.tween(e.scale).to({x:[.9*l,.9*l],y:[.9*l,.9*l]},i,n,!0,t).onComplete.add(function(){e.game.add.tween(e.scale).to({x:l,y:l},500,n,!0,0)},this)}function S(e,t,i,n){var a=2*e.height*-1;return this.slideIn(e,0,a,t,i,n)}function x(e,t,i,n){var a=2*e.height;return this.slideIn(e,0,a,t,i,n)}function k(e,t,i,n){var a=2*e.width;return this.slideIn(e,a,0,t,i,n)}function O(e,t,i,n){var a=2*e.width*-1;return this.slideIn(e,a,0,t,i,n)}function T(e,t,i,n,a,o){var r=e.x,s=e.y;return e.x+=t,e.y+=i,this.fadeIn(e,n,a/2,Phaser.Easing.Quadratic.InOut),e.game.add.tween(e).to({x:r,y:s},a,o,!0,n)}function I(e,t,i,n){var a=e.scale.x;return e.game.add.tween(e.scale).to({x:1.1*a,y:1.1*a},i,n,!0,t).loop(!0).yoyo(!0)}function E(e,t,i,n){var a=e.scale.x;return e.scale.x=1.1*a,e.scale.y=.9*a,e.game.add.tween(e.scale).to({x:a,y:a},i,n,!0,t)}Object.defineProperty(i,"__esModule",{value:!0}),i.moveToContainer=n,i.moveTo=a,i.fade=o,i.fadeIn=r,i.fadeOut=s,i.scaleTo=l,i.moveToDom=u,i.getScaleFromDom=c,i.bulge=h,i.spinIn=d,i.wobbleScaleIn=f,i.jiggle=p,i.jiggleAngle=g,i.scaleIn=v,i.scaleOut=m,i.fadeFloat=y,i.scaleThenFade=b,i.quickTap=w,i.tap=P,i.swipe=C,i.slideInDown=S,i.slideInUp=x,i.slideInLeft=k,i.slideInRight=O,i.slideIn=T,i.pulse=I,i.rubberBand=E},{}],32:[function(e,t,i){"use strict";function n(e,t){return t||(t=0),Math.floor(Math.random()*(e-t+1))+t}function a(e){return e[this.rndInt(e.length-1,0)]}function o(e){return e||(e=1),"rgba("+this.rndInt(256)+","+this.rndInt(256)+","+this.rndInt(256)+","+e+")"}function r(){return document.body.clientHeight>document.body.clientWidth}function s(e){return JSON.parse(JSON.stringify(e))}function l(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}function u(e){return-1===e.lastIndexOf(".")?e:e.substring(0,e.lastIndexOf("."))}function c(e){e.style.opacity=0;var t=+new Date;!function i(){e.style.opacity=+e.style.opacity+(new Date-t)/400,t=+new Date,+e.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16))}()}function h(e){return 100*Math.sqrt(2*Math.abs(e)/w)}function d(e){var t={boolean:{},number:{},string:{}},i=[];return e.filter(function(e){var n=void 0===e?"undefined":b(e);return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)})}function f(e,t){var i,n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function p(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function g(e,t){var i=document.getElementById(e),n=i.getBoundingClientRect(),a=n.width*window.devicePixelRatio/t._frame.sourceSizeW;t.scale.x=a,t.scale.y=a,!1==t._frame.sourceSizeH*a<=n.height*window.devicePixelRatio&&(a=n.height*window.devicePixelRatio/t._frame.sourceSizeH,t.scale.x=a,t.scale.y=a),t.anchor.set(.5,.5),t.x=(n.left+.5*n.width)*window.devicePixelRatio,t.y=(n.top+.5*n.height)*window.devicePixelRatio}function v(e){switch(e){case"Linear":return Phaser.Easing.Linear.None;case"BackIn":return Phaser.Easing.Back.In;case"BackOut":return Phaser.Easing.Back.Out;case"BounceIn":return Phaser.Easing.Bounce.In;case"BounceOut":return Phaser.Easing.Bounce.Out;case"CircularIn":return Phaser.Easing.Circular.In;case"CircularOut":return Phaser.Easing.Circular.Out;case"CubicIn":return Phaser.Easing.Cubic.In;case"CubicOut":return Phaser.Easing.Cubic.Out;case"ElasticIn":return Phaser.Easing.Elastic.In;case"ElasticOut":return Phaser.Easing.Elastic.Out;case"ExponentialIn":return Phaser.Easing.Exponential.In;case"ExponentialOut":return Phaser.Easing.Exponential.Out;case"QuadraticIn":return Phaser.Easing.Quadratic.In;case"QuadraticOut":return Phaser.Easing.Quadratic.Out;case"QuarticIn":return Phaser.Easing.Quartic.In;case"QuarticOut":return Phaser.Easing.Quartic.Out;case"QuinticIn":return Phaser.Easing.Quintic.In;case"QuinticOut":return Phaser.Easing.Quintic.Out;case"SinusoidalIn":return Phaser.Easing.Sinusoidal.In;case"SinusoidalOut":return Phaser.Easing.Sinusoidal.Out}console.error('unkown easing value "'+e+'"')}function m(e,t){for(var i in t)e[i]=t[i];return e}function y(){var e;return navigator.userLanguage?(e=navigator.userLanguage,e=e.split("-")[0]):navigator.language?(e=navigator.language,e=e.split("-")[0]):(e="en",void 0!==PiecSettings.defaultLang&&(e=PiecSettings.defaultLang)),e}Object.defineProperty(i,"__esModule",{value:!0});var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.rndInt=n,i.sample=a,i.rndRgba=o,i.isPortrait=r,i.clone=s,i.remove=l,i.removeExtension=u,i.fadeIn=c,i.calcQuadTime=h,i.uniq=d,i.extend=f,i.numberWithCommas=p,i.animToDom=g,i.getEasing=v,i.JSONmerge=m,i.getDeviceLang=y;var w=19.8},{}],33:[function(e,t,i){"use strict";function n(e,t,i){return!(void 0!==e&&i>e)&&(void 0!==t&&i>=t)}function a(e,t){var i=Math.floor(e),n=e%1;return i+Math.round(100*n/t*100)/100}Object.defineProperty(i,"__esModule",{value:!0}),i.checkIfShouldBeEnabled=n,i.convertFrameToSeconds=a},{}]},{},[4]);
